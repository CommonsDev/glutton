<html><head><style>@CHARSET "ISO-8859-1";

h1 {
	text-align: center
}

table {
	border-collapse: collapse
}

table,th,td {
	border: 1px solid black
}

tr {
	font-size: 1.1em;
	text-align: left;
	padding: 20px
}

.alt {
	background: #F2F2F2
}

td {
	padding: 10px
}

.indented {
	margin-left: +3em
}

.totop {
	font-size: 80%;
	text-align: center;
	border-bottom: 2px solid
}

.barChart {
	width: 400px;
	height: 450px;
	padding-bottom: 10px;
	padding-top: 10px;
	display: inline-block
}

.chartStart {
	display: inline-block
}

.label {
	display: block;
	margin-left: +2em
}

.center {
	text-align: center
}

.note { 
	border-style: solid;
    border-color: gray;
}

.Passed {
	background-color: rgb(0, 170, 0)
}

.Failed {
	background-color: rgb(221, 0, 0)
}

.Skipped {
	background-color: rgb(204, 204, 204)
}

.summary {
	
}

.throw {
	white-space: pre;
	font-family: monospace;
	font-size: 90%
}

.critical {
	background-color: rgb(255, 158, 158);
}
</style><title>LDP Test Suite Report</title></head><body><h1>LDP Test Suite Summary</h1><h2>Overall Coverage Bar Charts</h2><span class="chartStart"><label class="label"><b>Test Results by Specification Requirement</b></label><div class="barChart" id="overallChart1"></div><svg id="passFailLegend" width="150" height="250"><rect width="15" height="15" x="0" y="0" style="fill:#a2bf2f"/><text x="20" y="13" fill="black">Passed Tests</text><rect width="15" height="15" x="0" y="20" style="fill:#a80000"/><text x="20" y="33" fill="black">Failed Tests</text><rect width="15" height="15" x="0" y="40" style="fill:#606060"/><text x="20" y="53" fill="black">Skipped Tests</text>&lt;/svg&gt;</span><span class="chartStart"><label class="label"><b>Test Results by Test Class</b></label><div class="barChart" id="resourcesChart"></div><svg id="testClassLegend" width="175" height="250"><rect width="15" height="15" x="0" y="0" style="fill:#42d992"/><text x="20" y="13" fill="black">BasicContainerTest</text><rect width="15" height="15" x="0" y="20" style="fill:#1cbfbb"/><text x="20" y="33" fill="black">MemberResourceTest</text>&lt;/svg&gt;</span><br/><table class="summary"><tr><th>Test Suite Name</th><th>Revision</th><th>Report Date</th><th>Skipped Tests</th><th>MUST Requirements</th><th>SHOULD Requirements</th><th>MAY Requirements</th></tr><tr class="alt"><td>LDP Test Suite</td><td><a href="https://github.com/w3c/ldp-testsuite/commit/c6810e3">c6810e3</a></td><td>Mon Mar 16 17:38:02 CET 2015</td><td>(<b>63/112</b>) of the total tests.</td><td><b>31/76</b> Passed<br/><b>0/76</b> Failed<br/><b>45/76</b> Skipped</td><td><b>10/25</b> Passed<br/><b>3/25</b> Failed<br/><b>12/25</b> Skipped</td><td><b>4/11</b> Passed<br/><b>1/11</b> Failed<br/><b>6/11</b> Skipped</td></tr></table><h2>Included Groups for LDP Test Suite</h2><ul><li>ldpMember</li><li>MAY</li><li>SHOULD</li><li>MUST</li></ul><h2>Excluded Groups for LDP Test Suite</h2><div style="padding-left:2em"><i>No groups of this type found in the test suite</i></div><h1 class="center">Methods called</h1><a href="#Skipped">Go To Skipped Tests<br/></a><a href="#Passed">Go To Passed Tests<br/></a><a href="#Indirect">Go To Indirect Tests<br/></a><br/><table class="indented"><tr><th class="Failed"><a id="Failed">Failed Test Cases</a></th><th class="Failed">Groups</th><th class="Failed">Description of Test Method</th></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutToCreate">BasicContainer-PutToCreate</a></td><td>[MAY]</td><td>LDP servers MAY choose to allow the creation of new resources using HTTP PUT.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPreferContainmentTriples">BasicContainer-PreferContainmentTriples</a></td><td>[SHOULD]</td><td>LDP servers SHOULD respect all of a client's LDP-defined hints, for example which subsets of LDP-defined state the client is interested in processing, to influence the set of triples returned in representations of an LDPC, particularly for large LDPCs. See also [LDP-PAGING].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPatchMethod">BasicContainer-PatchMethod</a></td><td>[SHOULD]</td><td>LDP servers are RECOMMENDED to support HTTP PATCH as the preferred method for updating an LDPC's empty-container triples. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictUriReUseSlug">BasicContainer-RestrictUriReUseSlug</a></td><td>[SHOULD]</td><td>LDP servers that allow member creation via POST SHOULD NOT re-use URIs.</td></tr></table><br/><p class="totop"><a href="#top">Back to Top</a></p><br/><table class="indented"><tr><th class="Skipped"><a id="Skipped">Skipped Test Cases</a></th><th class="Skipped">Groups</th><th class="Skipped">Description of Test Method</th></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPublishConstraintsReadOnlyProp">MemberResource-PublishConstraintsReadOnlyProp</a></td><td>[MUST]</td><td>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testRelativeUriResolutionPut">MemberResource-RelativeUriResolutionPut</a></td><td>[MUST]</td><td>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testDeleteNonRDFSourceDeletesAssociatedResource">NonRDFSource-DeleteNonRDFSourceDeletesAssociatedResource</a></td><td>[MUST]</td><td>When a contained LDPR is deleted, and the LDPC server created anassociated LDP-RS (see the LDPC POST section), the LDPC server must alsodelete the associated LDP-RS it created.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testIsHttp11Manual">BasicContainer-IsHttp11Manual</a></td><td>[MANUAL, MUST]</td><td>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndGetFromContainer">NonRDFSource-PostResourceAndGetFromContainer</a></td><td>[MAY]</td><td>LDP servers may accept an HTTP POST of non-RDF representations (LDP-NRs) for creation of any kind of resource, for example binary resources.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_test4xxErrorHasResponseBody">BasicContainer-4xxErrorHasResponseBody</a></td><td>[SHOULD]</td><td>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndCheckAssociatedResource">NonRDFSource-PostResourceAndCheckAssociatedResource</a></td><td>[MAY]</td><td>Upon successful creation of an LDP-NR (HTTP status code of 201-Created and URI indicated by Location response header), LDP servers may create an associated LDP-RS to contain data about the newly created LDP-NR. If a LDP server creates this associated LDP-RS it must indicate its location on the HTTP response using the HTTP Link response header with link relation describedby and href to be the URI of the associated LDP-RS resource.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testIsHttp11Manual">NonRDFSource-IsHttp11Manual</a></td><td>[MANUAL, MUST]</td><td>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testReUseVocabularies">MemberResource-ReUseVocabularies</a></td><td>[MANUAL, SHOULD]</td><td>LDP-RSs SHOULD reuse existing vocabularies instead of creating their own duplicate vocabulary terms. In addition to this general rule, some specific cases are covered by other conformance rules.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutBadETag">MemberResource-PutBadETag</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testAcceptPatchHeader">NonRDFSource-AcceptPatchHeader</a></td><td>[MUST]</td><td>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptionsAllowHeader">NonRDFSource-OptionsAllowHeader</a></td><td>[MUST]</td><td>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutReplacesResource">BasicContainer-PutReplacesResource</a></td><td>[MUST]</td><td>If a HTTP PUT is accepted on an existing resource, LDP servers MUST replace the entire persistent state of the identified resource with the entity representation in the body of the request.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testConditionFailedStatusCode">NonRDFSource-ConditionFailedStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPutRequiresIfMatch">NonRDFSource-PutRequiresIfMatch</a></td><td>[SHOULD]</td><td>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testLdpLinkHeader">NonRDFSource-LdpLinkHeader</a></td><td>[MUST]</td><td>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutRequiresIfMatch">BasicContainer-PutRequiresIfMatch</a></td><td>[SHOULD]</td><td>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndCheckLink">NonRDFSource-PostResourceAndCheckLink</a></td><td>[MAY]</td><td>LDP servers exposing an LDP Non-RDF Source may advertise this by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#NonRDFSource, and a link relation type of type (that is, rel='type') in responses to requests made to the LDP-NR's HTTP Request-URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testHead">NonRDFSource-Head</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP HEAD method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testReUseVocabularies">BasicContainer-ReUseVocabularies</a></td><td>[MANUAL, SHOULD]</td><td>LDP-RSs SHOULD reuse existing vocabularies instead of creating their own duplicate vocabulary terms. In addition to this general rule, some specific cases are covered by other conformance rules.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutReadOnlyProperties4xxStatus">BasicContainer-PutReadOnlyProperties4xxStatus</a></td><td>[MUST]</td><td>If an otherwise valid HTTP PUT request is received that attempts to change properties the server does not allow clients to modify, LDP servers MUST respond with a 4xx range status code (typically 409 Conflict)</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutPropertiesNotPersisted">BasicContainer-PutPropertiesNotPersisted</a></td><td>[MUST]</td><td>If an otherwise valid HTTP PUT request is received that contains properties the server chooses not to persist, e.g. unknown content, LDP servers MUST respond with an appropriate 4xx range status code [HTTP11].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceGetMetadataAndBinary">NonRDFSource-PostResourceGetMetadataAndBinary</a></td><td>[MAY]</td><td>Each LDP Non-RDF Source must also be a conforming LDP Resource. LDP Non-RDF Sources may not be able to fully express their state using RDF.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRequestedInteractionModelCreateNotAllowed">BasicContainer-RequestedInteractionModelCreateNotAllowed</a></td><td>[MUST]</td><td>LDP servers that successfully create a resource from a RDF representation in the request entity body MUST honor the client's requested interaction model(s). The created resource can be thought of as an RDF named graph [rdf11-concepts]. If any model cannot be honored, the server MUST fail the request.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRequestedInteractionModelHeaders">BasicContainer-RequestedInteractionModelHeaders</a></td><td>[MUST]</td><td>LDP servers that successfully create a resource from a RDF representation in the request entity body MUST honor the client's requested interaction model(s). The created resource can be thought of as an RDF named graph [rdf11-concepts]. If any model cannot be honored, the server MUST fail the request.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPublishConstraintsUnknownProp">MemberResource-PublishConstraintsUnknownProp</a></td><td>[MUST]</td><td>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testUseStandardVocabularies">MemberResource-UseStandardVocabularies</a></td><td>[MANUAL, SHOULD]</td><td>LDP-RSs predicates SHOULD use standard vocabularies such as Dublin Core [DC-TERMS], RDF [rdf11-concepts] and RDF Schema [rdf-schema], whenever possible.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testUseStandardVocabularies">BasicContainer-UseStandardVocabularies</a></td><td>[MANUAL, SHOULD]</td><td>LDP-RSs predicates SHOULD use standard vocabularies such as Dublin Core [DC-TERMS], RDF [rdf11-concepts] and RDF Schema [rdf-schema], whenever possible.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testGetResponseHeaders">NonRDFSource-GetResponseHeaders</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPublishConstraintsUnknownProp">BasicContainer-PublishConstraintsUnknownProp</a></td><td>[MUST]</td><td>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostNonRDFSource">NonRDFSource-PostNonRDFSource</a></td><td>[MAY]</td><td>LDP servers may accept an HTTP POST of non-RDF representations (LDP-NRs) for creation of any kind of resource, for example binary resources.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testConditionFailedStatusCode">BasicContainer-ConditionFailedStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictPutReUseUri">BasicContainer-RestrictPutReUseUri</a></td><td>[SHOULD]</td><td>LDP servers that allow LDPR creation via PUT SHOULD NOT re-use URIs. For RDF representations (LDP-RSs),the created resource can be thought of as an RDF named graph [rdf11-concepts].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testResponsePropertiesNotPersisted">MemberResource-ResponsePropertiesNotPersisted</a></td><td>[SHOULD]</td><td>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictClientInference">BasicContainer-RestrictClientInference</a></td><td>[MANUAL, MUST]</td><td>LDP servers MUST NOT require LDP clients to implement inferencing in order to recognize the subset of content defined by LDP. Other specifications built on top of LDP may require clients to implement inferencing [rdf11-concepts]. The practical implication is that all content defined by LDP must be explicitly represented, unless noted otherwise within this document.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceGetBinary">NonRDFSource-PostResourceGetBinary</a></td><td>[MAY]</td><td>LDP servers may host a mixture of LDP-RSs and LDP-NRs. For example, it is common for LDP servers to need to host binary or text resources that do not have useful RDF representations.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPreconditionRequiredStatusCode">NonRDFSource-PreconditionRequiredStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutReplacesResource">MemberResource-PutReplacesResource</a></td><td>[MUST]</td><td>If a HTTP PUT is accepted on an existing resource, LDP servers MUST replace the entire persistent state of the identified resource with the entity representation in the body of the request.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptionsHasSameLinkHeader">NonRDFSource-OptionsHasSameLinkHeader</a></td><td>[MUST]</td><td>When responding to requests whose request-URI is a LDP-NR with anassociated LDP-RS, a LDPC server must provide the same HTTP Link responseheader as is required in the create response</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testPutBadETag">NonRDFSource-PutBadETag</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPreconditionRequiredStatusCode">BasicContainer-PreconditionRequiredStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutSimpleUpdate">MemberResource-PutSimpleUpdate</a></td><td>[MUST]</td><td>LDP servers SHOULD allow clients to update resources without requiring detailed knowledge of server-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testETagHeadersGet">NonRDFSource-ETagHeadersGet</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_test4xxErrorHasResponseBody">MemberResource-4xxErrorHasResponseBody</a></td><td>[SHOULD]</td><td>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPublishConstraintsReadOnlyProp">BasicContainer-PublishConstraintsReadOnlyProp</a></td><td>[MUST]</td><td>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutSimpleUpdate">BasicContainer-PutSimpleUpdate</a></td><td>[MUST]</td><td>LDP servers SHOULD allow clients to update resources without requiring detailed knowledge of server-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutReadOnlyProperties4xxStatus">MemberResource-PutReadOnlyProperties4xxStatus</a></td><td>[MUST]</td><td>If an otherwise valid HTTP PUT request is received that attempts to change properties the server does not allow clients to modify, LDP servers MUST respond with a 4xx range status code (typically 409 Conflict)</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testConditionFailedStatusCode">MemberResource-ConditionFailedStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testIsHttp11Manual">MemberResource-IsHttp11Manual</a></td><td>[MANUAL, MUST]</td><td>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptions">NonRDFSource-Options</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP OPTIONS method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRelativeUriResolutionPut">BasicContainer-RelativeUriResolutionPut</a></td><td>[MUST]</td><td>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPutBadETag">BasicContainer-PutBadETag</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testResponsePropertiesNotPersisted">BasicContainer-ResponsePropertiesNotPersisted</a></td><td>[SHOULD]</td><td>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testRestrictClientInference">MemberResource-RestrictClientInference</a></td><td>[MANUAL, MUST]</td><td>LDP servers MUST NOT require LDP clients to implement inferencing in order to recognize the subset of content defined by LDP. Other specifications built on top of LDP may require clients to implement inferencing [rdf11-concepts]. The practical implication is that all content defined by LDP must be explicitly represented, unless noted otherwise within this document.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutRequiresIfMatch">MemberResource-PutRequiresIfMatch</a></td><td>[SHOULD]</td><td>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPutPropertiesNotPersisted">MemberResource-PutPropertiesNotPersisted</a></td><td>[MUST]</td><td>If an otherwise valid HTTP PUT request is received that contains properties the server chooses not to persist, e.g. unknown content, LDP servers MUST respond with an appropriate 4xx range status code [HTTP11].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testPreconditionRequiredStatusCode">MemberResource-PreconditionRequiredStatusCode</a></td><td>[MUST]</td><td>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testGetResource">NonRDFSource-GetResource</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP GET Method for LDPRs</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.NonRDFSourceTest_testETagHeadersHead">NonRDFSource-ETagHeadersHead</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr></table><br/><p class="totop"><a href="#top">Back to Top</a></p><br/><table class="indented"><tr><th class="Passed"><a id="Passed">Passed Test Cases</a></th><th class="Passed">Groups</th><th class="Passed">Description of Test Method</th></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testContentTypeHeader">BasicContainer-ContentTypeHeader</a></td><td>[SHOULD]</td><td>LDP servers SHOULD use the Content-Type request header to determine the representation format when the request has an entity body.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testHead">BasicContainer-Head</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP HEAD method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptTurtle">BasicContainer-AcceptTurtle</a></td><td>[MUST]</td><td>LDP servers MUST accept a request entity body with a request header of Content-Type with value of text/turtle [turtle].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testETagHeadersGet">MemberResource-ETagHeadersGet</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testJsonLdRepresentation">BasicContainer-JsonLdRepresentation</a></td><td>[MUST]</td><td> LDP servers must respond with a application/ld+json representation of the requested LDP-RS when the request includes an Accept header, unless content negotiation or Turtle support requires a different outcome [JSON-LD].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPostContainer">BasicContainer-PostContainer</a></td><td>[MUST]</td><td>When a successful HTTP POST request to an LDPC results in the creation of an LDPR, a containment triple MUST be added to the state of LDPC.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testDeleteRemovesContainmentTriple">BasicContainer-DeleteRemovesContainmentTriple</a></td><td>[MUST]</td><td>When an LDPR identified by the object of a containment triple is deleted, the LDPC server MUST also remove the LDPR from the containing LDPC by removing the corresponding containment triple.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testGetResource">MemberResource-GetResource</a></td><td>[MUST]</td><td>LDP servers MUST provide an RDF representation for LDP-RSs. The HTTP Request-URI of the LDP-RS is typically the subject of most triples in the response.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testJsonLdRepresentation">MemberResource-JsonLdRepresentation</a></td><td>[MUST]</td><td> LDP servers must respond with a application/ld+json representation of the requested LDP-RS when the request includes an Accept header, unless content negotiation or Turtle support requires a different outcome [JSON-LD].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPostResponseStatusAndLocation">BasicContainer-PostResponseStatusAndLocation</a></td><td>[MUST]</td><td>If the resource was created successfully, LDP servers MUST respond with status code 201 (Created) and the Location header set to the new resource&rsquo;s URL. Clients shall not expect any representation in the response entity body on a 201 (Created) response.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testAcceptPatchHeader">MemberResource-AcceptPatchHeader</a></td><td>[MUST]</td><td>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRdfTypeLdpContainer">BasicContainer-RdfTypeLdpContainer</a></td><td>[MAY]</td><td>The representation of a LDPC MAY have an rdf:type of ldp:Container for Linked Data Platform Container. Non-normative note: LDPCs might have additional types, like any LDP-RS. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testGetResponseHeaders">BasicContainer-GetResponseHeaders</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testGetResourceAsTurtleNoAccept">MemberResource-GetResourceAsTurtleNoAccept</a></td><td>[SHOULD]</td><td>LDP servers should respond with a text/turtle representation of the requested LDP-RS whenever the Accept request header is absent [turtle].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testETagHeadersHead">MemberResource-ETagHeadersHead</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testContainsRdfType">MemberResource-ContainsRdfType</a></td><td>[SHOULD]</td><td>LDP-RSs representations SHOULD have at least one rdf:type set explicitly. This makes the representations much more useful to client applications that don&rsquo;t support inferencing.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPostJsonLd">BasicContainer-PostJsonLd</a></td><td>[MUST]</td><td>LDP servers SHOULD accept a request entity body with a request header of Content-Type with value of application/ld+json [JSON-LD].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testOptions">BasicContainer-Options</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP OPTIONS method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testTypeRdfSource">MemberResource-TypeRdfSource</a></td><td>[MAY]</td><td>The representation of a LDP-RS MAY have an rdf:type of ldp:RDFSource for Linked Data Platform RDF Source.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testGetResourceAsTurtleNoAccept">BasicContainer-GetResourceAsTurtleNoAccept</a></td><td>[SHOULD]</td><td>LDP servers should respond with a text/turtle representation of the requested LDP-RS whenever the Accept request header is absent [turtle].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testNoRdfBagSeqOrList">BasicContainer-NoRdfBagSeqOrList</a></td><td>[SHOULD]</td><td>LDPC representations SHOULD NOT use RDF container types rdf:Bag, rdf:Seq or rdf:List.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testGetResource">BasicContainer-GetResource</a></td><td>[MUST]</td><td>LDP servers MUST provide an RDF representation for LDP-RSs. The HTTP Request-URI of the LDP-RS is typically the subject of most triples in the response.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptPatchHeader">BasicContainer-AcceptPatchHeader</a></td><td>[MUST]</td><td>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testGetResponseHeaders">MemberResource-GetResponseHeaders</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testNullRelativeUriPost">BasicContainer-NullRelativeUriPost</a></td><td>[MUST]</td><td>In RDF representations, LDP servers MUST interpret the null relative URI for the subject of triples in the LDPR representation in the request entity body as referring to the entity in the request body. Commonly, that entity is the model for the &ldquo;to be created&rdquo; LDPR, so triples whose subject is the null relative URI will usually result in triples in the created resource whose subject is the created resource.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testGetResourceAcceptTurtle">MemberResource-GetResourceAcceptTurtle</a></td><td>[MUST]</td><td>LDP servers must respond with a Turtle representation of the requested LDP-RS when the request includes an Accept header specifying text/turtle, unless HTTP content negotiation requires a different outcome [turtle].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testLdpLinkHeader">MemberResource-LdpLinkHeader</a></td><td>[MUST]</td><td>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testContainerSupportsHttpLinkHeader">BasicContainer-ContainerSupportsHttpLinkHeader</a></td><td>[MUST]</td><td>LDP servers exposing LDPCs MUST advertise their LDP support by exposing a HTTP Link header with a target URI matching the type of container (see below) the server supports, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPC's HTTP Request-URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testLdpLinkHeader">BasicContainer-LdpLinkHeader</a></td><td>[MUST]</td><td>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictUriReUseNoSlug">BasicContainer-RestrictUriReUseNoSlug</a></td><td>[SHOULD]</td><td>LDP servers that allow member creation via POST SHOULD NOT re-use URIs.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testETagHeadersHead">BasicContainer-ETagHeadersHead</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testGetResourceAcceptTurtle">BasicContainer-GetResourceAcceptTurtle</a></td><td>[MUST]</td><td>LDP servers must respond with a Turtle representation of the requested LDP-RS when the request includes an Accept header specifying text/turtle, unless HTTP content negotiation requires a different outcome [turtle].</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testCreateWithoutConstraints">BasicContainer-CreateWithoutConstraints</a></td><td>[SHOULD]</td><td>LDP servers SHOULD allow clients to create new resources without requiring detailed knowledge of application-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testHead">MemberResource-Head</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP HEAD method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRelativeUriResolutionPost">BasicContainer-RelativeUriResolutionPost</a></td><td>[MUST]</td><td>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testTypeRdfSource">BasicContainer-TypeRdfSource</a></td><td>[MAY]</td><td>The representation of a LDP-RS MAY have an rdf:type of ldp:RDFSource for Linked Data Platform RDF Source.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testRejectPutModifyingContainmentTriples">BasicContainer-RejectPutModifyingContainmentTriples</a></td><td>[SHOULD]</td><td>LDP servers SHOULD NOT allow HTTP PUT to update an LDPC&rsquo;s containment triples; if the server receives such a request, it SHOULD respond with a 409 (Conflict) status code.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testOptionsAllowHeader">BasicContainer-OptionsAllowHeader</a></td><td>[MUST]</td><td>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testServerHonorsSlug">BasicContainer-ServerHonorsSlug</a></td><td>[MAY]</td><td>LDP servers MAY allow clients to suggest the URI for a resource created through POST, using the HTTP Slug header as defined in [RFC5023]. LDP adds no new requirements to this usage, so its presence functions as a client hint to the server providing a desired string to be incorporated into the server's final choice of resource URI.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testOptions">MemberResource-Options</a></td><td>[MUST]</td><td>LDP servers MUST support the HTTP OPTIONS method. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testContainsRdfType">BasicContainer-ContainsRdfType</a></td><td>[SHOULD]</td><td>LDP-RSs representations SHOULD have at least one rdf:type set explicitly. This makes the representations much more useful to client applications that don&rsquo;t support inferencing.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testOptionsAllowHeader">MemberResource-OptionsAllowHeader</a></td><td>[MUST]</td><td>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testPostNoSlug">BasicContainer-PostNoSlug</a></td><td>[SHOULD]</td><td>LDP servers SHOULD assign the URI for the resource to be created using server application specific rules in the absence of a client hint.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testETagHeadersGet">BasicContainer-ETagHeadersGet</a></td><td>[MUST]</td><td>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptPostResponseHeader">BasicContainer-AcceptPostResponseHeader</a></td><td>[MUST]</td><td>LDP servers that support POST MUST include an Accept-Post response header on HTTP OPTIONS responses, listing post document media type(s) supported by the server.</td></tr></table><br/><p class="totop"><a href="#top">Back to Top</a></p><table class="indented"><tr><th><a id="Indirect">Indirectly Tested Test Cases</a></th><th>Overall Test Result</th><th>Description of Test Method</th></tr><tr><td><a href="#org.w3.ldp.testsuite.test.MemberResourceTest_testConformsRdfSourceLdpResource">MemberResource-ConformsRdfSourceLdpResource</a></td><td class="Passed">Passed</td><td>Each LDP RDF Source MUST also be a conforming LDP Resource as defined in section 4.2 Resource, along with the restrictions in this section.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testConformsContainerRdfResource">BasicContainer-ConformsContainerRdfResource</a></td><td class="Passed">Passed</td><td>Each Linked Data Platform Container MUST also be a conforming Linked Data Platform RDF Source.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testConformsBcLdpContainer">BasicContainer-ConformsBcLdpContainer</a></td><td class="Passed">Passed</td><td>Each LDP Basic Container MUST also be a conforming LDP Container in section 5.2 Container along with the following restrictions in this section.</td></tr><tr><td><a href="#org.w3.ldp.testsuite.test.BasicContainerTest_testConformsRdfSourceLdpResource">BasicContainer-ConformsRdfSourceLdpResource</a></td><td class="Passed">Passed</td><td>Each LDP RDF Source MUST also be a conforming LDP Resource as defined in section 4.2 Resource, along with the restrictions in this section.</td></tr></table><br/><p class="totop"><a href="#top">Back to Top</a></p><h1>Test Method Details</h1><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutToCreate">BasicContainer-PutToCreate</a></h2><table class="indented"><tr class="center"><th class="Failed">[FAILED TEST]</th></tr><tr><td class="throw">java.lang.AssertionError: 1 expectation failed.
Expected status code &lt;201&gt; doesn't match actual status code &lt;405&gt;.

	at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrap.callConstructor(ConstructorSite.java:81)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:57)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:182)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:190)
	at com.jayway.restassured.internal.ResponseSpecificationImpl$HamcrestAssertionClosure.validate(ResponseSpecificationImpl.groovy:577)
	at com.jayway.restassured.internal.ResponseSpecificationImpl$HamcrestAssertionClosure$validate$1.call(Unknown Source)
	at com.jayway.restassured.internal.RequestSpecificationImpl.invokeFilterChain(RequestSpecificationImpl.groovy:927)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:324)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1207)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:807)
	at com.jayway.restassured.internal.RequestSpecificationImpl.invokeMethod(RequestSpecificationImpl.groovy)
	at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)
	at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)
	at com.jayway.restassured.internal.RequestSpecificationImpl.applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy:1347)
	at com.jayway.restassured.internal.RequestSpecificationImpl.this$2$applyPathParamsAndSendRequest(RequestSpecificationImpl.groovy)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:324)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1207)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:807)
	at com.jayway.restassured.internal.RequestSpecificationImpl.invokeMethod(RequestSpecificationImpl.groovy)
	at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)
	at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.callCurrent(PogoInterceptableSite.java:55)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)
	at com.jayway.restassured.internal.RequestSpecificationImpl.put(RequestSpecificationImpl.groovy:159)
	at com.jayway.restassured.internal.RequestSpecificationImpl.put(RequestSpecificationImpl.groovy)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:324)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1207)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:807)
	at com.jayway.restassured.internal.RequestSpecificationImpl.invokeMethod(RequestSpecificationImpl.groovy)
	at org.codehaus.groovy.runtime.callsite.PogoInterceptableSite.call(PogoInterceptableSite.java:45)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)
	at com.jayway.restassured.internal.ResponseSpecificationImpl.put(ResponseSpecificationImpl.groovy:274)
	at com.jayway.restassured.internal.ResponseSpecificationImpl.put(ResponseSpecificationImpl.groovy)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:166)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:56)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
	at com.jayway.restassured.internal.ResponseSpecificationImpl.put(ResponseSpecificationImpl.groovy:301)
	at com.jayway.restassured.internal.ResponseSpecificationImpl.put(ResponseSpecificationImpl.groovy)
	at org.w3.ldp.testsuite.test.CommonContainerTest.putToCreate(CommonContainerTest.java:955)
	at org.w3.ldp.testsuite.test.CommonContainerTest.testPutToCreate(CommonContainerTest.java:64)
	at org.w3.ldp.testsuite.LdpTestSuite.run(LdpTestSuite.java:379)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:415)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:407)
	at org.w3.ldp.testsuite.RunLdpTestSuite.main(RunLdpTestSuite.java:26)
... Removed 44 stack frames</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-create">http://www.w3.org/TR/ldp#ldpr-put-create</a></p><p class="indented"><b>Description: </b>LDP servers MAY choose to allow the creation of new resources using HTTP PUT.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPreferContainmentTriples">BasicContainer-PreferContainmentTriples</a></h2><table class="indented"><tr class="center"><th class="Failed">[FAILED TEST]</th></tr><tr><td class="throw">java.lang.AssertionError: Container has containment triples when minimal container was requested expected [false] but found [true]
	at org.w3.ldp.testsuite.test.CommonContainerTest.testPreferContainmentTriples(CommonContainerTest.java:198)
	at org.w3.ldp.testsuite.LdpTestSuite.run(LdpTestSuite.java:379)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:415)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:407)
	at org.w3.ldp.testsuite.RunLdpTestSuite.main(RunLdpTestSuite.java:26)
... Removed 24 stack frames</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-prefer">http://www.w3.org/TR/ldp#ldpc-prefer</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD respect all of a client's LDP-defined hints, for example which subsets of LDP-defined state the client is interested in processing, to influence the set of triples returned in representations of an LDPC, particularly for large LDPCs. See also [LDP-PAGING].</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPatchMethod">BasicContainer-PatchMethod</a></h2><table class="indented"><tr class="center"><th class="Failed">[FAILED TEST]</th></tr><tr><td class="throw">java.lang.AssertionError: Container &lt;http://localhost:8000&gt; has not advertised PATCH support through its HTTP OPTIONS response. expected [true] but found [false]
	at org.w3.ldp.testsuite.test.CommonContainerTest.testPatchMethod(CommonContainerTest.java:766)
	at org.w3.ldp.testsuite.LdpTestSuite.run(LdpTestSuite.java:379)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:415)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:407)
	at org.w3.ldp.testsuite.RunLdpTestSuite.main(RunLdpTestSuite.java:26)
... Removed 24 stack frames</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-patch-req">http://www.w3.org/TR/ldp#ldpc-patch-req</a></p><p class="indented"><b>Description: </b>LDP servers are RECOMMENDED to support HTTP PATCH as the preferred method for updating an LDPC's empty-container triples. </p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictUriReUseSlug">BasicContainer-RestrictUriReUseSlug</a></h2><table class="indented"><tr class="center"><th class="Failed">[FAILED TEST]</th></tr><tr><td class="throw">java.lang.AssertionError: Server reused URIs for POSTed resources.
	at org.w3.ldp.testsuite.test.CommonContainerTest.testRestrictUriReUse(CommonContainerTest.java:923)
	at org.w3.ldp.testsuite.test.CommonContainerTest.testRestrictUriReUseSlug(CommonContainerTest.java:594)
	at org.w3.ldp.testsuite.LdpTestSuite.run(LdpTestSuite.java:379)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:415)
	at org.w3.ldp.testsuite.LdpTestSuite.executeTestSuite(LdpTestSuite.java:407)
	at org.w3.ldp.testsuite.RunLdpTestSuite.main(RunLdpTestSuite.java:26)
... Removed 23 stack frames</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testRestrictUriReUseNoSlug covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-dontreuseuris">http://www.w3.org/TR/ldp#ldpc-post-dontreuseuris</a></p><p class="indented"><b>Description: </b>LDP servers that allow member creation via POST SHOULD NOT re-use URIs.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPublishConstraintsReadOnlyProp">MemberResource-PublishConstraintsReadOnlyProp</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPublishConstraintsUnknownProp covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs">http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs</a></p><p class="indented"><b>Description: </b>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testRelativeUriResolutionPut">MemberResource-RelativeUriResolutionPut</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri">http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri</a></p><p class="indented"><b>Description: </b>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testDeleteNonRDFSourceDeletesAssociatedResource">NonRDFSource-DeleteNonRDFSourceDeletesAssociatedResource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-del-contremovescontres">http://www.w3.org/TR/ldp#ldpc-del-contremovescontres</a></p><p class="indented"><b>Description: </b>When a contained LDPR is deleted, and the LDPC server created anassociated LDP-RS (see the LDPC POST section), the LDPC server must alsodelete the associated LDP-RS it created.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testIsHttp11Manual">BasicContainer-IsHttp11Manual</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testIsHttp11Server covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-http">http://www.w3.org/TR/ldp#ldpr-gen-http</a></p><p class="indented"><b>Description: </b>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</p><p class="indented"><b>Requirement Level: </b>MANUAL MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndGetFromContainer">NonRDFSource-PostResourceAndGetFromContainer</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPostNonRDFSource covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createbins">http://www.w3.org/TR/ldp#ldpc-post-createbins</a></p><p class="indented"><b>Description: </b>LDP servers may accept an HTTP POST of non-RDF representations (LDP-NRs) for creation of any kind of resource, for example binary resources.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_test4xxErrorHasResponseBody">BasicContainer-4xxErrorHasResponseBody</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutReadOnlyProperties4xxStatus covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops">http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndCheckAssociatedResource">NonRDFSource-PostResourceAndCheckAssociatedResource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createbinlinkmetahdr">http://www.w3.org/TR/ldp#ldpc-post-createbinlinkmetahdr</a></p><p class="indented"><b>Description: </b>Upon successful creation of an LDP-NR (HTTP status code of 201-Created and URI indicated by Location response header), LDP servers may create an associated LDP-RS to contain data about the newly created LDP-NR. If a LDP server creates this associated LDP-RS it must indicate its location on the HTTP response using the HTTP Link response header with link relation describedby and href to be the URI of the associated LDP-RS resource.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testIsHttp11Manual">NonRDFSource-IsHttp11Manual</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testIsHttp11Server covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-http">http://www.w3.org/TR/ldp#ldpr-gen-http</a></p><p class="indented"><b>Description: </b>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</p><p class="indented"><b>Requirement Level: </b>MANUAL MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testReUseVocabularies">MemberResource-ReUseVocabularies</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testReUseVocabularies</p><ul><li>Given a URL for a RDF Source, perform a GET using an RDF content type</li><li>Inspect the content to ensure standard terms are used.  For example, if things like ex:label or ex:title are used, instead of DCTERMS or RDFS, then the test should fail.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-reusevocab">http://www.w3.org/TR/ldp#ldprs-gen-reusevocab</a></p><p class="indented"><b>Description: </b>LDP-RSs SHOULD reuse existing vocabularies instead of creating their own duplicate vocabulary terms. In addition to this general rule, some specific cases are covered by other conformance rules.</p><p class="indented"><b>Requirement Level: </b>MANUAL SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutBadETag">MemberResource-PutBadETag</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testAcceptPatchHeader">NonRDFSource-AcceptPatchHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch">http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch</a></p><p class="indented"><b>Description: </b>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptionsAllowHeader">NonRDFSource-OptionsAllowHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-allow">http://www.w3.org/TR/ldp#ldpr-options-allow</a></p><p class="indented"><b>Description: </b>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutReplacesResource">BasicContainer-PutReplacesResource</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-replaceall">http://www.w3.org/TR/ldp#ldpr-put-replaceall</a></p><p class="indented"><b>Description: </b>If a HTTP PUT is accepted on an existing resource, LDP servers MUST replace the entire persistent state of the identified resource with the entity representation in the body of the request.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testConditionFailedStatusCode">NonRDFSource-ConditionFailedStatusCode</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutBadETag, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPutRequiresIfMatch">NonRDFSource-PutRequiresIfMatch</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutBadETag covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testLdpLinkHeader">NonRDFSource-LdpLinkHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr">http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr</a></p><p class="indented"><b>Description: </b>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testConformsRdfSourceLdpResource">MemberResource-ConformsRdfSourceLdpResource</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Covered indirectly by the MUST tests defined in CommonResourceTest class</td></tr></table><p><b>Test Case is covered Indirectly by the following:</b></p><ul><li><b>CommonResource-GetResource</b> - [Test Passed]</li><li><b>CommonResource-Head</b> - [Test Passed]</li><li><b>CommonResource-IsHttp11Manual</b> - [Test Skipped]</li><li><b>CommonResource-ETagHeadersGet</b> - [Test Passed]</li><li><b>CommonResource-ETagHeadersHead</b> - [Test Passed]</li><li><b>CommonResource-LdpLinkHeader</b> - [Test Passed]</li><li><b>CommonResource-GetResponseHeaders</b> - [Test Passed]</li><li><b>CommonResource-ConditionFailedStatusCode</b> - [Test Skipped]</li><li><b>CommonResource-PreconditionRequiredStatusCode</b> - [Test Skipped]</li><li><b>CommonResource-PutBadETag</b> - [Test Skipped]</li><li><b>CommonResource-AcceptPatchHeader</b> - [Test Passed]</li><li><b>CommonResource-Options</b> - [Test Passed]</li><li><b>CommonResource-OptionsAllowHeader</b> - [Test Passed]</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-are-ldpr">http://www.w3.org/TR/ldp#ldprs-are-ldpr</a></p><p class="indented"><b>Description: </b>Each LDP RDF Source MUST also be a conforming LDP Resource as defined in section 4.2 Resource, along with the restrictions in this section.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutRequiresIfMatch">BasicContainer-PutRequiresIfMatch</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutBadETag covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceAndCheckLink">NonRDFSource-PostResourceAndCheckLink</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpnr-type">http://www.w3.org/TR/ldp#ldpnr-type</a></p><p class="indented"><b>Description: </b>LDP servers exposing an LDP Non-RDF Source may advertise this by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#NonRDFSource, and a link relation type of type (that is, rel='type') in responses to requests made to the LDP-NR's HTTP Request-URI.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testHead">NonRDFSource-Head</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-head-must">http://www.w3.org/TR/ldp#ldpr-head-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP HEAD method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testReUseVocabularies">BasicContainer-ReUseVocabularies</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testReUseVocabularies</p><ul><li>Given a URL for a RDF Source, perform a GET using an RDF content type</li><li>Inspect the content to ensure standard terms are used.  For example, if things like ex:label or ex:title are used, instead of DCTERMS or RDFS, then the test should fail.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-reusevocab">http://www.w3.org/TR/ldp#ldprs-gen-reusevocab</a></p><p class="indented"><b>Description: </b>LDP-RSs SHOULD reuse existing vocabularies instead of creating their own duplicate vocabulary terms. In addition to this general rule, some specific cases are covered by other conformance rules.</p><p class="indented"><b>Requirement Level: </b>MANUAL SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutReadOnlyProperties4xxStatus">BasicContainer-PutReadOnlyProperties4xxStatus</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. test4xxErrorHasResponseBody covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops">http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops</a></p><p class="indented"><b>Description: </b>If an otherwise valid HTTP PUT request is received that attempts to change properties the server does not allow clients to modify, LDP servers MUST respond with a 4xx range status code (typically 409 Conflict)</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutPropertiesNotPersisted">BasicContainer-PutPropertiesNotPersisted</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testResponsePropertiesNotPersisted covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-failed">http://www.w3.org/TR/ldp#ldprs-put-failed</a></p><p class="indented"><b>Description: </b>If an otherwise valid HTTP PUT request is received that contains properties the server chooses not to persist, e.g. unknown content, LDP servers MUST respond with an appropriate 4xx range status code [HTTP11].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceGetMetadataAndBinary">NonRDFSource-PostResourceGetMetadataAndBinary</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpnr-are-ldpr">http://www.w3.org/TR/ldp#ldpnr-are-ldpr</a></p><p class="indented"><b>Description: </b>Each LDP Non-RDF Source must also be a conforming LDP Resource. LDP Non-RDF Sources may not be able to fully express their state using RDF.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRequestedInteractionModelCreateNotAllowed">BasicContainer-RequestedInteractionModelCreateNotAllowed</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>containerAsResource is null</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testRequestedInteractionModelHeaders covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createrdf">http://www.w3.org/TR/ldp#ldpc-post-createrdf</a></p><p class="indented"><b>Description: </b>LDP servers that successfully create a resource from a RDF representation in the request entity body MUST honor the client's requested interaction model(s). The created resource can be thought of as an RDF named graph [rdf11-concepts]. If any model cannot be honored, the server MUST fail the request.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRequestedInteractionModelHeaders">BasicContainer-RequestedInteractionModelHeaders</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>containerAsResource is null</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testRequestedInteractionModelCreateNotAllowed covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createrdf">http://www.w3.org/TR/ldp#ldpc-post-createrdf</a></p><p class="indented"><b>Description: </b>LDP servers that successfully create a resource from a RDF representation in the request entity body MUST honor the client's requested interaction model(s). The created resource can be thought of as an RDF named graph [rdf11-concepts]. If any model cannot be honored, the server MUST fail the request.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPublishConstraintsUnknownProp">MemberResource-PublishConstraintsUnknownProp</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPublishConstraintsReadOnlyProp covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs">http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs</a></p><p class="indented"><b>Description: </b>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testUseStandardVocabularies">MemberResource-UseStandardVocabularies</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testUseStandardVocabularies</p><ul><li>Given a URL for a RDF Source, perform a GET using an RDF content type</li><li>Inspect the content to ensure standard terms are used.  For example, if things like ex:label or ex:title are used, instead of DCTERMS or RDFS, then the test should fail.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-reusevocabsuchas">http://www.w3.org/TR/ldp#ldprs-gen-reusevocabsuchas</a></p><p class="indented"><b>Description: </b>LDP-RSs predicates SHOULD use standard vocabularies such as Dublin Core [DC-TERMS], RDF [rdf11-concepts] and RDF Schema [rdf-schema], whenever possible.</p><p class="indented"><b>Requirement Level: </b>MANUAL SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testUseStandardVocabularies">BasicContainer-UseStandardVocabularies</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testUseStandardVocabularies</p><ul><li>Given a URL for a RDF Source, perform a GET using an RDF content type</li><li>Inspect the content to ensure standard terms are used.  For example, if things like ex:label or ex:title are used, instead of DCTERMS or RDFS, then the test should fail.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-reusevocabsuchas">http://www.w3.org/TR/ldp#ldprs-gen-reusevocabsuchas</a></p><p class="indented"><b>Description: </b>LDP-RSs predicates SHOULD use standard vocabularies such as Dublin Core [DC-TERMS], RDF [rdf11-concepts] and RDF Schema [rdf-schema], whenever possible.</p><p class="indented"><b>Requirement Level: </b>MANUAL SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testGetResponseHeaders">NonRDFSource-GetResponseHeaders</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-get-options">http://www.w3.org/TR/ldp#ldpr-get-options</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testConformsContainerRdfResource">BasicContainer-ConformsContainerRdfResource</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Covered indirectly by the MUST tests defined in RdfSourceTest class</td></tr></table><p><b>Test Case is covered Indirectly by the following:</b></p><ul><li><b>RdfSource-RelativeUriResolutionPut</b> - [Test Skipped]</li><li><b>RdfSource-PutReplacesResource</b> - [Test Skipped]</li><li><b>RdfSource-PutSimpleUpdate</b> - [Test Skipped]</li><li><b>RdfSource-GetResource</b> - [Test Passed]</li><li><b>RdfSource-RestrictClientInference</b> - [Test Skipped]</li><li><b>RdfSource-GetResourceAcceptTurtle</b> - [Test Passed]</li><li><b>RdfSource-JsonLdRepresentation</b> - [Test Passed]</li><li><b>RdfSource-PublishConstraintsReadOnlyProp</b> - [Test Skipped]</li><li><b>RdfSource-PublishConstraintsUnknownProp</b> - [Test Skipped]</li><li><b>RdfSource-PutReadOnlyProperties4xxStatus</b> - [Test Skipped]</li><li><b>RdfSource-PutPropertiesNotPersisted</b> - [Test Skipped]</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-isldpr">http://www.w3.org/TR/ldp#ldpc-isldpr</a></p><p class="indented"><b>Description: </b>Each Linked Data Platform Container MUST also be a conforming Linked Data Platform RDF Source.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPublishConstraintsUnknownProp">BasicContainer-PublishConstraintsUnknownProp</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPublishConstraintsReadOnlyProp covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs">http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs</a></p><p class="indented"><b>Description: </b>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostNonRDFSource">NonRDFSource-PostNonRDFSource</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPostResourceAndGetFromContainer covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createbins">http://www.w3.org/TR/ldp#ldpc-post-createbins</a></p><p class="indented"><b>Description: </b>LDP servers may accept an HTTP POST of non-RDF representations (LDP-NRs) for creation of any kind of resource, for example binary resources.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testConditionFailedStatusCode">BasicContainer-ConditionFailedStatusCode</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutBadETag, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictPutReUseUri">BasicContainer-RestrictPutReUseUri</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-put-create">http://www.w3.org/TR/ldp#ldpc-put-create</a></p><p class="indented"><b>Description: </b>LDP servers that allow LDPR creation via PUT SHOULD NOT re-use URIs. For RDF representations (LDP-RSs),the created resource can be thought of as an RDF named graph [rdf11-concepts].</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testResponsePropertiesNotPersisted">MemberResource-ResponsePropertiesNotPersisted</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutPropertiesNotPersisted covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-failed">http://www.w3.org/TR/ldp#ldprs-put-failed</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictClientInference">BasicContainer-RestrictClientInference</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testRestrictClientInference</p><ul><li>Perform a GET on a URL for the reource requesting an RDF content type</li><li>Inspect the results (both headers and content) for missing terms.  Additionally could run an inferencing tool and compare results, seeing if needed informationshould have been explicitly listed by the server.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-noinferencing">http://www.w3.org/TR/ldp#ldprs-gen-noinferencing</a></p><p class="indented"><b>Description: </b>LDP servers MUST NOT require LDP clients to implement inferencing in order to recognize the subset of content defined by LDP. Other specifications built on top of LDP may require clients to implement inferencing [rdf11-concepts]. The practical implication is that all content defined by LDP must be explicitly represented, unless noted otherwise within this document.</p><p class="indented"><b>Requirement Level: </b>MANUAL MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPostResourceGetBinary">NonRDFSource-PostResourceGetBinary</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-binary">http://www.w3.org/TR/ldp#ldpr-gen-binary</a></p><p class="indented"><b>Description: </b>LDP servers may host a mixture of LDP-RSs and LDP-NRs. For example, it is common for LDP servers to need to host binary or text resources that do not have useful RDF representations.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPreconditionRequiredStatusCode">NonRDFSource-PreconditionRequiredStatusCode</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode,  testPutBadETagand testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutReplacesResource">MemberResource-PutReplacesResource</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-replaceall">http://www.w3.org/TR/ldp#ldpr-put-replaceall</a></p><p class="indented"><b>Description: </b>If a HTTP PUT is accepted on an existing resource, LDP servers MUST replace the entire persistent state of the identified resource with the entity representation in the body of the request.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testConformsBcLdpContainer">BasicContainer-ConformsBcLdpContainer</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Covered indirectly by the MUST tests defined in CommonContainerTest class</td></tr></table><p><b>Test Case is covered Indirectly by the following:</b></p><ul><li><b>CommonContainer-PostContainer</b> - [Test Passed]</li><li><b>CommonContainer-RequestedInteractionModelCreateNotAllowed</b> - [Test Skipped]</li><li><b>CommonContainer-RequestedInteractionModelHeaders</b> - [Test Skipped]</li><li><b>CommonContainer-AcceptTurtle</b> - [Test Passed]</li><li><b>CommonContainer-NullRelativeUriPost</b> - [Test Passed]</li><li><b>CommonContainer-AcceptPostResponseHeader</b> - [Test Passed]</li><li><b>CommonContainer-DeleteRemovesContainmentTriple</b> - [Test Passed]</li><li><b>CommonContainer-PostJsonLd</b> - [Test Passed]</li><li><b>CommonContainer-RelativeUriResolutionPost</b> - [Test Passed]</li><li><b>CommonContainer-PostResponseStatusAndLocation</b> - [Test Passed]</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpbc-are-ldpcs">http://www.w3.org/TR/ldp#ldpbc-are-ldpcs</a></p><p class="indented"><b>Description: </b>Each LDP Basic Container MUST also be a conforming LDP Container in section 5.2 Container along with the following restrictions in this section.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptionsHasSameLinkHeader">NonRDFSource-OptionsHasSameLinkHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-options-linkmetahdr">http://www.w3.org/TR/ldp#ldpc-options-linkmetahdr</a></p><p class="indented"><b>Description: </b>When responding to requests whose request-URI is a LDP-NR with anassociated LDP-RS, a LDPC server must provide the same HTTP Link responseheader as is required in the create response</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testPutBadETag">NonRDFSource-PutBadETag</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPreconditionRequiredStatusCode">BasicContainer-PreconditionRequiredStatusCode</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode,  testPutBadETagand testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutSimpleUpdate">MemberResource-PutSimpleUpdate</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-simpleupdate">http://www.w3.org/TR/ldp#ldpr-put-simpleupdate</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD allow clients to update resources without requiring detailed knowledge of server-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testETagHeadersGet">NonRDFSource-ETagHeadersGet</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersHead covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_test4xxErrorHasResponseBody">MemberResource-4xxErrorHasResponseBody</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutReadOnlyProperties4xxStatus covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops">http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testConformsRdfSourceLdpResource">BasicContainer-ConformsRdfSourceLdpResource</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Covered indirectly by the MUST tests defined in CommonResourceTest class</td></tr></table><p><b>Test Case is covered Indirectly by the following:</b></p><ul><li><b>CommonResource-GetResource</b> - [Test Passed]</li><li><b>CommonResource-Head</b> - [Test Passed]</li><li><b>CommonResource-IsHttp11Manual</b> - [Test Skipped]</li><li><b>CommonResource-ETagHeadersGet</b> - [Test Passed]</li><li><b>CommonResource-ETagHeadersHead</b> - [Test Passed]</li><li><b>CommonResource-LdpLinkHeader</b> - [Test Passed]</li><li><b>CommonResource-GetResponseHeaders</b> - [Test Passed]</li><li><b>CommonResource-ConditionFailedStatusCode</b> - [Test Skipped]</li><li><b>CommonResource-PreconditionRequiredStatusCode</b> - [Test Skipped]</li><li><b>CommonResource-PutBadETag</b> - [Test Skipped]</li><li><b>CommonResource-AcceptPatchHeader</b> - [Test Passed]</li><li><b>CommonResource-Options</b> - [Test Passed]</li><li><b>CommonResource-OptionsAllowHeader</b> - [Test Passed]</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-are-ldpr">http://www.w3.org/TR/ldp#ldprs-are-ldpr</a></p><p class="indented"><b>Description: </b>Each LDP RDF Source MUST also be a conforming LDP Resource as defined in section 4.2 Resource, along with the restrictions in this section.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPublishConstraintsReadOnlyProp">BasicContainer-PublishConstraintsReadOnlyProp</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPublishConstraintsUnknownProp covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs">http://www.w3.org/TR/ldp#ldpr-gen-pubclireqs</a></p><p class="indented"><b>Description: </b>LDP servers MUST publish any constraints on LDP clients&rsquo; ability to create or update LDPRs, by adding a Link header with rel='http://www.w3.org/ns/ldp#constrainedBy' [RFC5988] to all responses to requests which fail due to violation of those constraints.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutSimpleUpdate">BasicContainer-PutSimpleUpdate</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-simpleupdate">http://www.w3.org/TR/ldp#ldpr-put-simpleupdate</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD allow clients to update resources without requiring detailed knowledge of server-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutReadOnlyProperties4xxStatus">MemberResource-PutReadOnlyProperties4xxStatus</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. test4xxErrorHasResponseBody covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops">http://www.w3.org/TR/ldp#ldprs-put-servermanagedprops</a></p><p class="indented"><b>Description: </b>If an otherwise valid HTTP PUT request is received that attempts to change properties the server does not allow clients to modify, LDP servers MUST respond with a 4xx range status code (typically 409 Conflict)</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testConditionFailedStatusCode">MemberResource-ConditionFailedStatusCode</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutBadETag, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testIsHttp11Manual">MemberResource-IsHttp11Manual</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testIsHttp11Server covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-http">http://www.w3.org/TR/ldp#ldpr-gen-http</a></p><p class="indented"><b>Description: </b>LDP servers MUST at least be HTTP/1.1 conformant servers [HTTP11].</p><p class="indented"><b>Requirement Level: </b>MANUAL MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testOptions">NonRDFSource-Options</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-must">http://www.w3.org/TR/ldp#ldpr-options-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP OPTIONS method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRelativeUriResolutionPut">BasicContainer-RelativeUriResolutionPut</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="indented"><b>Parameters: </b></p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri">http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri</a></p><p class="indented"><b>Description: </b>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPutBadETag">BasicContainer-PutBadETag</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testResponsePropertiesNotPersisted">BasicContainer-ResponsePropertiesNotPersisted</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testPutPropertiesNotPersisted covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-failed">http://www.w3.org/TR/ldp#ldprs-put-failed</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD provide a corresponding response body containing information about which properties could not be persisted. The format of the 4xx response body is not constrained by LDP. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testRestrictClientInference">MemberResource-RestrictClientInference</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>This requirement or recommendation must be tested manually. It is difficult or impossible to write automated tests for and is not part of the testsuite.</td></tr></table><p>How to Run testRestrictClientInference</p><ul><li>Perform a GET on a URL for the reource requesting an RDF content type</li><li>Inspect the results (both headers and content) for missing terms.  Additionally could run an inferencing tool and compare results, seeing if needed informationshould have been explicitly listed by the server.</li></ul><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-noinferencing">http://www.w3.org/TR/ldp#ldprs-gen-noinferencing</a></p><p class="indented"><b>Description: </b>LDP servers MUST NOT require LDP clients to implement inferencing in order to recognize the subset of content defined by LDP. Other specifications built on top of LDP may require clients to implement inferencing [rdf11-concepts]. The practical implication is that all content defined by LDP must be explicitly represented, unless noted otherwise within this document.</p><p class="indented"><b>Requirement Level: </b>MANUAL MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutRequiresIfMatch">MemberResource-PutRequiresIfMatch</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode, testPreconditionRequiredStatusCode and testPutBadETag covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP clients SHOULD use the HTTP If-Match header and HTTP ETags to ensure it isn&rsquo;t modifying a resource that has changed since the client last retrieved its representation. LDP servers SHOULD require the HTTP If-Match header and HTTP ETags to detect collisions.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPutPropertiesNotPersisted">MemberResource-PutPropertiesNotPersisted</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testResponsePropertiesNotPersisted covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-put-failed">http://www.w3.org/TR/ldp#ldprs-put-failed</a></p><p class="indented"><b>Description: </b>If an otherwise valid HTTP PUT request is received that contains properties the server chooses not to persist, e.g. unknown content, LDP servers MUST respond with an appropriate 4xx range status code [HTTP11].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testPreconditionRequiredStatusCode">MemberResource-PreconditionRequiredStatusCode</a></h2><table class="indented"><tr class="center"><th class="Skipped">[SKIPPED TEST]</th></tr><tr><td>Skipping test since &lt;http://localhost:8000/c0d6a3d9-cffe-4cf3-a60d-cb9d27ac84e9&gt; has not advertised PUT support through its HTTP OPTIONS response. This HTTP method is needed for this test.</td></tr></table><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testConditionFailedStatusCode,  testPutBadETagand testPutRequiresIfMatch covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-put-precond">http://www.w3.org/TR/ldp#ldpr-put-precond</a></p><p class="indented"><b>Description: </b>LDP servers MUST respond with status code 412 (Condition Failed) if ETags fail to match when there are no other errors with the request [HTTP11]. LDP servers that require conditional requests MUST respond with status code 428 (Precondition Required) when the absence of a precondition is the only reason for rejecting the request [RFC6585].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testGetResource">NonRDFSource-GetResource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-get-must">http://www.w3.org/TR/ldp#ldpr-get-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP GET Method for LDPRs</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.NonRDFSourceTest_testETagHeadersHead">NonRDFSource-ETagHeadersHead</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersGet covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testContentTypeHeader">BasicContainer-ContentTypeHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-contenttype">http://www.w3.org/TR/ldp#ldpc-post-contenttype</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD use the Content-Type request header to determine the representation format when the request has an entity body.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testHead">BasicContainer-Head</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-head-must">http://www.w3.org/TR/ldp#ldpr-head-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP HEAD method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptTurtle">BasicContainer-AcceptTurtle</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-turtle">http://www.w3.org/TR/ldp#ldpc-post-turtle</a></p><p class="indented"><b>Description: </b>LDP servers MUST accept a request entity body with a request header of Content-Type with value of text/turtle [turtle].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testETagHeadersGet">MemberResource-ETagHeadersGet</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersHead covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testJsonLdRepresentation">BasicContainer-JsonLdRepresentation</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-jsonld">http://www.w3.org/TR/ldp#ldprs-get-jsonld</a></p><p class="indented"><b>Description: </b> LDP servers must respond with a application/ld+json representation of the requested LDP-RS when the request includes an Accept header, unless content negotiation or Turtle support requires a different outcome [JSON-LD].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPostContainer">BasicContainer-PostContainer</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-createdmbr-contains">http://www.w3.org/TR/ldp#ldpc-post-createdmbr-contains</a></p><p class="indented"><b>Description: </b>When a successful HTTP POST request to an LDPC results in the creation of an LDPR, a containment triple MUST be added to the state of LDPC.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testDeleteRemovesContainmentTriple">BasicContainer-DeleteRemovesContainmentTriple</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-del-contremovesconttriple">http://www.w3.org/TR/ldp#ldpc-del-contremovesconttriple</a></p><p class="indented"><b>Description: </b>When an LDPR identified by the object of a containment triple is deleted, the LDPC server MUST also remove the LDPR from the containing LDPC by removing the corresponding containment triple.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testGetResource">MemberResource-GetResource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-rdf">http://www.w3.org/TR/ldp#ldprs-gen-rdf</a></p><p class="indented"><b>Description: </b>LDP servers MUST provide an RDF representation for LDP-RSs. The HTTP Request-URI of the LDP-RS is typically the subject of most triples in the response.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testJsonLdRepresentation">MemberResource-JsonLdRepresentation</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-jsonld">http://www.w3.org/TR/ldp#ldprs-get-jsonld</a></p><p class="indented"><b>Description: </b> LDP servers must respond with a application/ld+json representation of the requested LDP-RS when the request includes an Accept header, unless content negotiation or Turtle support requires a different outcome [JSON-LD].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPostResponseStatusAndLocation">BasicContainer-PostResponseStatusAndLocation</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-created201">http://www.w3.org/TR/ldp#ldpc-post-created201</a></p><p class="indented"><b>Description: </b>If the resource was created successfully, LDP servers MUST respond with status code 201 (Created) and the Location header set to the new resource&rsquo;s URL. Clients shall not expect any representation in the response entity body on a 201 (Created) response.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testAcceptPatchHeader">MemberResource-AcceptPatchHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch">http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch</a></p><p class="indented"><b>Description: </b>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRdfTypeLdpContainer">BasicContainer-RdfTypeLdpContainer</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-typecontainer">http://www.w3.org/TR/ldp#ldpc-typecontainer</a></p><p class="indented"><b>Description: </b>The representation of a LDPC MAY have an rdf:type of ldp:Container for Linked Data Platform Container. Non-normative note: LDPCs might have additional types, like any LDP-RS. </p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testGetResponseHeaders">BasicContainer-GetResponseHeaders</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-get-options">http://www.w3.org/TR/ldp#ldpr-get-options</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testGetResourceAsTurtleNoAccept">MemberResource-GetResourceAsTurtleNoAccept</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-conneg">http://www.w3.org/TR/ldp#ldprs-get-conneg</a></p><p class="indented"><b>Description: </b>LDP servers should respond with a text/turtle representation of the requested LDP-RS whenever the Accept request header is absent [turtle].</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testETagHeadersHead">MemberResource-ETagHeadersHead</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersGet covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testContainsRdfType">MemberResource-ContainsRdfType</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-atleast1rdftype">http://www.w3.org/TR/ldp#ldprs-gen-atleast1rdftype</a></p><p class="indented"><b>Description: </b>LDP-RSs representations SHOULD have at least one rdf:type set explicitly. This makes the representations much more useful to client applications that don&rsquo;t support inferencing.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPostJsonLd">BasicContainer-PostJsonLd</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-jsonld">http://www.w3.org/TR/ldp#ldpc-post-jsonld</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD accept a request entity body with a request header of Content-Type with value of application/ld+json [JSON-LD].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testOptions">BasicContainer-Options</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-must">http://www.w3.org/TR/ldp#ldpr-options-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP OPTIONS method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testTypeRdfSource">MemberResource-TypeRdfSource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-rdftype">http://www.w3.org/TR/ldp#ldprs-rdftype</a></p><p class="indented"><b>Description: </b>The representation of a LDP-RS MAY have an rdf:type of ldp:RDFSource for Linked Data Platform RDF Source.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testGetResourceAsTurtleNoAccept">BasicContainer-GetResourceAsTurtleNoAccept</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-conneg">http://www.w3.org/TR/ldp#ldprs-get-conneg</a></p><p class="indented"><b>Description: </b>LDP servers should respond with a text/turtle representation of the requested LDP-RS whenever the Accept request header is absent [turtle].</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testNoRdfBagSeqOrList">BasicContainer-NoRdfBagSeqOrList</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-nordfcontainertypes">http://www.w3.org/TR/ldp#ldpc-nordfcontainertypes</a></p><p class="indented"><b>Description: </b>LDPC representations SHOULD NOT use RDF container types rdf:Bag, rdf:Seq or rdf:List.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testGetResource">BasicContainer-GetResource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-rdf">http://www.w3.org/TR/ldp#ldprs-gen-rdf</a></p><p class="indented"><b>Description: </b>LDP servers MUST provide an RDF representation for LDP-RSs. The HTTP Request-URI of the LDP-RS is typically the subject of most triples in the response.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptPatchHeader">BasicContainer-AcceptPatchHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch">http://www.w3.org/TR/ldp#ldpr-patch-acceptpatch</a></p><p class="indented"><b>Description: </b>LDP servers that support PATCH MUST include an Accept-Patch HTTP response header [RFC5789] on HTTP OPTIONS requests, listing patch document media type(s) supported by the server. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testGetResponseHeaders">MemberResource-GetResponseHeaders</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-get-options">http://www.w3.org/TR/ldp#ldpr-get-options</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP response headers defined in section 4.2.8 HTTP OPTIONS. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testNullRelativeUriPost">BasicContainer-NullRelativeUriPost</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-rdfnullrel">http://www.w3.org/TR/ldp#ldpc-post-rdfnullrel</a></p><p class="indented"><b>Description: </b>In RDF representations, LDP servers MUST interpret the null relative URI for the subject of triples in the LDPR representation in the request entity body as referring to the entity in the request body. Commonly, that entity is the model for the &ldquo;to be created&rdquo; LDPR, so triples whose subject is the null relative URI will usually result in triples in the created resource whose subject is the created resource.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testGetResourceAcceptTurtle">MemberResource-GetResourceAcceptTurtle</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-turtle">http://www.w3.org/TR/ldp#ldprs-get-turtle</a></p><p class="indented"><b>Description: </b>LDP servers must respond with a Turtle representation of the requested LDP-RS when the request includes an Accept header specifying text/turtle, unless HTTP content negotiation requires a different outcome [turtle].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testLdpLinkHeader">MemberResource-LdpLinkHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr">http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr</a></p><p class="indented"><b>Description: </b>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testContainerSupportsHttpLinkHeader">BasicContainer-ContainerSupportsHttpLinkHeader</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. DirectContainerTest.testHttpLinkHeader and IndirectContainerTest.testContainerSupportsHttpLinkHeader covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-linktypehdr">http://www.w3.org/TR/ldp#ldpc-linktypehdr</a></p><p class="indented"><b>Description: </b>LDP servers exposing LDPCs MUST advertise their LDP support by exposing a HTTP Link header with a target URI matching the type of container (see below) the server supports, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPC's HTTP Request-URI.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testLdpLinkHeader">BasicContainer-LdpLinkHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr">http://www.w3.org/TR/ldp#ldpr-gen-linktypehdr</a></p><p class="indented"><b>Description: </b>LDP servers exposing LDPRs MUST advertise their LDP support by exposing a HTTP Link header with a target URI of http://www.w3.org/ns/ldp#Resource, and a link relation type of type (that is, rel='type') in all responses to requests made to the LDPR's HTTP Request-URI.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRestrictUriReUseNoSlug">BasicContainer-RestrictUriReUseNoSlug</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testRestrictUriReUseSlug covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-dontreuseuris">http://www.w3.org/TR/ldp#ldpc-post-dontreuseuris</a></p><p class="indented"><b>Description: </b>LDP servers that allow member creation via POST SHOULD NOT re-use URIs.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testETagHeadersHead">BasicContainer-ETagHeadersHead</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersGet covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testGetResourceAcceptTurtle">BasicContainer-GetResourceAcceptTurtle</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-get-turtle">http://www.w3.org/TR/ldp#ldprs-get-turtle</a></p><p class="indented"><b>Description: </b>LDP servers must respond with a Turtle representation of the requested LDP-RS when the request includes an Accept header specifying text/turtle, unless HTTP content negotiation requires a different outcome [turtle].</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testCreateWithoutConstraints">BasicContainer-CreateWithoutConstraints</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-mincontraints">http://www.w3.org/TR/ldp#ldpc-post-mincontraints</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD allow clients to create new resources without requiring detailed knowledge of application-specific constraints. This is a consequence of the requirement to enable simple creation and modification of LDPRs. LDP servers expose these application-specific constraints as described in section 4.2.1 General.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testHead">MemberResource-Head</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-head-must">http://www.w3.org/TR/ldp#ldpr-head-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP HEAD method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRelativeUriResolutionPost">BasicContainer-RelativeUriResolutionPost</a></h2><p class="indented"><b>Parameters: </b></p><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. </p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri">http://www.w3.org/TR/ldp#ldpr-gen-defbaseuri</a></p><p class="indented"><b>Description: </b>LDP servers MUST assign the default base-URI for [RFC3987] relative-URI resolution to be the HTTP Request-URI when the resource already exists, and to the URI of the created resource when the request results in the creation of a new resource.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testTypeRdfSource">BasicContainer-TypeRdfSource</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-rdftype">http://www.w3.org/TR/ldp#ldprs-rdftype</a></p><p class="indented"><b>Description: </b>The representation of a LDP-RS MAY have an rdf:type of ldp:RDFSource for Linked Data Platform RDF Source.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testRejectPutModifyingContainmentTriples">BasicContainer-RejectPutModifyingContainmentTriples</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-put-mbrprops">http://www.w3.org/TR/ldp#ldpc-put-mbrprops</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD NOT allow HTTP PUT to update an LDPC&rsquo;s containment triples; if the server receives such a request, it SHOULD respond with a 409 (Conflict) status code.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testOptionsAllowHeader">BasicContainer-OptionsAllowHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-allow">http://www.w3.org/TR/ldp#ldpr-options-allow</a></p><p class="indented"><b>Description: </b>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testServerHonorsSlug">BasicContainer-ServerHonorsSlug</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-slug">http://www.w3.org/TR/ldp#ldpc-post-slug</a></p><p class="indented"><b>Description: </b>LDP servers MAY allow clients to suggest the URI for a resource created through POST, using the HTTP Slug header as defined in [RFC5023]. LDP adds no new requirements to this usage, so its presence functions as a client hint to the server providing a desired string to be incorporated into the server's final choice of resource URI.</p><p class="indented"><b>Requirement Level: </b>MAY </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testOptions">MemberResource-Options</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-must">http://www.w3.org/TR/ldp#ldpr-options-must</a></p><p class="indented"><b>Description: </b>LDP servers MUST support the HTTP OPTIONS method. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testContainsRdfType">BasicContainer-ContainsRdfType</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldprs-gen-atleast1rdftype">http://www.w3.org/TR/ldp#ldprs-gen-atleast1rdftype</a></p><p class="indented"><b>Description: </b>LDP-RSs representations SHOULD have at least one rdf:type set explicitly. This makes the representations much more useful to client applications that don&rsquo;t support inferencing.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.MemberResourceTest_testOptionsAllowHeader">MemberResource-OptionsAllowHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-options-allow">http://www.w3.org/TR/ldp#ldpr-options-allow</a></p><p class="indented"><b>Description: </b>LDP servers MUST indicate their support for HTTP Methods by responding to a HTTP OPTIONS request on the LDPR&rsquo;s URL with the HTTP Method tokens in the HTTP response header Allow. </p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testPostNoSlug">BasicContainer-PostNoSlug</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-serverassignuri">http://www.w3.org/TR/ldp#ldpc-post-serverassignuri</a></p><p class="indented"><b>Description: </b>LDP servers SHOULD assign the URI for the resource to be created using server application specific rules in the absence of a client hint.</p><p class="indented"><b>Requirement Level: </b>SHOULD </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testETagHeadersGet">BasicContainer-ETagHeadersGet</a></h2><p class="note"><b>NOTE: </b>Covers only part of the specification requirement. testETagHeadersHead covers the rest.</p><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpr-gen-etags">http://www.w3.org/TR/ldp#ldpr-gen-etags</a></p><p class="indented"><b>Description: </b>LDP server responses MUST use entity tags (either weak or strong ones) as response ETag header values.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><h2><a id="org.w3.ldp.testsuite.test.BasicContainerTest_testAcceptPostResponseHeader">BasicContainer-AcceptPostResponseHeader</a></h2><p class="indented"><b>Reference URI: </b><a href="http://www.w3.org/TR/ldp#ldpc-post-acceptposthdr">http://www.w3.org/TR/ldp#ldpc-post-acceptposthdr</a></p><p class="indented"><b>Description: </b>LDP servers that support POST MUST include an Accept-Post response header on HTTP OPTIONS responses, listing post document media type(s) supported by the server.</p><p class="indented"><b>Requirement Level: </b>MUST </p><p class="totop"><a href="#top">Back to Top</a></p><script>/*
 * Raphael 1.4.6 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael=function(){function m(){if(m.is(arguments[0],V)){for(var a=arguments[0],b=Ca[K](m,a.splice(0,3+m.is(a[0],P))),c=b.set(),d=0,f=a[o];d<f;d++){var e=a[d]||{};rb.test(e.type)&&c[F](b[e.type]().attr(e))}return c}return Ca[K](m,arguments)}m.version="1.4.6";var W=/[, ]+/,rb=/^(circle|rect|path|ellipse|text|image)$/,p="prototype",y="hasOwnProperty",C=document,aa=window,Qa={was:Object[p][y].call(aa,"Raphael"),is:aa.Raphael};function G(){}var x="appendChild",K="apply",M="concat",Da="createTouch"in C,
A="",N=" ",D=String,H="split",Ra="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[H](N),Ea={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},R="join",o="length",fa=String[p].toLowerCase,v=Math,Z=v.max,ba=v.min,P="number",ha="string",V="array",O="toString",ca="fill",sb=Object[p][O],E=v.pow,F="push",ja=/^(?=[\da-f]$)/,Sa=/^url\(['"]?([^\)]+?)['"]?\)$/i,tb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+(?:\s*,\s*[\d\.]+)?)\s*\)|rgba?\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%(?:\s*,\s*[\d\.]+%))\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i,
Q=v.round,X="setAttribute",z=parseFloat,ga=parseInt,Fa=" progid:DXImageTransform.Microsoft",ra=String[p].toUpperCase,sa={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt",
"stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},Ga={along:"along",blur:P,"clip-rect":"csv",cx:P,cy:P,fill:"colour","fill-opacity":P,"font-size":P,height:P,opacity:P,path:"path",r:P,rotation:"csv",rx:P,ry:P,scale:"csv",stroke:"colour","stroke-opacity":P,"stroke-width":P,translation:"csv",width:P,x:P,y:P},I="replace";m.type=aa.SVGAngle||C.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if(m.type=="VML"){var da=C.createElement("div");da.innerHTML='<v:shape adj="1"/>';da=da.firstChild;da.style.behavior="url(#default#VML)";if(!(da&&typeof da.adj=="object"))return m.type=null;da=null}m.svg=!(m.vml=m.type=="VML");G[p]=m[p];m._id=0;m._oid=0;m.fn={};m.is=function(a,b){b=fa.call(b);return b=="object"&&a===Object(a)||b=="undefined"&&typeof a==b||b=="null"&&a==null||b=="array"&&Array.isArray&&Array.isArray(a)||fa.call(sb.call(a).slice(8,-1))==b};m.setWindow=function(a){aa=
a;C=aa.document};function ta(a){if(m.vml){var b=/^\s+|\s+$/g;ta=U(function(d){var f;d=D(d)[I](b,A);try{var e=new aa.ActiveXObject("htmlfile");e.write("<body>");e.close();f=e.body}catch(h){f=aa.createPopup().document.body}e=f.createTextRange();try{f.style.color=d;var g=e.queryCommandValue("ForeColor");g=(g&255)<<16|g&65280|(g&16711680)>>>16;return"#"+("000000"+g[O](16)).slice(-6)}catch(i){return"none"}})}else{var c=C.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";C.body[x](c);
ta=U(function(d){c.style.color=d;return C.defaultView.getComputedStyle(c,A).getPropertyValue("color")})}return ta(a)}function ub(){return"hsb("+[this.h,this.s,this.b]+")"}function vb(){return this.hex}m.hsb2rgb=U(function(a,b,c){if(m.is(a,"object")&&"h"in a&&"s"in a&&"b"in a){c=a.b;b=a.s;a=a.h}var d;if(c==0)return{r:0,g:0,b:0,hex:"#000"};if(a>1||b>1||c>1){a/=255;b/=255;c/=255}d=~~(a*6);a=a*6-d;var f=c*(1-b),e=c*(1-b*a),h=c*(1-b*(1-a));a=[c,e,f,f,h,c,c][d];b=[h,c,c,e,f,f,h][d];d=[f,f,h,c,c,e,f][d];
a*=255;b*=255;d*=255;c={r:a,g:b,b:d,toString:vb};a=(~~a)[O](16);b=(~~b)[O](16);d=(~~d)[O](16);a=a[I](ja,"0");b=b[I](ja,"0");d=d[I](ja,"0");c.hex="#"+a+b+d;return c},m);m.rgb2hsb=U(function(a,b,c){if(m.is(a,"object")&&"r"in a&&"g"in a&&"b"in a){c=a.b;b=a.g;a=a.r}if(m.is(a,ha)){var d=m.getRGB(a);a=d.r;b=d.g;c=d.b}if(a>1||b>1||c>1){a/=255;b/=255;c/=255}var f=Z(a,b,c),e=ba(a,b,c);d=f;if(e==f)return{h:0,s:0,b:f};else{var h=f-e;e=h/f;a=a==f?(b-c)/h:b==f?2+(c-a)/h:4+(a-b)/h;a/=6;a<0&&a++;a>1&&a--}return{h:a,
s:e,b:d,toString:ub}},m);var wb=/,?([achlmqrstvxz]),?/gi,ua=/\s*,\s*/,xb={hs:1,rg:1};m._path2string=function(){return this.join(",")[I](wb,"$1")};function U(a,b,c){function d(){var f=Array[p].slice.call(arguments,0),e=f[R]("\u25ba"),h=d.cache=d.cache||{},g=d.count=d.count||[];if(h[y](e))return c?c(h[e]):h[e];g[o]>=1000&&delete h[g.shift()];g[F](e);h[e]=a[K](b,f);return c?c(h[e]):h[e]}return d}m.getRGB=U(function(a){if(!a||(a=D(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(a=="none")return{r:-1,
g:-1,b:-1,hex:"none"};!(xb[y](a.substring(0,2))||a.charAt()=="#")&&(a=ta(a));var b,c,d,f,e;if(a=a.match(tb)){if(a[2]){d=ga(a[2].substring(5),16);c=ga(a[2].substring(3,5),16);b=ga(a[2].substring(1,3),16)}if(a[3]){d=ga((e=a[3].charAt(3))+e,16);c=ga((e=a[3].charAt(2))+e,16);b=ga((e=a[3].charAt(1))+e,16)}if(a[4]){a=a[4][H](ua);b=z(a[0]);c=z(a[1]);d=z(a[2]);f=z(a[3])}if(a[5]){a=a[5][H](ua);b=z(a[0])*2.55;c=z(a[1])*2.55;d=z(a[2])*2.55;f=z(a[3])}if(a[6]){a=a[6][H](ua);b=z(a[0]);c=z(a[1]);d=z(a[2]);return m.hsb2rgb(b,
c,d)}if(a[7]){a=a[7][H](ua);b=z(a[0])*2.55;c=z(a[1])*2.55;d=z(a[2])*2.55;return m.hsb2rgb(b,c,d)}a={r:b,g:c,b:d};b=(~~b)[O](16);c=(~~c)[O](16);d=(~~d)[O](16);b=b[I](ja,"0");c=c[I](ja,"0");d=d[I](ja,"0");a.hex="#"+b+c+d;isFinite(z(f))&&(a.o=f);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},m);m.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;if(a.h>1){a.h=0;a.s-=0.2;a.s<=0&&(this.getColor.start={h:0,s:1,b:a.b})}return b.hex};
m.getColor.reset=function(){delete this.start};var yb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,zb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig;m.parsePathString=U(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[];if(m.is(a,V)&&m.is(a[0],V))c=va(a);c[o]||D(a)[I](yb,function(d,f,e){var h=[];d=fa.call(f);e[I](zb,function(g,i){i&&h[F](+i)});if(d=="m"&&h[o]>2){c[F]([f][M](h.splice(0,2)));d="l";f=f=="m"?"l":"L"}for(;h[o]>=b[d];){c[F]([f][M](h.splice(0,b[d])));
if(!b[d])break}});c[O]=m._path2string;return c});m.findDotsAtSegment=function(a,b,c,d,f,e,h,g,i){var j=1-i,l=E(j,3)*a+E(j,2)*3*i*c+j*3*i*i*f+E(i,3)*h;j=E(j,3)*b+E(j,2)*3*i*d+j*3*i*i*e+E(i,3)*g;var n=a+2*i*(c-a)+i*i*(f-2*c+a),r=b+2*i*(d-b)+i*i*(e-2*d+b),q=c+2*i*(f-c)+i*i*(h-2*f+c),k=d+2*i*(e-d)+i*i*(g-2*e+d);a=(1-i)*a+i*c;b=(1-i)*b+i*d;f=(1-i)*f+i*h;e=(1-i)*e+i*g;g=90-v.atan((n-q)/(r-k))*180/v.PI;(n>q||r<k)&&(g+=180);return{x:l,y:j,m:{x:n,y:r},n:{x:q,y:k},start:{x:a,y:b},end:{x:f,y:e},alpha:g}};var xa=
U(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=wa(a);for(var b=0,c=0,d=[],f=[],e,h=0,g=a[o];h<g;h++){e=a[h];if(e[0]=="M"){b=e[1];c=e[2];d[F](b);f[F](c)}else{b=Ab(b,c,e[1],e[2],e[3],e[4],e[5],e[6]);d=d[M](b.min.x,b.max.x);f=f[M](b.min.y,b.max.y);b=e[5];c=e[6]}}a=ba[K](0,d);e=ba[K](0,f);return{x:a,y:e,width:Z[K](0,d)-a,height:Z[K](0,f)-e}});function va(a){var b=[];if(!m.is(a,V)||!m.is(a&&a[0],V))a=m.parsePathString(a);for(var c=0,d=a[o];c<d;c++){b[c]=[];for(var f=0,e=a[c][o];f<e;f++)b[c][f]=
a[c][f]}b[O]=m._path2string;return b}var Ha=U(function(a){if(!m.is(a,V)||!m.is(a&&a[0],V))a=m.parsePathString(a);var b=[],c=0,d=0,f=0,e=0,h=0;if(a[0][0]=="M"){c=a[0][1];d=a[0][2];f=c;e=d;h++;b[F](["M",c,d])}h=h;for(var g=a[o];h<g;h++){var i=b[h]=[],j=a[h];if(j[0]!=fa.call(j[0])){i[0]=fa.call(j[0]);switch(i[0]){case "a":i[1]=j[1];i[2]=j[2];i[3]=j[3];i[4]=j[4];i[5]=j[5];i[6]=+(j[6]-c).toFixed(3);i[7]=+(j[7]-d).toFixed(3);break;case "v":i[1]=+(j[1]-d).toFixed(3);break;case "m":f=j[1];e=j[2];default:for(var l=
1,n=j[o];l<n;l++)i[l]=+(j[l]-(l%2?c:d)).toFixed(3)}}else{b[h]=[];if(j[0]=="m"){f=j[1]+c;e=j[2]+d}i=0;for(l=j[o];i<l;i++)b[h][i]=j[i]}j=b[h][o];switch(b[h][0]){case "z":c=f;d=e;break;case "h":c+=+b[h][j-1];break;case "v":d+=+b[h][j-1];break;default:c+=+b[h][j-2];d+=+b[h][j-1]}}b[O]=m._path2string;return b},0,va),na=U(function(a){if(!m.is(a,V)||!m.is(a&&a[0],V))a=m.parsePathString(a);var b=[],c=0,d=0,f=0,e=0,h=0;if(a[0][0]=="M"){c=+a[0][1];d=+a[0][2];f=c;e=d;h++;b[0]=["M",c,d]}h=h;for(var g=a[o];h<
g;h++){var i=b[h]=[],j=a[h];if(j[0]!=ra.call(j[0])){i[0]=ra.call(j[0]);switch(i[0]){case "A":i[1]=j[1];i[2]=j[2];i[3]=j[3];i[4]=j[4];i[5]=j[5];i[6]=+(j[6]+c);i[7]=+(j[7]+d);break;case "V":i[1]=+j[1]+d;break;case "H":i[1]=+j[1]+c;break;case "M":f=+j[1]+c;e=+j[2]+d;default:for(var l=1,n=j[o];l<n;l++)i[l]=+j[l]+(l%2?c:d)}}else{l=0;for(n=j[o];l<n;l++)b[h][l]=j[l]}switch(i[0]){case "Z":c=f;d=e;break;case "H":c=i[1];break;case "V":d=i[1];break;case "M":f=b[h][b[h][o]-2];e=b[h][b[h][o]-1];default:c=b[h][b[h][o]-
2];d=b[h][b[h][o]-1]}}b[O]=m._path2string;return b},null,va);function ya(a,b,c,d){return[a,b,c,d,c,d]}function Ta(a,b,c,d,f,e){var h=1/3,g=2/3;return[h*a+g*c,h*b+g*d,h*f+g*c,h*e+g*d,f,e]}function Ua(a,b,c,d,f,e,h,g,i,j){var l=v.PI,n=l*120/180,r=l/180*(+f||0),q=[],k,t=U(function(J,ia,za){var Bb=J*v.cos(za)-ia*v.sin(za);J=J*v.sin(za)+ia*v.cos(za);return{x:Bb,y:J}});if(j){w=j[0];k=j[1];e=j[2];B=j[3]}else{k=t(a,b,-r);a=k.x;b=k.y;k=t(g,i,-r);g=k.x;i=k.y;v.cos(l/180*f);v.sin(l/180*f);k=(a-g)/2;w=(b-i)/
2;B=k*k/(c*c)+w*w/(d*d);if(B>1){B=v.sqrt(B);c=B*c;d=B*d}B=c*c;var L=d*d;B=(e==h?-1:1)*v.sqrt(v.abs((B*L-B*w*w-L*k*k)/(B*w*w+L*k*k)));e=B*c*w/d+(a+g)/2;var B=B*-d*k/c+(b+i)/2,w=v.asin(((b-B)/d).toFixed(7));k=v.asin(((i-B)/d).toFixed(7));w=a<e?l-w:w;k=g<e?l-k:k;w<0&&(w=l*2+w);k<0&&(k=l*2+k);if(h&&w>k)w-=l*2;if(!h&&k>w)k-=l*2}l=k-w;if(v.abs(l)>n){q=k;l=g;L=i;k=w+n*(h&&k>w?1:-1);g=e+c*v.cos(k);i=B+d*v.sin(k);q=Ua(g,i,c,d,f,0,h,l,L,[k,q,e,B])}l=k-w;f=v.cos(w);e=v.sin(w);h=v.cos(k);k=v.sin(k);l=v.tan(l/
4);c=4/3*c*l;l=4/3*d*l;d=[a,b];a=[a+c*e,b-l*f];b=[g+c*k,i-l*h];g=[g,i];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(j)return[a,b,g][M](q);else{q=[a,b,g][M](q)[R]()[H](",");j=[];g=0;for(i=q[o];g<i;g++)j[g]=g%2?t(q[g-1],q[g],r).y:t(q[g],q[g+1],r).x;return j}}function ka(a,b,c,d,f,e,h,g,i){var j=1-i;return{x:E(j,3)*a+E(j,2)*3*i*c+j*3*i*i*f+E(i,3)*h,y:E(j,3)*b+E(j,2)*3*i*d+j*3*i*i*e+E(i,3)*g}}var Ab=U(function(a,b,c,d,f,e,h,g){var i=f-2*c+a-(h-2*f+c),j=2*(c-a)-2*(f-c),l=a-c,n=(-j+v.sqrt(j*j-4*i*l))/2/i;i=(-j-
v.sqrt(j*j-4*i*l))/2/i;var r=[b,g],q=[a,h];v.abs(n)>1e12&&(n=0.5);v.abs(i)>1e12&&(i=0.5);if(n>0&&n<1){n=ka(a,b,c,d,f,e,h,g,n);q[F](n.x);r[F](n.y)}if(i>0&&i<1){n=ka(a,b,c,d,f,e,h,g,i);q[F](n.x);r[F](n.y)}i=e-2*d+b-(g-2*e+d);j=2*(d-b)-2*(e-d);l=b-d;n=(-j+v.sqrt(j*j-4*i*l))/2/i;i=(-j-v.sqrt(j*j-4*i*l))/2/i;v.abs(n)>1e12&&(n=0.5);v.abs(i)>1e12&&(i=0.5);if(n>0&&n<1){n=ka(a,b,c,d,f,e,h,g,n);q[F](n.x);r[F](n.y)}if(i>0&&i<1){n=ka(a,b,c,d,f,e,h,g,i);q[F](n.x);r[F](n.y)}return{min:{x:ba[K](0,
q),y:ba[K](0,r)},max:{x:Z[K](0,q),y:Z[K](0,r)}}}),wa=U(function(a,b){var c=na(a),d=b&&na(b);a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function f(q,k){var t;if(!q)return["C",k.x,k.y,k.x,k.y,k.x,k.y];!(q[0]in{T:1,Q:1})&&(k.qx=k.qy=null);switch(q[0]){case "M":k.X=q[1];k.Y=q[2];break;case "A":q=["C"][M](Ua[K](0,[k.x,k.y][M](q.slice(1))));break;case "S":t=k.x+(k.x-(k.bx||k.x));k=k.y+(k.y-(k.by||k.y));q=["C",t,k][M](q.slice(1));break;case "T":k.qx=k.x+(k.x-
(k.qx||k.x));k.qy=k.y+(k.y-(k.qy||k.y));q=["C"][M](Ta(k.x,k.y,k.qx,k.qy,q[1],q[2]));break;case "Q":k.qx=q[1];k.qy=q[2];q=["C"][M](Ta(k.x,k.y,q[1],q[2],q[3],q[4]));break;case "L":q=["C"][M](ya(k.x,k.y,q[1],q[2]));break;case "H":q=["C"][M](ya(k.x,k.y,q[1],k.y));break;case "V":q=["C"][M](ya(k.x,k.y,k.x,q[1]));break;case "Z":q=["C"][M](ya(k.x,k.y,k.X,k.Y));break}return q}function e(q,k){if(q[k][o]>7){q[k].shift();for(var t=q[k];t[o];)q.splice(k++,0,["C"][M](t.splice(0,6)));q.splice(k,1);i=Z(c[o],d&&d[o]||
0)}}function h(q,k,t,L,B){if(q&&k&&q[B][0]=="M"&&k[B][0]!="M"){k.splice(B,0,["M",L.x,L.y]);t.bx=0;t.by=0;t.x=q[B][1];t.y=q[B][2];i=Z(c[o],d&&d[o]||0)}}for(var g=0,i=Z(c[o],d&&d[o]||0);g<i;g++){c[g]=f(c[g],a);e(c,g);d&&(d[g]=f(d[g],b));d&&e(d,g);h(c,d,a,b,g);h(d,c,b,a,g);var j=c[g],l=d&&d[g],n=j[o],r=d&&l[o];a.x=j[n-2];a.y=j[n-1];a.bx=z(j[n-4])||a.x;a.by=z(j[n-3])||a.y;b.bx=d&&(z(l[r-4])||b.x);b.by=d&&(z(l[r-3])||b.y);b.x=d&&l[r-2];b.y=d&&l[r-1]}return d?[c,d]:c},null,va),Va=U(function(a){for(var b=
[],c=0,d=a[o];c<d;c++){var f={},e=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=m.getRGB(e[1]);if(f.color.error)return null;f.color=f.color.hex;e[2]&&(f.offset=e[2]+"%");b[F](f)}c=1;for(d=b[o]-1;c<d;c++)if(!b[c].offset){a=z(b[c-1].offset||0);e=0;for(f=c+1;f<d;f++)if(b[f].offset){e=b[f].offset;break}if(!e){e=100;f=d}e=z(e);for(e=(e-a)/(f-c+1);c<f;c++){a+=e;b[c].offset=a+"%"}}return b});function Wa(a,b,c,d){if(m.is(a,ha)||m.is(a,"object")){a=m.is(a,ha)?C.getElementById(a):a;if(a.tagName)return b==null?
{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:b,height:c}}else return{container:1,x:a,y:b,width:c,height:d}}function Ia(a,b){var c=this;for(var d in b)if(b[y](d)&&!(d in a))switch(typeof b[d]){case "function":(function(f){a[d]=a===c?f:function(){return f[K](c,arguments)}})(b[d]);break;case "object":a[d]=a[d]||{};Ia.call(this,a[d],b[d]);break;default:a[d]=b[d];break}}function la(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=
a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)}function Xa(a,b){if(b.top!==a){la(a,b);a.next=null;a.prev=b.top;b.top.next=a;b.top=a}}function Ya(a,b){if(b.bottom!==a){la(a,b);a.next=b.bottom;a.prev=null;b.bottom.prev=a;b.bottom=a}}function Za(a,b,c){la(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a}function $a(a,b,c){la(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b}function ab(a){return function(){throw new Error("Rapha\u00ebl: you are calling to method \u201c"+
a+"\u201d of removed object");}}var bb=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;m.pathToRelative=Ha;if(m.svg){G[p].svgns="http://www.w3.org/2000/svg";G[p].xlink="http://www.w3.org/1999/xlink";Q=function(a){return+a+(~~a===a)*0.5};var u=function(a,b){if(b)for(var c in b)b[y](c)&&a[X](c,D(b[c]));else{a=C.createElementNS(G[p].svgns,a);a.style.webkitTapHighlightColor="rgba(0,0,0,0)";return a}};m[O]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var cb=function(a,
b){var c=u("path");b.canvas&&b.canvas[x](c);b=new s(c,b);b.type="path";ea(b,{fill:"none",stroke:"#000",path:a});return b},oa=function(a,b,c){var d="linear",f=0.5,e=0.5,h=a.style;b=D(b)[I](bb,function(l,n,r){d="radial";if(n&&r){f=z(n);e=z(r);l=(e>0.5)*2-1;E(f-0.5,2)+E(e-0.5,2)>0.25&&(e=v.sqrt(0.25-E(f-0.5,2))*l+0.5)&&e!=0.5&&(e=e.toFixed(5)-1.0E-5*l)}return A});b=b[H](/\s*\-\s*/);if(d=="linear"){var g=b.shift();g=-z(g);if(isNaN(g))return null;g=[0,0,v.cos(g*v.PI/180),v.sin(g*v.PI/180)];var i=1/(Z(v.abs(g[2]),
v.abs(g[3]))||1);g[2]*=i;g[3]*=i;if(g[2]<0){g[0]=-g[2];g[2]=0}if(g[3]<0){g[1]=-g[3];g[3]=0}}b=Va(b);if(!b)return null;i=a.getAttribute(ca);(i=i.match(/^url\(#(.*)\)$/))&&c.defs.removeChild(C.getElementById(i[1]));i=u(d+"Gradient");i.id="r"+(m._id++)[O](36);u(i,d=="radial"?{fx:f,fy:e}:{x1:g[0],y1:g[1],x2:g[2],y2:g[3]});c.defs[x](i);c=0;for(g=b[o];c<g;c++){var j=u("stop");u(j,{offset:b[c].offset?b[c].offset:!c?"0%":"100%","stop-color":b[c].color||"#fff"});i[x](j)}u(a,{fill:"url(#"+i.id+")",opacity:1,
"fill-opacity":1});h.fill=A;h.opacity=1;return h.fillOpacity=1},Ja=function(a){var b=a.getBBox();u(a.pattern,{patternTransform:m.format("translate({0},{1})",b.x,b.y)})},ea=function(a,b){var c={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},d=a.node,f=a.attrs,e=a.rotate();function h(k,t){if(t=c[fa.call(t)]){var L=k.attrs["stroke-width"]||"1";k={round:L,square:L,butt:0}[k.attrs["stroke-linecap"]||
b["stroke-linecap"]]||0;for(var B=[],w=t[o];w--;)B[w]=t[w]*L+(w%2?1:-1)*k;u(d,{"stroke-dasharray":B[R](",")})}}b[y]("rotation")&&(e=b.rotation);var g=D(e)[H](W);if(g.length-1){g[1]=+g[1];g[2]=+g[2]}else g=null;z(e)&&a.rotate(0,true);for(var i in b)if(b[y](i))if(sa[y](i)){var j=b[i];f[i]=j;switch(i){case "blur":a.blur(j);break;case "rotation":a.rotate(j,true);break;case "href":case "title":case "target":var l=d.parentNode;if(fa.call(l.tagName)!="a"){var n=u("a");l.insertBefore(n,d);n[x](d);l=n}l.setAttributeNS(a.paper.xlink,
i,j);break;case "cursor":d.style.cursor=j;break;case "clip-rect":l=D(j)[H](W);if(l[o]==4){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var r=u("clipPath");n=u("rect");r.id="r"+(m._id++)[O](36);u(n,{x:l[0],y:l[1],width:l[2],height:l[3]});r[x](n);a.paper.defs[x](r);u(d,{"clip-path":"url(#"+r.id+")"});a.clip=n}if(!j){(j=C.getElementById(d.getAttribute("clip-path")[I](/(^url\(#|\)$)/g,A)))&&j.parentNode.removeChild(j);u(d,{"clip-path":A});delete a.clip}break;case "path":if(a.type==
"path")u(d,{d:j?(f.path=na(j)):"M0,0"});break;case "width":d[X](i,j);if(f.fx){i="x";j=f.x}else break;case "x":if(f.fx)j=-f.x-(f.width||0);case "rx":if(i=="rx"&&a.type=="rect")break;case "cx":g&&(i=="x"||i=="cx")&&(g[1]+=j-f[i]);d[X](i,j);a.pattern&&Ja(a);break;case "height":d[X](i,j);if(f.fy){i="y";j=f.y}else break;case "y":if(f.fy)j=-f.y-(f.height||0);case "ry":if(i=="ry"&&a.type=="rect")break;case "cy":g&&(i=="y"||i=="cy")&&(g[2]+=j-f[i]);d[X](i,j);a.pattern&&Ja(a);break;case "r":a.type=="rect"?
u(d,{rx:j,ry:j}):d[X](i,j);break;case "src":a.type=="image"&&d.setAttributeNS(a.paper.xlink,"href",j);break;case "stroke-width":d.style.strokeWidth=j;d[X](i,j);f["stroke-dasharray"]&&h(a,f["stroke-dasharray"]);break;case "stroke-dasharray":h(a,j);break;case "translation":j=D(j)[H](W);j[0]=+j[0]||0;j[1]=+j[1]||0;if(g){g[1]+=j[0];g[2]+=j[1]}Aa.call(a,j[0],j[1]);break;case "scale":j=D(j)[H](W);a.scale(+j[0]||1,+j[1]||+j[0]||1,isNaN(z(j[2]))?null:+j[2],isNaN(z(j[3]))?null:+j[3]);break;case ca:if(l=D(j).match(Sa)){r=
u("pattern");var q=u("image");r.id="r"+(m._id++)[O](36);u(r,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});u(q,{x:0,y:0});q.setAttributeNS(a.paper.xlink,"href",l[1]);r[x](q);j=C.createElement("img");j.style.cssText="position:absolute;left:-9999em;top-9999em";j.onload=function(){u(r,{width:this.offsetWidth,height:this.offsetHeight});u(q,{width:this.offsetWidth,height:this.offsetHeight});C.body.removeChild(this);a.paper.safari()};C.body[x](j);j.src=l[1];a.paper.defs[x](r);d.style.fill="url(#"+
r.id+")";u(d,{fill:"url(#"+r.id+")"});a.pattern=r;a.pattern&&Ja(a);break}l=m.getRGB(j);if(l.error){if(({circle:1,ellipse:1}[y](a.type)||D(j).charAt()!="r")&&oa(d,j,a.paper)){f.gradient=j;f.fill="none";break}}else{delete b.gradient;delete f.gradient;!m.is(f.opacity,"undefined")&&m.is(b.opacity,"undefined")&&u(d,{opacity:f.opacity});!m.is(f["fill-opacity"],"undefined")&&m.is(b["fill-opacity"],"undefined")&&u(d,{"fill-opacity":f["fill-opacity"]})}l[y]("o")&&u(d,{"fill-opacity":l.o/100});case "stroke":l=
m.getRGB(j);d[X](i,l.hex);i=="stroke"&&l[y]("o")&&u(d,{"stroke-opacity":l.o/100});break;case "gradient":(({circle:1,ellipse:1})[y](a.type)||D(j).charAt()!="r")&&oa(d,j,a.paper);break;case "opacity":case "fill-opacity":if(f.gradient){if(l=C.getElementById(d.getAttribute(ca)[I](/^url\(#|\)$/g,A))){l=l.getElementsByTagName("stop");l[l[o]-1][X]("stop-opacity",j)}break}default:i=="font-size"&&(j=ga(j,10)+"px");l=i[I](/(\-.)/g,function(k){return ra.call(k.substring(1))});d.style[l]=j;d[X](i,j);break}}Cb(a,
b);if(g)a.rotate(g.join(N));else z(e)&&a.rotate(e,true)},db=1.2,Cb=function(a,b){if(!(a.type!="text"||!(b[y]("text")||b[y]("font")||b[y]("font-size")||b[y]("x")||b[y]("y")))){var c=a.attrs,d=a.node,f=d.firstChild?ga(C.defaultView.getComputedStyle(d.firstChild,A).getPropertyValue("font-size"),10):10;if(b[y]("text")){for(c.text=b.text;d.firstChild;)d.removeChild(d.firstChild);b=D(b.text)[H]("\n");for(var e=0,h=b[o];e<h;e++)if(b[e]){var g=u("tspan");e&&u(g,{dy:f*db,x:c.x});g[x](C.createTextNode(b[e]));
d[x](g)}}else{b=d.getElementsByTagName("tspan");e=0;for(h=b[o];e<h;e++)e&&u(b[e],{dy:f*db,x:c.x})}u(d,{y:c.y});a=a.getBBox();(a=c.y-(a.y+a.height/2))&&isFinite(a)&&u(d,{y:c.y+a})}},s=function(a,b){this[0]=a;this.id=m._oid++;this.node=a;a.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null};s[p].rotate=function(a,b,c){if(this.removed)return this;
if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][R](N);return this._.rt.deg}var d=this.getBBox();a=D(a)[H](W);if(a[o]-1){b=z(a[1]);c=z(a[2])}a=z(a[0]);if(b!=null)this._.rt.deg=a;else this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;b=b==null?d.x+d.width/2:b;c=c==null?d.y+d.height/2:c;if(this._.rt.deg){this.transformations[0]=m.format("rotate({0} {1} {2})",this._.rt.deg,b,c);this.clip&&u(this.clip,{transform:m.format("rotate({0} {1} {2})",-this._.rt.deg,b,
c)})}else{this.transformations[0]=A;this.clip&&u(this.clip,{transform:A})}u(this.node,{transform:this.transformations[R](N)});return this};s[p].hide=function(){!this.removed&&(this.node.style.display="none");return this};s[p].show=function(){!this.removed&&(this.node.style.display="");return this};s[p].remove=function(){if(!this.removed){la(this,this.paper);this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=true}};s[p].getBBox=function(){if(this.removed)return this;
if(this.type=="path")return xa(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=true}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,y:Infinity,width:0,height:0};for(var d=0,f=this.node.getNumberOfChars();d<f;d++){var e=this.node.getExtentOfChar(d);e.y<b.y&&(b.y=e.y);e.y+e.height-b.y>b.height&&(b.height=e.y+e.height-b.y);e.x+e.width-b.x>b.width&&(b.width=e.x+e.width-b.x)}}a&&this.hide();return b};s[p].attr=function(a,b){if(this.removed)return this;
if(a==null){a={};for(var c in this.attrs)if(this.attrs[y](c))a[c]=this.attrs[c];this._.rt.deg&&(a.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(a.scale=this.scale());a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient;return a}if(b==null&&m.is(a,ha)){if(a=="translation")return Aa.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a==ca&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(b==null&&
m.is(a,V)){b={};c=0;for(var d=a.length;c<d;c++)b[a[c]]=this.attr(a[c]);return b}if(b!=null){c={};c[a]=b;ea(this,c)}else a!=null&&m.is(a,"object")&&ea(this,a);return this};s[p].toFront=function(){if(this.removed)return this;this.node.parentNode[x](this.node);var a=this.paper;a.top!=this&&Xa(this,a);return this};s[p].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);Ya(this,this.paper)}return this};
s[p].insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode[x](this.node);Za(this,a,this.paper);return this};s[p].insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);$a(this,a,this.paper);return this};s[p].blur=function(a){var b=this;if(+a!==0){var c=u("filter"),d=u("feGaussianBlur");b.attrs.blur=a;c.id="r"+(m._id++)[O](36);u(d,{stdDeviation:+a||
1.5});c.appendChild(d);b.paper.defs.appendChild(c);b._blur=c;u(b.node,{filter:"url(#"+c.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var eb=function(a,b,c,d){var f=u("circle");a.canvas&&a.canvas[x](f);a=new s(f,a);a.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"};a.type="circle";u(f,a.attrs);return a},fb=function(a,b,c,d,f,e){var h=u("rect");a.canvas&&a.canvas[x](h);a=new s(h,a);a.attrs={x:b,y:c,width:d,height:f,
r:e||0,rx:e||0,ry:e||0,fill:"none",stroke:"#000"};a.type="rect";u(h,a.attrs);return a},gb=function(a,b,c,d,f){var e=u("ellipse");a.canvas&&a.canvas[x](e);a=new s(e,a);a.attrs={cx:b,cy:c,rx:d,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";u(e,a.attrs);return a},hb=function(a,b,c,d,f,e){var h=u("image");u(h,{x:c,y:d,width:f,height:e,preserveAspectRatio:"none"});h.setAttributeNS(a.xlink,"href",b);a.canvas&&a.canvas[x](h);a=new s(h,a);a.attrs={x:c,y:d,width:f,height:e,src:b};a.type="image";return a},
ib=function(a,b,c,d){var f=u("text");u(f,{x:b,y:c,"text-anchor":"middle"});a.canvas&&a.canvas[x](f);a=new s(f,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:d,font:sa.font,stroke:"none",fill:"#000"};a.type="text";ea(a,a.attrs);return a},jb=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas[X]("width",this.width);this.canvas[X]("height",this.height);return this},Ca=function(){var a=Wa[K](0,arguments),b=a&&a.container,c=a.x,d=a.y,f=a.width;a=a.height;if(!b)throw new Error("SVG container not found.");
var e=u("svg");c=c||0;d=d||0;f=f||512;a=a||342;u(e,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:a});if(b==1){e.style.cssText="position:absolute;left:"+c+"px;top:"+d+"px";C.body[x](e)}else b.firstChild?b.insertBefore(e,b.firstChild):b[x](e);b=new G;b.width=f;b.height=a;b.canvas=e;Ia.call(b,b,m.fn);b.clear();return b};G[p].clear=function(){for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=u("desc"))[x](C.createTextNode("Created with Rapha\u00ebl"));
a[x](this.desc);a[x](this.defs=u("defs"))};G[p].remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=ab(a)}}if(m.vml){var kb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Db=/([clmz]),?([^clmz]*)/gi,Eb=/-?[^,\s-]+/g,pa=1000+N+1000,ma=10,qa={path:1,rect:1},Fb=function(a){var b=/[ahqstv]/ig,c=na;D(a).match(b)&&(c=wa);b=/[clmz]/g;if(c==na&&!D(a).match(b))return a=D(a)[I](Db,function(i,j,l){var n=[],r=fa.call(j)=="m",q=kb[j];l[I](Eb,function(k){if(r&&
n[o]==2){q+=n+kb[j=="m"?"l":"L"];n=[]}n[F](Q(k*ma))});return q+n});b=c(a);var d;a=[];for(var f=0,e=b[o];f<e;f++){c=b[f];d=fa.call(b[f][0]);d=="z"&&(d="x");for(var h=1,g=c[o];h<g;h++)d+=Q(c[h]*ma)+(h!=g-1?",":A);a[F](d)}return a[R](N)};m[O]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};cb=function(a,b){var c=S("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";c.coordsize=
b.coordsize;c.coordorigin=b.coordorigin;var d=S("shape"),f=d.style;f.width=b.width+"px";f.height=b.height+"px";d.coordsize=pa;d.coordorigin=b.coordorigin;c[x](d);d=new s(d,c,b);f={fill:"none",stroke:"#000"};a&&(f.path=a);d.isAbsolute=true;d.type="path";d.path=[];d.Path=A;ea(d,f);b.canvas[x](c);return d};ea=function(a,b){a.attrs=a.attrs||{};var c=a.node,d=a.attrs,f=c.style,e;e=(b.x!=d.x||b.y!=d.y||b.width!=d.width||b.height!=d.height||b.r!=d.r)&&a.type=="rect";var h=a;for(var g in b)if(b[y](g))d[g]=
b[g];if(e){d.path=lb(d.x,d.y,d.width,d.height,d.r);a.X=d.x;a.Y=d.y;a.W=d.width;a.H=d.height}b.href&&(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(f.cursor=b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&a.type=="path"||e)c.path=Fb(d.path);b.rotation!=null&&a.rotate(b.rotation,true);if(b.translation){e=D(b.translation)[H](W);Aa.call(a,e[0],e[1]);if(a._.rt.cx!=null){a._.rt.cx+=+e[0];a._.rt.cy+=+e[1];a.setBox(a.attrs,e[0],e[1])}}if(b.scale){e=D(b.scale)[H](W);a.scale(+e[0]||
1,+e[1]||+e[0]||1,+e[2]||null,+e[3]||null)}if("clip-rect"in b){e=D(b["clip-rect"])[H](W);if(e[o]==4){e[2]=+e[2]+ +e[0];e[3]=+e[3]+ +e[1];g=c.clipRect||C.createElement("div");var i=g.style,j=c.parentNode;i.clip=m.format("rect({1}px {2}px {3}px {0}px)",e);if(!c.clipRect){i.position="absolute";i.top=0;i.left=0;i.width=a.paper.width+"px";i.height=a.paper.height+"px";j.parentNode.insertBefore(g,j);g[x](j);c.clipRect=g}}if(!b["clip-rect"])c.clipRect&&(c.clipRect.style.clip=A)}if(a.type=="image"&&b.src)c.src=
b.src;if(a.type=="image"&&b.opacity){c.filterOpacity=Fa+".Alpha(opacity="+b.opacity*100+")";f.filter=(c.filterMatrix||A)+(c.filterOpacity||A)}b.font&&(f.font=b.font);b["font-family"]&&(f.fontFamily='"'+b["font-family"][H](",")[0][I](/^['"]+|['"]+$/g,A)+'"');b["font-size"]&&(f.fontSize=b["font-size"]);b["font-weight"]&&(f.fontWeight=b["font-weight"]);b["font-style"]&&(f.fontStyle=b["font-style"]);if(b.opacity!=null||b["stroke-width"]!=null||b.fill!=null||b.stroke!=null||b["stroke-width"]!=null||b["stroke-opacity"]!=
null||b["fill-opacity"]!=null||b["stroke-dasharray"]!=null||b["stroke-miterlimit"]!=null||b["stroke-linejoin"]!=null||b["stroke-linecap"]!=null){c=a.shape||c;f=c.getElementsByTagName(ca)&&c.getElementsByTagName(ca)[0];e=false;!f&&(e=f=S(ca));if("fill-opacity"in b||"opacity"in b){a=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+m.getRGB(b.fill).o+1||2)-1);a<0&&(a=0);a>1&&(a=1);f.opacity=a}b.fill&&(f.on=true);if(f.on==null||b.fill=="none")f.on=false;if(f.on&&b.fill)if(a=b.fill.match(Sa)){f.src=
a[1];f.type="tile"}else{f.color=m.getRGB(b.fill).hex;f.src=A;f.type="solid";if(m.getRGB(b.fill).error&&(h.type in{circle:1,ellipse:1}||D(b.fill).charAt()!="r")&&oa(h,b.fill)){d.fill="none";d.gradient=b.fill}}e&&c[x](f);f=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];e=false;!f&&(e=f=S("stroke"));if(b.stroke&&b.stroke!="none"||b["stroke-width"]||b["stroke-opacity"]!=null||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])f.on=true;(b.stroke==
"none"||f.on==null||b.stroke==0||b["stroke-width"]==0)&&(f.on=false);a=m.getRGB(b.stroke);f.on&&b.stroke&&(f.color=a.hex);a=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+a.o+1||2)-1);g=(z(b["stroke-width"])||1)*0.75;a<0&&(a=0);a>1&&(a=1);b["stroke-width"]==null&&(g=d["stroke-width"]);b["stroke-width"]&&(f.weight=g);g&&g<1&&(a*=g)&&(f.weight=1);f.opacity=a;b["stroke-linejoin"]&&(f.joinstyle=b["stroke-linejoin"]||"miter");f.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(f.endcap=
b["stroke-linecap"]=="butt"?"flat":b["stroke-linecap"]=="square"?"square":"round");if(b["stroke-dasharray"]){a={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};f.dashstyle=a[y](b["stroke-dasharray"])?a[b["stroke-dasharray"]]:A}e&&c[x](f)}if(h.type=="text"){f=h.paper.span.style;d.font&&(f.font=d.font);d["font-family"]&&(f.fontFamily=d["font-family"]);d["font-size"]&&(f.fontSize=
d["font-size"]);d["font-weight"]&&(f.fontWeight=d["font-weight"]);d["font-style"]&&(f.fontStyle=d["font-style"]);h.node.string&&(h.paper.span.innerHTML=D(h.node.string)[I](/</g,"&#60;")[I](/&/g,"&#38;")[I](/\n/g,"<br>"));h.W=d.w=h.paper.span.offsetWidth;h.H=d.h=h.paper.span.offsetHeight;h.X=d.x;h.Y=d.y+Q(h.H/2);switch(d["text-anchor"]){case "start":h.node.style["v-text-align"]="left";h.bbx=Q(h.W/2);break;case "end":h.node.style["v-text-align"]="right";h.bbx=-Q(h.W/2);break;default:h.node.style["v-text-align"]=
"center";break}}};oa=function(a,b){a.attrs=a.attrs||{};var c="linear",d=".5 .5";a.attrs.gradient=b;b=D(b)[I](bb,function(i,j,l){c="radial";if(j&&l){j=z(j);l=z(l);E(j-0.5,2)+E(l-0.5,2)>0.25&&(l=v.sqrt(0.25-E(j-0.5,2))*((l>0.5)*2-1)+0.5);d=j+N+l}return A});b=b[H](/\s*\-\s*/);if(c=="linear"){var f=b.shift();f=-z(f);if(isNaN(f))return null}var e=Va(b);if(!e)return null;a=a.shape||a.node;b=a.getElementsByTagName(ca)[0]||S(ca);!b.parentNode&&a.appendChild(b);if(e[o]){b.on=true;b.method="none";b.color=e[0].color;
b.color2=e[e[o]-1].color;a=[];for(var h=0,g=e[o];h<g;h++)e[h].offset&&a[F](e[h].offset+N+e[h].color);b.colors&&(b.colors.value=a[o]?a[R]():"0% "+b.color);if(c=="radial"){b.type="gradientradial";b.focus="100%";b.focussize=d;b.focusposition=d}else{b.type="gradient";b.angle=(270-f)%360}}return 1};s=function(a,b,c){this[0]=a;this.id=m._oid++;this.node=a;a.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=b;this.paper=c;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!c.bottom&&(c.bottom=this);(this.prev=
c.top)&&(c.top.next=this);c.top=this;this.next=null};s[p].rotate=function(a,b,c){if(this.removed)return this;if(a==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][R](N);return this._.rt.deg}a=D(a)[H](W);if(a[o]-1){b=z(a[1]);c=z(a[2])}a=z(a[0]);if(b!=null)this._.rt.deg=a;else this._.rt.deg+=a;c==null&&(b=null);this._.rt.cx=b;this._.rt.cy=c;this.setBox(this.attrs,b,c);this.Group.style.rotation=this._.rt.deg;return this};s[p].setBox=function(a,b,c){if(this.removed)return this;var d=
this.Group.style,f=this.shape&&this.shape.style||this.node.style;a=a||{};for(var e in a)if(a[y](e))this.attrs[e]=a[e];b=b||this._.rt.cx;c=c||this._.rt.cy;var h=this.attrs,g;switch(this.type){case "circle":a=h.cx-h.r;e=h.cy-h.r;g=h=h.r*2;break;case "ellipse":a=h.cx-h.rx;e=h.cy-h.ry;g=h.rx*2;h=h.ry*2;break;case "image":a=+h.x;e=+h.y;g=h.width||0;h=h.height||0;break;case "text":this.textpath.v=["m",Q(h.x),", ",Q(h.y-2),"l",Q(h.x)+1,", ",Q(h.y-2)][R](A);a=h.x-Q(this.W/2);e=h.y-this.H/2;g=this.W;h=this.H;
break;case "rect":case "path":if(this.attrs.path){h=xa(this.attrs.path);a=h.x;e=h.y;g=h.width;h=h.height}else{e=a=0;g=this.paper.width;h=this.paper.height}break;default:e=a=0;g=this.paper.width;h=this.paper.height;break}b=b==null?a+g/2:b;c=c==null?e+h/2:c;b=b-this.paper.width/2;c=c-this.paper.height/2;var i;d.left!=(i=b+"px")&&(d.left=i);d.top!=(i=c+"px")&&(d.top=i);this.X=qa[y](this.type)?-b:a;this.Y=qa[y](this.type)?-c:e;this.W=g;this.H=h;if(qa[y](this.type)){f.left!=(i=-b*ma+"px")&&(f.left=i);
f.top!=(i=-c*ma+"px")&&(f.top=i)}else if(this.type=="text"){f.left!=(i=-b+"px")&&(f.left=i);f.top!=(i=-c+"px")&&(f.top=i)}else{d.width!=(i=this.paper.width+"px")&&(d.width=i);d.height!=(i=this.paper.height+"px")&&(d.height=i);f.left!=(i=a-b+"px")&&(f.left=i);f.top!=(i=e-c+"px")&&(f.top=i);f.width!=(i=g+"px")&&(f.width=i);f.height!=(i=h+"px")&&(f.height=i)}};s[p].hide=function(){!this.removed&&(this.Group.style.display="none");return this};s[p].show=function(){!this.removed&&(this.Group.style.display=
"block");return this};s[p].getBBox=function(){if(this.removed)return this;if(qa[y](this.type))return xa(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};s[p].remove=function(){if(!this.removed){la(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=true}};s[p].attr=function(a,b){if(this.removed)return this;
if(a==null){a={};for(var c in this.attrs)if(this.attrs[y](c))a[c]=this.attrs[c];this._.rt.deg&&(a.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(a.scale=this.scale());a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient;return a}if(b==null&&m.is(a,ha)){if(a=="translation")return Aa.call(this);if(a=="rotation")return this.rotate();if(a=="scale")return this.scale();if(a==ca&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[a]}if(this.attrs&&
b==null&&m.is(a,V)){var d={};c=0;for(b=a[o];c<b;c++)d[a[c]]=this.attr(a[c]);return d}if(b!=null){d={};d[a]=b}b==null&&m.is(a,"object")&&(d=a);if(d){if(d.text&&this.type=="text")this.node.string=d.text;ea(this,d);if(d.gradient&&({circle:1,ellipse:1}[y](this.type)||D(d.gradient).charAt()!="r"))oa(this,d.gradient);(!qa[y](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};s[p].toFront=function(){!this.removed&&this.Group.parentNode[x](this.Group);this.paper.top!=this&&Xa(this,this.paper);
return this};s[p].toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);Ya(this,this.paper)}return this};s[p].insertAfter=function(a){if(this.removed)return this;a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode[x](this.Group);Za(this,a,this.paper);return this};s[p].insertBefore=function(a){if(this.removed)return this;a.Group.parentNode.insertBefore(this.Group,
a.Group);$a(this,a,this.paper);return this};var Gb=/ progid:\S+Blur\([^\)]+\)/g;s[p].blur=function(a){var b=this.node.runtimeStyle,c=b.filter;c=c.replace(Gb,A);if(+a!==0){this.attrs.blur=a;b.filter=c+N+Fa+".Blur(pixelradius="+(+a||1.5)+")";b.margin=m.format("-{0}px 0 0 -{0}px",Q(+a||1.5))}else{b.filter=c;b.margin=0;delete this.attrs.blur}};eb=function(a,b,c,d){var f=S("group"),e=S("oval");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";f.coordsize=pa;f.coordorigin=
a.coordorigin;f[x](e);e=new s(e,f,a);e.type="circle";ea(e,{stroke:"#000",fill:"none"});e.attrs.cx=b;e.attrs.cy=c;e.attrs.r=d;e.setBox({x:b-d,y:c-d,width:d*2,height:d*2});a.canvas[x](f);return e};function lb(a,b,c,d,f){return f?m.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a+f,b,c-f*2,f,-f,d-f*2,f*2-c,f*2-d):m.format("M{0},{1}l{2},0,0,{3},{4},0z",a,b,c,d,-c)}fb=function(a,b,c,d,f,e){var h=lb(b,c,d,f,e);a=a.path(h);
var g=a.attrs;a.X=g.x=b;a.Y=g.y=c;a.W=g.width=d;a.H=g.height=f;g.r=e;g.path=h;a.type="rect";return a};gb=function(a,b,c,d,f){var e=S("group"),h=S("oval");e.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";e.coordsize=pa;e.coordorigin=a.coordorigin;e[x](h);h=new s(h,e,a);h.type="ellipse";ea(h,{stroke:"#000"});h.attrs.cx=b;h.attrs.cy=c;h.attrs.rx=d;h.attrs.ry=f;h.setBox({x:b-d,y:c-f,width:d*2,height:f*2});a.canvas[x](e);return h};hb=function(a,b,c,d,f,e){var h=
S("group"),g=S("image");h.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px";h.coordsize=pa;h.coordorigin=a.coordorigin;g.src=b;h[x](g);g=new s(g,h,a);g.type="image";g.attrs.src=b;g.attrs.x=c;g.attrs.y=d;g.attrs.w=f;g.attrs.h=e;g.setBox({x:c,y:d,width:f,height:e});a.canvas[x](h);return g};ib=function(a,b,c,d){var f=S("group"),e=S("shape"),h=e.style,g=S("path"),i=S("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+
"px";f.coordsize=pa;f.coordorigin=a.coordorigin;g.v=m.format("m{0},{1}l{2},{1}",Q(b*10),Q(c*10),Q(b*10)+1);g.textpathok=true;h.width=a.width;h.height=a.height;i.string=D(d);i.on=true;e[x](i);e[x](g);f[x](e);h=new s(i,f,a);h.shape=e;h.textpath=g;h.type="text";h.attrs.text=d;h.attrs.x=b;h.attrs.y=c;h.attrs.w=1;h.attrs.h=1;ea(h,{font:sa.font,stroke:"none",fill:"#000"});h.setBox();a.canvas[x](f);return h};jb=function(a,b){var c=this.canvas.style;a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;
c.clip="rect(0 "+a+" "+b+" 0)";return this};var S;C.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!C.namespaces.rvml&&C.namespaces.add("rvml","urn:schemas-microsoft-com:vml");S=function(a){return C.createElement("<rvml:"+a+' class="rvml">')}}catch(Ob){S=function(a){return C.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Ca=function(){var a=Wa[K](0,arguments),b=a.container,c=a.height,d=a.width,f=a.x;a=a.y;if(!b)throw new Error("VML container not found.");
var e=new G,h=e.canvas=C.createElement("div"),g=h.style;f=f||0;a=a||0;d=d||512;c=c||342;d==+d&&(d+="px");c==+c&&(c+="px");e.width=1e3;e.height=1e3;e.coordsize=ma*1e3+N+ma*1e3;e.coordorigin="0 0";e.span=C.createElement("span");e.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";h[x](e.span);g.cssText=m.format("width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,c);if(b==1){C.body[x](h);
g.left=f+"px";g.top=a+"px";g.position="absolute"}else b.firstChild?b.insertBefore(h,b.firstChild):b[x](h);Ia.call(e,e,m.fn);return e};G[p].clear=function(){this.canvas.innerHTML=A;this.span=C.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[x](this.span);this.bottom=this.top=null};G[p].remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=ab(a);return true}}G[p].safari=
navigator.vendor=="Apple Computer, Inc."&&(navigator.userAgent.match(/Version\/(.*?)\s/)[1]<4||aa.navigator.platform.slice(0,2)=="iP")?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});aa.setTimeout(function(){a.remove()})}:function(){};function Hb(){this.returnValue=false}function Ib(){return this.originalEvent.preventDefault()}function Jb(){this.cancelBubble=true}function Kb(){return this.originalEvent.stopPropagation()}var Lb=function(){if(C.addEventListener)return function(a,
b,c,d){var f=Da&&Ea[b]?Ea[b]:b;function e(h){if(Da&&Ea[y](b))for(var g=0,i=h.targetTouches&&h.targetTouches.length;g<i;g++)if(h.targetTouches[g].target==a){i=h;h=h.targetTouches[g];h.originalEvent=i;h.preventDefault=Ib;h.stopPropagation=Kb;break}return c.call(d,h)}a.addEventListener(f,e,false);return function(){a.removeEventListener(f,e,false);return true}};else if(C.attachEvent)return function(a,b,c,d){function f(h){h=h||aa.event;h.preventDefault=h.preventDefault||Hb;h.stopPropagation=h.stopPropagation||
Jb;return c.call(d,h)}a.attachEvent("on"+b,f);function e(){a.detachEvent("on"+b,f);return true}return e}}(),Y=[];function Ka(a){for(var b=a.clientX,c=a.clientY,d,f=Y.length;f--;){d=Y[f];if(Da)for(var e=a.touches.length,h;e--;){h=a.touches[e];if(h.identifier==d.el._drag.id){b=h.clientX;c=h.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();d.move&&d.move.call(d.el,b-d.el._drag.x,c-d.el._drag.y,b,c)}}function La(){m.unmousemove(Ka).unmouseup(La);for(var a=Y.length,
b;a--;){b=Y[a];b.el._drag={};b.end&&b.end.call(b.el)}Y=[]}for(da=Ra[o];da--;)(function(a){m[a]=s[p][a]=function(b){if(m.is(b,"function")){this.events=this.events||[];this.events.push({name:a,f:b,unbind:Lb(this.shape||this.node||C,a,b,this)})}return this};m["un"+a]=s[p]["un"+a]=function(b){for(var c=this.events,d=c[o];d--;)if(c[d].name==a&&c[d].f==b){c[d].unbind();c.splice(d,1);!c.length&&delete this.events;return this}return this}})(Ra[da]);s[p].hover=function(a,b){return this.mouseover(a).mouseout(b)};
s[p].unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};s[p].drag=function(a,b,c){this._drag={};this.mousedown(function(d){(d.originalEvent||d).preventDefault();this._drag.x=d.clientX;this._drag.y=d.clientY;this._drag.id=d.identifier;b&&b.call(this,d.clientX,d.clientY);!Y.length&&m.mousemove(Ka).mouseup(La);Y.push({el:this,move:a,end:c})});return this};s[p].undrag=function(a,b,c){for(b=Y.length;b--;){Y[b].el==this&&Y[b].move==a&&Y[b].end==c&&Y.splice(b,1);!Y.length&&m.unmousemove(Ka).unmouseup(La)}};
G[p].circle=function(a,b,c){return eb(this,a||0,b||0,c||0)};G[p].rect=function(a,b,c,d,f){return fb(this,a||0,b||0,c||0,d||0,f||0)};G[p].ellipse=function(a,b,c,d){return gb(this,a||0,b||0,c||0,d||0)};G[p].path=function(a){a&&!m.is(a,ha)&&!m.is(a[0],V)&&(a+=A);return cb(m.format[K](m,arguments),this)};G[p].image=function(a,b,c,d,f){return hb(this,a||"about:blank",b||0,c||0,d||0,f||0)};G[p].text=function(a,b,c){return ib(this,a||0,b||0,c||A)};G[p].set=function(a){arguments[o]>1&&(a=Array[p].splice.call(arguments,
0,arguments[o]));return new $(a)};G[p].setSize=jb;G[p].top=G[p].bottom=null;G[p].raphael=m;function mb(){return this.x+N+this.y}s[p].resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};s[p].scale=function(a,b,c,d){if(this.removed)return this;if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:mb};b=b||a;!+b&&(b=a);var f,e,h=this.attrs;if(a!=0){var g=this.getBBox(),i=g.x+g.width/2,j=g.y+g.height/2;f=a/this._.sx;e=b/this._.sy;c=+c||c==0?c:i;d=+d||
d==0?d:j;g=~~(a/v.abs(a));var l=~~(b/v.abs(b)),n=this.node.style,r=c+(i-c)*f;j=d+(j-d)*e;switch(this.type){case "rect":case "image":var q=h.width*g*f,k=h.height*l*e;this.attr({height:k,r:h.r*ba(g*f,l*e),width:q,x:r-q/2,y:j-k/2});break;case "circle":case "ellipse":this.attr({rx:h.rx*g*f,ry:h.ry*l*e,r:h.r*ba(g*f,l*e),cx:r,cy:j});break;case "text":this.attr({x:r,y:j});break;case "path":i=Ha(h.path);for(var t=true,L=0,B=i[o];L<B;L++){var w=i[L],J=ra.call(w[0]);if(!(J=="M"&&t)){t=false;if(J=="A"){w[i[L][o]-
2]*=f;w[i[L][o]-1]*=e;w[1]*=g*f;w[2]*=l*e;w[5]=+!(g+l?!+w[5]:+w[5])}else if(J=="H"){J=1;for(var ia=w[o];J<ia;J++)w[J]*=f}else if(J=="V"){J=1;for(ia=w[o];J<ia;J++)w[J]*=e}else{J=1;for(ia=w[o];J<ia;J++)w[J]*=J%2?f:e}}}e=xa(i);f=r-e.x-e.width/2;e=j-e.y-e.height/2;i[0][1]+=f;i[0][2]+=e;this.attr({path:i});break}if(this.type in{text:1,image:1}&&(g!=1||l!=1))if(this.transformations){this.transformations[2]="scale("[M](g,",",l,")");this.node[X]("transform",this.transformations[R](N));f=g==-1?-h.x-(q||0):
h.x;e=l==-1?-h.y-(k||0):h.y;this.attr({x:f,y:e});h.fx=g-1;h.fy=l-1}else{this.node.filterMatrix=Fa+".Matrix(M11="[M](g,", M12=0, M21=0, M22=",l,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");n.filter=(this.node.filterMatrix||A)+(this.node.filterOpacity||A)}else if(this.transformations){this.transformations[2]=A;this.node[X]("transform",this.transformations[R](N));h.fx=0;h.fy=0}else{this.node.filterMatrix=A;n.filter=(this.node.filterMatrix||A)+(this.node.filterOpacity||A)}h.scale=
[a,b,c,d][R](N);this._.sx=a;this._.sy=b}return this};s[p].clone=function(){if(this.removed)return null;var a=this.attr();delete a.scale;delete a.translation;return this.paper[this.type]().attr(a)};var nb=U(function(a,b,c,d,f,e,h,g,i){for(var j=0,l,n=0;n<1.01;n+=0.01){var r=ka(a,b,c,d,f,e,h,g,n);n&&(j+=E(E(l.x-r.x,2)+E(l.y-r.y,2),0.5));if(j>=i)return r;l=r}});function Ma(a,b){return function(c,d,f){c=wa(c);for(var e,h,g,i,j="",l={},n=0,r=0,q=c.length;r<q;r++){g=c[r];if(g[0]=="M"){e=+g[1];h=+g[2]}else{i=
Mb(e,h,g[1],g[2],g[3],g[4],g[5],g[6]);if(n+i>d){if(b&&!l.start){e=nb(e,h,g[1],g[2],g[3],g[4],g[5],g[6],d-n);j+=["C",e.start.x,e.start.y,e.m.x,e.m.y,e.x,e.y];if(f)return j;l.start=j;j=["M",e.x,e.y+"C",e.n.x,e.n.y,e.end.x,e.end.y,g[5],g[6]][R]();n+=i;e=+g[5];h=+g[6];continue}if(!a&&!b){e=nb(e,h,g[1],g[2],g[3],g[4],g[5],g[6],d-n);return{x:e.x,y:e.y,alpha:e.alpha}}}n+=i;e=+g[5];h=+g[6]}j+=g}l.end=j;e=a?n:b?l:m.findDotsAtSegment(e,h,g[1],g[2],g[3],g[4],g[5],g[6],1);e.alpha&&(e={x:e.x,y:e.y,alpha:e.alpha});
return e}}var Mb=U(function(a,b,c,d,f,e,h,g){for(var i={x:0,y:0},j=0,l=0;l<1.01;l+=0.01){var n=ka(a,b,c,d,f,e,h,g,l);l&&(j+=E(E(i.x-n.x,2)+E(i.y-n.y,2),0.5));i=n}return j}),ob=Ma(1),Ba=Ma(),Na=Ma(0,1);s[p].getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return ob(this.attrs.path)}};s[p].getPointAtLength=function(a){if(this.type=="path"){if(this.node.getPointAtLength)return this.node.getPointAtLength(a);return Ba(this.attrs.path,a)}};s[p].getSubpath=
function(a,b){if(this.type=="path"){if(v.abs(this.getTotalLength()-b)<1E-6)return Na(this.attrs.path,a).end;b=Na(this.attrs.path,b,1);return a?Na(b,a).end:b}};m.easing_formulas={linear:function(a){return a},"<":function(a){return E(a,3)},">":function(a){return E(a-1,3)+1},"<>":function(a){a*=2;if(a<1)return E(a,3)/2;a-=2;return(E(a,3)+2)/2},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==0||a==1)return a;
var b=0.3,c=b/4;return E(2,-10*a)*v.sin((a-c)*2*v.PI/b)+1},bounce:function(a){var b=7.5625,c=2.75;if(a<1/c)a=b*a*a;else if(a<2/c){a-=1.5/c;a=b*a*a+0.75}else if(a<2.5/c){a-=2.25/c;a=b*a*a+0.9375}else{a-=2.625/c;a=b*a*a+0.984375}return a}};var T={length:0};function pb(){var a=+new Date;for(var b in T)if(b!="length"&&T[y](b)){var c=T[b];if(c.stop||c.el.removed){delete T[b];T[o]--}else{var d=a-c.start,f=c.ms,e=c.easing,h=c.from,g=c.diff,i=c.to,j=c.t,l=c.prev||0,n=c.el,r=c.callback,q={},k;if(d<f){r=m.easing_formulas[e]?
m.easing_formulas[e](d/f):d/f;for(var t in h)if(h[y](t)){switch(Ga[t]){case "along":k=r*f*g[t];i.back&&(k=i.len-k);e=Ba(i[t],k);n.translate(g.sx-g.x||0,g.sy-g.y||0);g.x=e.x;g.y=e.y;n.translate(e.x-g.sx,e.y-g.sy);i.rot&&n.rotate(g.r+e.alpha,e.x,e.y);break;case P:k=+h[t]+r*f*g[t];break;case "colour":k="rgb("+[Oa(Q(h[t].r+r*f*g[t].r)),Oa(Q(h[t].g+r*f*g[t].g)),Oa(Q(h[t].b+r*f*g[t].b))][R](",")+")";break;case "path":k=[];e=0;for(var L=h[t][o];e<L;e++){k[e]=[h[t][e][0]];for(var B=1,w=h[t][e][o];B<w;B++)k[e][B]=
+h[t][e][B]+r*f*g[t][e][B];k[e]=k[e][R](N)}k=k[R](N);break;case "csv":switch(t){case "translation":k=g[t][0]*(d-l);e=g[t][1]*(d-l);j.x+=k;j.y+=e;k=k+N+e;break;case "rotation":k=+h[t][0]+r*f*g[t][0];h[t][1]&&(k+=","+h[t][1]+","+h[t][2]);break;case "scale":k=[+h[t][0]+r*f*g[t][0],+h[t][1]+r*f*g[t][1],2 in i[t]?i[t][2]:A,3 in i[t]?i[t][3]:A][R](N);break;case "clip-rect":k=[];for(e=4;e--;)k[e]=+h[t][e]+r*f*g[t][e];break}break}q[t]=k}n.attr(q);n._run&&n._run.call(n)}else{if(i.along){e=Ba(i.along,i.len*
!i.back);n.translate(g.sx-(g.x||0)+e.x-g.sx,g.sy-(g.y||0)+e.y-g.sy);i.rot&&n.rotate(g.r+e.alpha,e.x,e.y)}(j.x||j.y)&&n.translate(-j.x,-j.y);i.scale&&(i.scale+=A);n.attr(i);delete T[b];T[o]--;n.in_animation=null;m.is(r,"function")&&r.call(n)}c.prev=d}}m.svg&&n&&n.paper&&n.paper.safari();T[o]&&aa.setTimeout(pb)}function Oa(a){return Z(ba(a,255),0)}function Aa(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:mb};this._.tx+=+a;this._.ty+=+b;switch(this.type){case "circle":case "ellipse":this.attr({cx:+a+
this.attrs.cx,cy:+b+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case "path":var c=Ha(this.attrs.path);c[0][1]+=+a;c[0][2]+=+b;this.attr({path:c});break}return this}s[p].animateWith=function(a,b,c,d,f){T[a.id]&&(b.start=T[a.id].start);return this.animate(b,c,d,f)};s[p].animateAlong=qb();s[p].animateAlongBack=qb(1);function qb(a){return function(b,c,d,f){var e={back:a};m.is(d,"function")?(f=d):(e.rot=d);b&&b.constructor==s&&(b=b.attrs.path);
b&&(e.along=b);return this.animate(e,c,f)}}s[p].onAnimation=function(a){this._run=a||0;return this};s[p].animate=function(a,b,c,d){if(m.is(c,"function")||!c)d=c||null;var f={},e={},h={};for(var g in a)if(a[y](g))if(Ga[y](g)){f[g]=this.attr(g);f[g]==null&&(f[g]=sa[g]);e[g]=a[g];switch(Ga[g]){case "along":var i=ob(a[g]),j=Ba(a[g],i*!!a.back),l=this.getBBox();h[g]=i/b;h.tx=l.x;h.ty=l.y;h.sx=j.x;h.sy=j.y;e.rot=a.rot;e.back=a.back;e.len=i;a.rot&&(h.r=z(this.rotate())||0);break;case P:h[g]=(e[g]-f[g])/
b;break;case "colour":f[g]=m.getRGB(f[g]);i=m.getRGB(e[g]);h[g]={r:(i.r-f[g].r)/b,g:(i.g-f[g].g)/b,b:(i.b-f[g].b)/b};break;case "path":i=wa(f[g],e[g]);f[g]=i[0];j=i[1];h[g]=[];i=0;for(l=f[g][o];i<l;i++){h[g][i]=[0];for(var n=1,r=f[g][i][o];n<r;n++)h[g][i][n]=(j[i][n]-f[g][i][n])/b}break;case "csv":j=D(a[g])[H](W);i=D(f[g])[H](W);switch(g){case "translation":f[g]=[0,0];h[g]=[j[0]/b,j[1]/b];break;case "rotation":f[g]=i[1]==j[1]&&i[2]==j[2]?i:[0,j[1],j[2]];h[g]=[(j[0]-f[g][0])/b,0,0];break;case "scale":a[g]=
j;f[g]=D(f[g])[H](W);h[g]=[(j[0]-f[g][0])/b,(j[1]-f[g][1])/b,0,0];break;case "clip-rect":f[g]=D(f[g])[H](W);h[g]=[];for(i=4;i--;)h[g][i]=(j[i]-f[g][i])/b;break}e[g]=j}}this.stop();this.in_animation=1;T[this.id]={start:a.start||+new Date,ms:b,easing:c,from:f,diff:h,to:e,el:this,callback:d,t:{x:0,y:0}};++T[o]==1&&pb();return this};s[p].stop=function(){T[this.id]&&T[o]--;delete T[this.id];return this};s[p].translate=function(a,b){return this.attr({translation:a+" "+b})};s[p][O]=function(){return"Rapha\u00ebl\u2019s object"};
m.ae=T;function $(a){this.items=[];this[o]=0;this.type="set";if(a)for(var b=0,c=a[o];b<c;b++)if(a[b]&&(a[b].constructor==s||a[b].constructor==$)){this[this.items[o]]=this.items[this.items[o]]=a[b];this[o]++}}$[p][F]=function(){for(var a,b,c=0,d=arguments[o];c<d;c++)if((a=arguments[c])&&(a.constructor==s||a.constructor==$)){b=this.items[o];this[b]=this.items[b]=a;this[o]++}return this};$[p].pop=function(){delete this[this[o]--];return this.items.pop()};for(var Pa in s[p])if(s[p][y](Pa))$[p][Pa]=function(a){return function(){for(var b=
0,c=this.items[o];b<c;b++)this.items[b][a][K](this.items[b],arguments);return this}}(Pa);$[p].attr=function(a,b){if(a&&m.is(a,V)&&m.is(a[0],"object")){b=0;for(var c=a[o];b<c;b++)this.items[b].attr(a[b])}else{c=0;for(var d=this.items[o];c<d;c++)this.items[c].attr(a,b)}return this};$[p].animate=function(a,b,c,d){(m.is(c,"function")||!c)&&(d=c||null);var f=this.items[o],e=f,h,g=this,i;d&&(i=function(){!--f&&d.call(g)});c=m.is(c,ha)?c:i;for(h=this.items[--e].animate(a,b,c,i);e--;)this.items[e].animateWith(h,
a,b,c,i);return this};$[p].insertAfter=function(a){for(var b=this.items[o];b--;)this.items[b].insertAfter(a);return this};$[p].getBBox=function(){for(var a=[],b=[],c=[],d=[],f=this.items[o];f--;){var e=this.items[f].getBBox();a[F](e.x);b[F](e.y);c[F](e.x+e.width);d[F](e.y+e.height)}a=ba[K](0,a);b=ba[K](0,b);return{x:a,y:b,width:Z[K](0,c)-a,height:Z[K](0,d)-b}};$[p].clone=function(a){a=new $;for(var b=0,c=this.items[o];b<c;b++)a[F](this.items[b].clone());return a};m.registerFont=function(a){if(!a.face)return a;
this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)if(a.face[y](d))b.face[d]=a.face[d];if(this.fonts[c])this.fonts[c][F](b);else this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=ga(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[y](f)){c=a.glyphs[f];b.glyphs[f]={w:c.w,k:{},d:c.d&&"M"+c.d[I](/[mlcxtrv]/g,function(h){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[h]||"M"})+"z"};if(c.k)for(var e in c.k)if(c[y](e))b.glyphs[f].k[e]=c.k[e]}}return a};
G[p].getFont=function(a,b,c,d){d=d||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(m.fonts){var f=m.fonts[a];if(!f){a=new RegExp("(^|\\s)"+a[I](/[^\w\d\s+!~.:_-]/g,A)+"(\\s|$)","i");for(var e in m.fonts)if(m.fonts[y](e))if(a.test(e)){f=m.fonts[e];break}}var h;if(f){e=0;for(a=f[o];e<a;e++){h=f[e];if(h.face["font-weight"]==b&&(h.face["font-style"]==c||!h.face["font-style"])&&h.face["font-stretch"]==d)break}}return h}};G[p].print=function(a,b,c,d,f,e){e=e||"middle";
var h=this.set(),g=D(c)[H](A),i=0;m.is(d,c)&&(d=this.getFont(d));if(d){c=(f||16)/d.face["units-per-em"];var j=d.face.bbox.split(W);f=+j[0];e=+j[1]+(e=="baseline"?j[3]-j[1]+ +d.face.descent:(j[3]-j[1])/2);j=0;for(var l=g[o];j<l;j++){var n=j&&d.glyphs[g[j-1]]||{},r=d.glyphs[g[j]];i+=j?(n.w||d.w)+(n.k&&n.k[g[j]]||0):0;r&&r.d&&h[F](this.path(r.d).attr({fill:"#000",stroke:"none",translation:[i,0]}))}h.scale(c,c,f,e).translate(a-f,b-e)}return h};var Nb=/\{(\d+)\}/g;m.format=function(a,b){var c=m.is(b,V)?
[0][M](b):arguments;a&&m.is(a,ha)&&c[o]-1&&(a=a[I](Nb,function(d,f){return c[++f]==null?A:c[f]}));return a||A};m.ninja=function(){Qa.was?(Raphael=Qa.is):delete Raphael;return m};m.el=s[p];return m}();
</script><script>/*  Prototype JavaScript framework, version 1.7.2
 *  (c) 2005-2010 Sam Stephenson
 *
 *  Prototype is freely distributable under the terms of an MIT-style license.
 *  For details, see the Prototype web site: http://www.prototypejs.org/
 *
 *--------------------------------------------------------------------------*/

var Prototype = {

  Version: '1.7.2',

  Browser: (function(){
    var ua = navigator.userAgent;
    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';
    return {
      IE:             !!window.attachEvent && !isOpera,
      Opera:          isOpera,
      WebKit:         ua.indexOf('AppleWebKit/') > -1,
      Gecko:          ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1,
      MobileSafari:   /Apple.*Mobile/.test(ua)
    }
  })(),

  BrowserFeatures: {
    XPath: !!document.evaluate,

    SelectorsAPI: !!document.querySelector,

    ElementExtensions: (function() {
      var constructor = window.Element || window.HTMLElement;
      return !!(constructor && constructor.prototype);
    })(),
    SpecificElementExtensions: (function() {
      if (typeof window.HTMLDivElement !== 'undefined')
        return true;

      var div = document.createElement('div'),
          form = document.createElement('form'),
          isSupported = false;

      if (div['__proto__'] && (div['__proto__'] !== form['__proto__'])) {
        isSupported = true;
      }

      div = form = null;

      return isSupported;
    })()
  },

  ScriptFragment: '<script[^>]*>([\\S\\s]*?)<\/script\\s*>',
  JSONFilter: /^\/\*-secure-([\s\S]*)\*\/\s*$/,

  emptyFunction: function() { },

  K: function(x) { return x }
};

if (Prototype.Browser.MobileSafari)
  Prototype.BrowserFeatures.SpecificElementExtensions = false;
/* Based on Alex Arnell's inheritance implementation. */

var Class = (function() {

  var IS_DONTENUM_BUGGY = (function(){
    for (var p in { toString: 1 }) {
      if (p === 'toString') return false;
    }
    return true;
  })();

  function subclass() {};
  function create() {
    var parent = null, properties = $A(arguments);
    if (Object.isFunction(properties[0]))
      parent = properties.shift();

    function klass() {
      this.initialize.apply(this, arguments);
    }

    Object.extend(klass, Class.Methods);
    klass.superclass = parent;
    klass.subclasses = [];

    if (parent) {
      subclass.prototype = parent.prototype;
      klass.prototype = new subclass;
      parent.subclasses.push(klass);
    }

    for (var i = 0, length = properties.length; i < length; i++)
      klass.addMethods(properties[i]);

    if (!klass.prototype.initialize)
      klass.prototype.initialize = Prototype.emptyFunction;

    klass.prototype.constructor = klass;
    return klass;
  }

  function addMethods(source) {
    var ancestor   = this.superclass && this.superclass.prototype,
        properties = Object.keys(source);

    if (IS_DONTENUM_BUGGY) {
      if (source.toString != Object.prototype.toString)
        properties.push("toString");
      if (source.valueOf != Object.prototype.valueOf)
        properties.push("valueOf");
    }

    for (var i = 0, length = properties.length; i < length; i++) {
      var property = properties[i], value = source[property];
      if (ancestor && Object.isFunction(value) &&
          value.argumentNames()[0] == "$super") {
        var method = value;
        value = (function(m) {
          return function() { return ancestor[m].apply(this, arguments); };
        })(property).wrap(method);

        value.valueOf = (function(method) {
          return function() { return method.valueOf.call(method); };
        })(method);

        value.toString = (function(method) {
          return function() { return method.toString.call(method); };
        })(method);
      }
      this.prototype[property] = value;
    }

    return this;
  }

  return {
    create: create,
    Methods: {
      addMethods: addMethods
    }
  };
})();
(function() {

  var _toString = Object.prototype.toString,
      _hasOwnProperty = Object.prototype.hasOwnProperty,
      NULL_TYPE = 'Null',
      UNDEFINED_TYPE = 'Undefined',
      BOOLEAN_TYPE = 'Boolean',
      NUMBER_TYPE = 'Number',
      STRING_TYPE = 'String',
      OBJECT_TYPE = 'Object',
      FUNCTION_CLASS = '[object Function]',
      BOOLEAN_CLASS = '[object Boolean]',
      NUMBER_CLASS = '[object Number]',
      STRING_CLASS = '[object String]',
      ARRAY_CLASS = '[object Array]',
      DATE_CLASS = '[object Date]',
      NATIVE_JSON_STRINGIFY_SUPPORT = window.JSON &&
        typeof JSON.stringify === 'function' &&
        JSON.stringify(0) === '0' &&
        typeof JSON.stringify(Prototype.K) === 'undefined';



  var DONT_ENUMS = ['toString', 'toLocaleString', 'valueOf',
   'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];

  var IS_DONTENUM_BUGGY = (function(){
    for (var p in { toString: 1 }) {
      if (p === 'toString') return false;
    }
    return true;
  })();

  function Type(o) {
    switch(o) {
      case null: return NULL_TYPE;
      case (void 0): return UNDEFINED_TYPE;
    }
    var type = typeof o;
    switch(type) {
      case 'boolean': return BOOLEAN_TYPE;
      case 'number':  return NUMBER_TYPE;
      case 'string':  return STRING_TYPE;
    }
    return OBJECT_TYPE;
  }

  function extend(destination, source) {
    for (var property in source)
      destination[property] = source[property];
    return destination;
  }

  function inspect(object) {
    try {
      if (isUndefined(object)) return 'undefined';
      if (object === null) return 'null';
      return object.inspect ? object.inspect() : String(object);
    } catch (e) {
      if (e instanceof RangeError) return '...';
      throw e;
    }
  }

  function toJSON(value) {
    return Str('', { '': value }, []);
  }

  function Str(key, holder, stack) {
    var value = holder[key];
    if (Type(value) === OBJECT_TYPE && typeof value.toJSON === 'function') {
      value = value.toJSON(key);
    }

    var _class = _toString.call(value);

    switch (_class) {
      case NUMBER_CLASS:
      case BOOLEAN_CLASS:
      case STRING_CLASS:
        value = value.valueOf();
    }

    switch (value) {
      case null: return 'null';
      case true: return 'true';
      case false: return 'false';
    }

    var type = typeof value;
    switch (type) {
      case 'string':
        return value.inspect(true);
      case 'number':
        return isFinite(value) ? String(value) : 'null';
      case 'object':

        for (var i = 0, length = stack.length; i < length; i++) {
          if (stack[i] === value) {
            throw new TypeError("Cyclic reference to '" + value + "' in object");
          }
        }
        stack.push(value);

        var partial = [];
        if (_class === ARRAY_CLASS) {
          for (var i = 0, length = value.length; i < length; i++) {
            var str = Str(i, value, stack);
            partial.push(typeof str === 'undefined' ? 'null' : str);
          }
          partial = '[' + partial.join(',') + ']';
        } else {
          var keys = Object.keys(value);
          for (var i = 0, length = keys.length; i < length; i++) {
            var key = keys[i], str = Str(key, value, stack);
            if (typeof str !== "undefined") {
               partial.push(key.inspect(true)+ ':' + str);
             }
          }
          partial = '{' + partial.join(',') + '}';
        }
        stack.pop();
        return partial;
    }
  }

  function stringify(object) {
    return JSON.stringify(object);
  }

  function toQueryString(object) {
    return $H(object).toQueryString();
  }

  function toHTML(object) {
    return object && object.toHTML ? object.toHTML() : String.interpret(object);
  }

  function keys(object) {
    if (Type(object) !== OBJECT_TYPE) { throw new TypeError(); }
    var results = [];
    for (var property in object) {
      if (_hasOwnProperty.call(object, property))
        results.push(property);
    }

    if (IS_DONTENUM_BUGGY) {
      for (var i = 0; property = DONT_ENUMS[i]; i++) {
        if (_hasOwnProperty.call(object, property))
          results.push(property);
      }
    }

    return results;
  }

  function values(object) {
    var results = [];
    for (var property in object)
      results.push(object[property]);
    return results;
  }

  function clone(object) {
    return extend({ }, object);
  }

  function isElement(object) {
    return !!(object && object.nodeType == 1);
  }

  function isArray(object) {
    return _toString.call(object) === ARRAY_CLASS;
  }

  var hasNativeIsArray = (typeof Array.isArray == 'function')
    && Array.isArray([]) && !Array.isArray({});

  if (hasNativeIsArray) {
    isArray = Array.isArray;
  }

  function isHash(object) {
    return object instanceof Hash;
  }

  function isFunction(object) {
    return _toString.call(object) === FUNCTION_CLASS;
  }

  function isString(object) {
    return _toString.call(object) === STRING_CLASS;
  }

  function isNumber(object) {
    return _toString.call(object) === NUMBER_CLASS;
  }

  function isDate(object) {
    return _toString.call(object) === DATE_CLASS;
  }

  function isUndefined(object) {
    return typeof object === "undefined";
  }

  extend(Object, {
    extend:        extend,
    inspect:       inspect,
    toJSON:        NATIVE_JSON_STRINGIFY_SUPPORT ? stringify : toJSON,
    toQueryString: toQueryString,
    toHTML:        toHTML,
    keys:          Object.keys || keys,
    values:        values,
    clone:         clone,
    isElement:     isElement,
    isArray:       isArray,
    isHash:        isHash,
    isFunction:    isFunction,
    isString:      isString,
    isNumber:      isNumber,
    isDate:        isDate,
    isUndefined:   isUndefined
  });
})();
Object.extend(Function.prototype, (function() {
  var slice = Array.prototype.slice;

  function update(array, args) {
    var arrayLength = array.length, length = args.length;
    while (length--) array[arrayLength + length] = args[length];
    return array;
  }

  function merge(array, args) {
    array = slice.call(array, 0);
    return update(array, args);
  }

  function argumentNames() {
    var names = this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1]
      .replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g, '')
      .replace(/\s+/g, '').split(',');
    return names.length == 1 && !names[0] ? [] : names;
  }


  function bind(context) {
    if (arguments.length < 2 && Object.isUndefined(arguments[0]))
      return this;

    if (!Object.isFunction(this))
      throw new TypeError("The object is not callable.");

    var nop = function() {};
    var __method = this, args = slice.call(arguments, 1);

    var bound = function() {
      var a = merge(args, arguments);
      var c = this instanceof bound ? this : context;
      return __method.apply(c, a);
    };

    nop.prototype   = this.prototype;
    bound.prototype = new nop();

    return bound;
  }

  function bindAsEventListener(context) {
    var __method = this, args = slice.call(arguments, 1);
    return function(event) {
      var a = update([event || window.event], args);
      return __method.apply(context, a);
    }
  }

  function curry() {
    if (!arguments.length) return this;
    var __method = this, args = slice.call(arguments, 0);
    return function() {
      var a = merge(args, arguments);
      return __method.apply(this, a);
    }
  }

  function delay(timeout) {
    var __method = this, args = slice.call(arguments, 1);
    timeout = timeout * 1000;
    return window.setTimeout(function() {
      return __method.apply(__method, args);
    }, timeout);
  }

  function defer() {
    var args = update([0.01], arguments);
    return this.delay.apply(this, args);
  }

  function wrap(wrapper) {
    var __method = this;
    return function() {
      var a = update([__method.bind(this)], arguments);
      return wrapper.apply(this, a);
    }
  }

  function methodize() {
    if (this._methodized) return this._methodized;
    var __method = this;
    return this._methodized = function() {
      var a = update([this], arguments);
      return __method.apply(null, a);
    };
  }

  var extensions = {
    argumentNames:       argumentNames,
    bindAsEventListener: bindAsEventListener,
    curry:               curry,
    delay:               delay,
    defer:               defer,
    wrap:                wrap,
    methodize:           methodize
  };

  if (!Function.prototype.bind)
    extensions.bind = bind;

  return extensions;
})());



(function(proto) {


  function toISOString() {
    return this.getUTCFullYear() + '-' +
      (this.getUTCMonth() + 1).toPaddedString(2) + '-' +
      this.getUTCDate().toPaddedString(2) + 'T' +
      this.getUTCHours().toPaddedString(2) + ':' +
      this.getUTCMinutes().toPaddedString(2) + ':' +
      this.getUTCSeconds().toPaddedString(2) + 'Z';
  }


  function toJSON() {
    return this.toISOString();
  }

  if (!proto.toISOString) proto.toISOString = toISOString;
  if (!proto.toJSON) proto.toJSON = toJSON;

})(Date.prototype);


RegExp.prototype.match = RegExp.prototype.test;

RegExp.escape = function(str) {
  return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
};
var PeriodicalExecuter = Class.create({
  initialize: function(callback, frequency) {
    this.callback = callback;
    this.frequency = frequency;
    this.currentlyExecuting = false;

    this.registerCallback();
  },

  registerCallback: function() {
    this.timer = setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
  },

  execute: function() {
    this.callback(this);
  },

  stop: function() {
    if (!this.timer) return;
    clearInterval(this.timer);
    this.timer = null;
  },

  onTimerEvent: function() {
    if (!this.currentlyExecuting) {
      try {
        this.currentlyExecuting = true;
        this.execute();
        this.currentlyExecuting = false;
      } catch(e) {
        this.currentlyExecuting = false;
        throw e;
      }
    }
  }
});
Object.extend(String, {
  interpret: function(value) {
    return value == null ? '' : String(value);
  },
  specialChar: {
    '\b': '\\b',
    '\t': '\\t',
    '\n': '\\n',
    '\f': '\\f',
    '\r': '\\r',
    '\\': '\\\\'
  }
});

Object.extend(String.prototype, (function() {
  var NATIVE_JSON_PARSE_SUPPORT = window.JSON &&
    typeof JSON.parse === 'function' &&
    JSON.parse('{"test": true}').test;

  function prepareReplacement(replacement) {
    if (Object.isFunction(replacement)) return replacement;
    var template = new Template(replacement);
    return function(match) { return template.evaluate(match) };
  }

  function isNonEmptyRegExp(regexp) {
    return regexp.source && regexp.source !== '(?:)';
  }


  function gsub(pattern, replacement) {
    var result = '', source = this, match;
    replacement = prepareReplacement(replacement);

    if (Object.isString(pattern))
      pattern = RegExp.escape(pattern);

    if (!(pattern.length || isNonEmptyRegExp(pattern))) {
      replacement = replacement('');
      return replacement + source.split('').join(replacement) + replacement;
    }

    while (source.length > 0) {
      match = source.match(pattern)
      if (match && match[0].length > 0) {
        result += source.slice(0, match.index);
        result += String.interpret(replacement(match));
        source  = source.slice(match.index + match[0].length);
      } else {
        result += source, source = '';
      }
    }
    return result;
  }

  function sub(pattern, replacement, count) {
    replacement = prepareReplacement(replacement);
    count = Object.isUndefined(count) ? 1 : count;

    return this.gsub(pattern, function(match) {
      if (--count < 0) return match[0];
      return replacement(match);
    });
  }

  function scan(pattern, iterator) {
    this.gsub(pattern, iterator);
    return String(this);
  }

  function truncate(length, truncation) {
    length = length || 30;
    truncation = Object.isUndefined(truncation) ? '...' : truncation;
    return this.length > length ?
      this.slice(0, length - truncation.length) + truncation : String(this);
  }

  function strip() {
    return this.replace(/^\s+/, '').replace(/\s+$/, '');
  }

  function stripTags() {
    return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi, '');
  }

  function stripScripts() {
    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');
  }

  function extractScripts() {
    var matchAll = new RegExp(Prototype.ScriptFragment, 'img'),
        matchOne = new RegExp(Prototype.ScriptFragment, 'im');
    return (this.match(matchAll) || []).map(function(scriptTag) {
      return (scriptTag.match(matchOne) || ['', ''])[1];
    });
  }

  function evalScripts() {
    return this.extractScripts().map(function(script) { return eval(script); });
  }

  function escapeHTML() {
    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  function unescapeHTML() {
    return this.stripTags().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
  }


  function toQueryParams(separator) {
    var match = this.strip().match(/([^?#]*)(#.*)?$/);
    if (!match) return { };

    return match[1].split(separator || '&').inject({ }, function(hash, pair) {
      if ((pair = pair.split('='))[0]) {
        var key = decodeURIComponent(pair.shift()),
            value = pair.length > 1 ? pair.join('=') : pair[0];

        if (value != undefined) {
          value = value.gsub('+', ' ');
          value = decodeURIComponent(value);
        }

        if (key in hash) {
          if (!Object.isArray(hash[key])) hash[key] = [hash[key]];
          hash[key].push(value);
        }
        else hash[key] = value;
      }
      return hash;
    });
  }

  function toArray() {
    return this.split('');
  }

  function succ() {
    return this.slice(0, this.length - 1) +
      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);
  }

  function times(count) {
    return count < 1 ? '' : new Array(count + 1).join(this);
  }

  function camelize() {
    return this.replace(/-+(.)?/g, function(match, chr) {
      return chr ? chr.toUpperCase() : '';
    });
  }

  function capitalize() {
    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();
  }

  function underscore() {
    return this.replace(/::/g, '/')
               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')
               .replace(/([a-z\d])([A-Z])/g, '$1_$2')
               .replace(/-/g, '_')
               .toLowerCase();
  }

  function dasherize() {
    return this.replace(/_/g, '-');
  }

  function inspect(useDoubleQuotes) {
    var escapedString = this.replace(/[\x00-\x1f\\]/g, function(character) {
      if (character in String.specialChar) {
        return String.specialChar[character];
      }
      return '\\u00' + character.charCodeAt().toPaddedString(2, 16);
    });
    if (useDoubleQuotes) return '"' + escapedString.replace(/"/g, '\\"') + '"';
    return "'" + escapedString.replace(/'/g, '\\\'') + "'";
  }

  function unfilterJSON(filter) {
    return this.replace(filter || Prototype.JSONFilter, '$1');
  }

  function isJSON() {
    var str = this;
    if (str.blank()) return false;
    str = str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@');
    str = str.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']');
    str = str.replace(/(?:^|:|,)(?:\s*\[)+/g, '');
    return (/^[\],:{}\s]*$/).test(str);
  }

  function evalJSON(sanitize) {
    var json = this.unfilterJSON(),
        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
    if (cx.test(json)) {
      json = json.replace(cx, function (a) {
        return '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
      });
    }
    try {
      if (!sanitize || json.isJSON()) return eval('(' + json + ')');
    } catch (e) { }
    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());
  }

  function parseJSON() {
    var json = this.unfilterJSON();
    return JSON.parse(json);
  }

  function include(pattern) {
    return this.indexOf(pattern) > -1;
  }

  function startsWith(pattern, position) {
    position = Object.isNumber(position) ? position : 0;
    return this.lastIndexOf(pattern, position) === position;
  }

  function endsWith(pattern, position) {
    pattern = String(pattern);
    position = Object.isNumber(position) ? position : this.length;
    if (position < 0) position = 0;
    if (position > this.length) position = this.length;
    var d = position - pattern.length;
    return d >= 0 && this.indexOf(pattern, d) === d;
  }

  function empty() {
    return this == '';
  }

  function blank() {
    return /^\s*$/.test(this);
  }

  function interpolate(object, pattern) {
    return new Template(this, pattern).evaluate(object);
  }

  return {
    gsub:           gsub,
    sub:            sub,
    scan:           scan,
    truncate:       truncate,
    strip:          String.prototype.trim || strip,
    stripTags:      stripTags,
    stripScripts:   stripScripts,
    extractScripts: extractScripts,
    evalScripts:    evalScripts,
    escapeHTML:     escapeHTML,
    unescapeHTML:   unescapeHTML,
    toQueryParams:  toQueryParams,
    parseQuery:     toQueryParams,
    toArray:        toArray,
    succ:           succ,
    times:          times,
    camelize:       camelize,
    capitalize:     capitalize,
    underscore:     underscore,
    dasherize:      dasherize,
    inspect:        inspect,
    unfilterJSON:   unfilterJSON,
    isJSON:         isJSON,
    evalJSON:       NATIVE_JSON_PARSE_SUPPORT ? parseJSON : evalJSON,
    include:        include,
    startsWith:     String.prototype.startsWith || startsWith,
    endsWith:       String.prototype.endsWith || endsWith,
    empty:          empty,
    blank:          blank,
    interpolate:    interpolate
  };
})());

var Template = Class.create({
  initialize: function(template, pattern) {
    this.template = template.toString();
    this.pattern = pattern || Template.Pattern;
  },

  evaluate: function(object) {
    if (object && Object.isFunction(object.toTemplateReplacements))
      object = object.toTemplateReplacements();

    return this.template.gsub(this.pattern, function(match) {
      if (object == null) return (match[1] + '');

      var before = match[1] || '';
      if (before == '\\') return match[2];

      var ctx = object, expr = match[3],
          pattern = /^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;

      match = pattern.exec(expr);
      if (match == null) return before;

      while (match != null) {
        var comp = match[1].startsWith('[') ? match[2].replace(/\\\\]/g, ']') : match[1];
        ctx = ctx[comp];
        if (null == ctx || '' == match[3]) break;
        expr = expr.substring('[' == match[3] ? match[1].length : match[0].length);
        match = pattern.exec(expr);
      }

      return before + String.interpret(ctx);
    });
  }
});
Template.Pattern = /(^|.|\r|\n)(#\{(.*?)\})/;

var $break = { };

var Enumerable = (function() {
  function each(iterator, context) {
    try {
      this._each(iterator, context);
    } catch (e) {
      if (e != $break) throw e;
    }
    return this;
  }

  function eachSlice(number, iterator, context) {
    var index = -number, slices = [], array = this.toArray();
    if (number < 1) return array;
    while ((index += number) < array.length)
      slices.push(array.slice(index, index+number));
    return slices.collect(iterator, context);
  }

  function all(iterator, context) {
    iterator = iterator || Prototype.K;
    var result = true;
    this.each(function(value, index) {
      result = result && !!iterator.call(context, value, index, this);
      if (!result) throw $break;
    }, this);
    return result;
  }

  function any(iterator, context) {
    iterator = iterator || Prototype.K;
    var result = false;
    this.each(function(value, index) {
      if (result = !!iterator.call(context, value, index, this))
        throw $break;
    }, this);
    return result;
  }

  function collect(iterator, context) {
    iterator = iterator || Prototype.K;
    var results = [];
    this.each(function(value, index) {
      results.push(iterator.call(context, value, index, this));
    }, this);
    return results;
  }

  function detect(iterator, context) {
    var result;
    this.each(function(value, index) {
      if (iterator.call(context, value, index, this)) {
        result = value;
        throw $break;
      }
    }, this);
    return result;
  }

  function findAll(iterator, context) {
    var results = [];
    this.each(function(value, index) {
      if (iterator.call(context, value, index, this))
        results.push(value);
    }, this);
    return results;
  }

  function grep(filter, iterator, context) {
    iterator = iterator || Prototype.K;
    var results = [];

    if (Object.isString(filter))
      filter = new RegExp(RegExp.escape(filter));

    this.each(function(value, index) {
      if (filter.match(value))
        results.push(iterator.call(context, value, index, this));
    }, this);
    return results;
  }

  function include(object) {
    if (Object.isFunction(this.indexOf) && this.indexOf(object) != -1)
      return true;

    var found = false;
    this.each(function(value) {
      if (value == object) {
        found = true;
        throw $break;
      }
    });
    return found;
  }

  function inGroupsOf(number, fillWith) {
    fillWith = Object.isUndefined(fillWith) ? null : fillWith;
    return this.eachSlice(number, function(slice) {
      while(slice.length < number) slice.push(fillWith);
      return slice;
    });
  }

  function inject(memo, iterator, context) {
    this.each(function(value, index) {
      memo = iterator.call(context, memo, value, index, this);
    }, this);
    return memo;
  }

  function invoke(method) {
    var args = $A(arguments).slice(1);
    return this.map(function(value) {
      return value[method].apply(value, args);
    });
  }

  function max(iterator, context) {
    iterator = iterator || Prototype.K;
    var result;
    this.each(function(value, index) {
      value = iterator.call(context, value, index, this);
      if (result == null || value >= result)
        result = value;
    }, this);
    return result;
  }

  function min(iterator, context) {
    iterator = iterator || Prototype.K;
    var result;
    this.each(function(value, index) {
      value = iterator.call(context, value, index, this);
      if (result == null || value < result)
        result = value;
    }, this);
    return result;
  }

  function partition(iterator, context) {
    iterator = iterator || Prototype.K;
    var trues = [], falses = [];
    this.each(function(value, index) {
      (iterator.call(context, value, index, this) ?
        trues : falses).push(value);
    }, this);
    return [trues, falses];
  }

  function pluck(property) {
    var results = [];
    this.each(function(value) {
      results.push(value[property]);
    });
    return results;
  }

  function reject(iterator, context) {
    var results = [];
    this.each(function(value, index) {
      if (!iterator.call(context, value, index, this))
        results.push(value);
    }, this);
    return results;
  }

  function sortBy(iterator, context) {
    return this.map(function(value, index) {
      return {
        value: value,
        criteria: iterator.call(context, value, index, this)
      };
    }, this).sort(function(left, right) {
      var a = left.criteria, b = right.criteria;
      return a < b ? -1 : a > b ? 1 : 0;
    }).pluck('value');
  }

  function toArray() {
    return this.map();
  }

  function zip() {
    var iterator = Prototype.K, args = $A(arguments);
    if (Object.isFunction(args.last()))
      iterator = args.pop();

    var collections = [this].concat(args).map($A);
    return this.map(function(value, index) {
      return iterator(collections.pluck(index));
    });
  }

  function size() {
    return this.toArray().length;
  }

  function inspect() {
    return '#<Enumerable:' + this.toArray().inspect() + '>';
  }









  return {
    each:       each,
    eachSlice:  eachSlice,
    all:        all,
    every:      all,
    any:        any,
    some:       any,
    collect:    collect,
    map:        collect,
    detect:     detect,
    findAll:    findAll,
    select:     findAll,
    filter:     findAll,
    grep:       grep,
    include:    include,
    member:     include,
    inGroupsOf: inGroupsOf,
    inject:     inject,
    invoke:     invoke,
    max:        max,
    min:        min,
    partition:  partition,
    pluck:      pluck,
    reject:     reject,
    sortBy:     sortBy,
    toArray:    toArray,
    entries:    toArray,
    zip:        zip,
    size:       size,
    inspect:    inspect,
    find:       detect
  };
})();

function $A(iterable) {
  if (!iterable) return [];
  if ('toArray' in Object(iterable)) return iterable.toArray();
  var length = iterable.length || 0, results = new Array(length);
  while (length--) results[length] = iterable[length];
  return results;
}


function $w(string) {
  if (!Object.isString(string)) return [];
  string = string.strip();
  return string ? string.split(/\s+/) : [];
}

Array.from = $A;


(function() {
  var arrayProto = Array.prototype,
      slice = arrayProto.slice,
      _each = arrayProto.forEach; // use native browser JS 1.6 implementation if available

  function each(iterator, context) {
    for (var i = 0, length = this.length >>> 0; i < length; i++) {
      if (i in this) iterator.call(context, this[i], i, this);
    }
  }
  if (!_each) _each = each;

  function clear() {
    this.length = 0;
    return this;
  }

  function first() {
    return this[0];
  }

  function last() {
    return this[this.length - 1];
  }

  function compact() {
    return this.select(function(value) {
      return value != null;
    });
  }

  function flatten() {
    return this.inject([], function(array, value) {
      if (Object.isArray(value))
        return array.concat(value.flatten());
      array.push(value);
      return array;
    });
  }

  function without() {
    var values = slice.call(arguments, 0);
    return this.select(function(value) {
      return !values.include(value);
    });
  }

  function reverse(inline) {
    return (inline === false ? this.toArray() : this)._reverse();
  }

  function uniq(sorted) {
    return this.inject([], function(array, value, index) {
      if (0 == index || (sorted ? array.last() != value : !array.include(value)))
        array.push(value);
      return array;
    });
  }

  function intersect(array) {
    return this.uniq().findAll(function(item) {
      return array.indexOf(item) !== -1;
    });
  }


  function clone() {
    return slice.call(this, 0);
  }

  function size() {
    return this.length;
  }

  function inspect() {
    return '[' + this.map(Object.inspect).join(', ') + ']';
  }

  function indexOf(item, i) {
    if (this == null) throw new TypeError();

    var array = Object(this), length = array.length >>> 0;
    if (length === 0) return -1;

    i = Number(i);
    if (isNaN(i)) {
      i = 0;
    } else if (i !== 0 && isFinite(i)) {
      i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));
    }

    if (i > length) return -1;

    var k = i >= 0 ? i : Math.max(length - Math.abs(i), 0);
    for (; k < length; k++)
      if (k in array && array[k] === item) return k;
    return -1;
  }


  function lastIndexOf(item, i) {
    if (this == null) throw new TypeError();

    var array = Object(this), length = array.length >>> 0;
    if (length === 0) return -1;

    if (!Object.isUndefined(i)) {
      i = Number(i);
      if (isNaN(i)) {
        i = 0;
      } else if (i !== 0 && isFinite(i)) {
        i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));
      }
    } else {
      i = length;
    }

    var k = i >= 0 ? Math.min(i, length - 1) :
     length - Math.abs(i);

    for (; k >= 0; k--)
      if (k in array && array[k] === item) return k;
    return -1;
  }

  function concat(_) {
    var array = [], items = slice.call(arguments, 0), item, n = 0;
    items.unshift(this);
    for (var i = 0, length = items.length; i < length; i++) {
      item = items[i];
      if (Object.isArray(item) && !('callee' in item)) {
        for (var j = 0, arrayLength = item.length; j < arrayLength; j++) {
          if (j in item) array[n] = item[j];
          n++;
        }
      } else {
        array[n++] = item;
      }
    }
    array.length = n;
    return array;
  }


  function wrapNative(method) {
    return function() {
      if (arguments.length === 0) {
        return method.call(this, Prototype.K);
      } else if (arguments[0] === undefined) {
        var args = slice.call(arguments, 1);
        args.unshift(Prototype.K);
        return method.apply(this, args);
      } else {
        return method.apply(this, arguments);
      }
    };
  }


  function map(iterator) {
    if (this == null) throw new TypeError();
    iterator = iterator || Prototype.K;

    var object = Object(this);
    var results = [], context = arguments[1], n = 0;

    for (var i = 0, length = object.length >>> 0; i < length; i++) {
      if (i in object) {
        results[n] = iterator.call(context, object[i], i, object);
      }
      n++;
    }
    results.length = n;
    return results;
  }

  if (arrayProto.map) {
    map = wrapNative(Array.prototype.map);
  }

  function filter(iterator) {
    if (this == null || !Object.isFunction(iterator))
      throw new TypeError();

    var object = Object(this);
    var results = [], context = arguments[1], value;

    for (var i = 0, length = object.length >>> 0; i < length; i++) {
      if (i in object) {
        value = object[i];
        if (iterator.call(context, value, i, object)) {
          results.push(value);
        }
      }
    }
    return results;
  }

  if (arrayProto.filter) {
    filter = Array.prototype.filter;
  }

  function some(iterator) {
    if (this == null) throw new TypeError();
    iterator = iterator || Prototype.K;
    var context = arguments[1];

    var object = Object(this);
    for (var i = 0, length = object.length >>> 0; i < length; i++) {
      if (i in object && iterator.call(context, object[i], i, object)) {
        return true;
      }
    }

    return false;
  }

  if (arrayProto.some) {
    var some = wrapNative(Array.prototype.some);
  }


  function every(iterator) {
    if (this == null) throw new TypeError();
    iterator = iterator || Prototype.K;
    var context = arguments[1];

    var object = Object(this);
    for (var i = 0, length = object.length >>> 0; i < length; i++) {
      if (i in object && !iterator.call(context, object[i], i, object)) {
        return false;
      }
    }

    return true;
  }

  if (arrayProto.every) {
    var every = wrapNative(Array.prototype.every);
  }

  var _reduce = arrayProto.reduce;
  function inject(memo, iterator) {
    iterator = iterator || Prototype.K;
    var context = arguments[2];
    return _reduce.call(this, iterator.bind(context), memo);
  }

  if (!arrayProto.reduce) {
    var inject = Enumerable.inject;
  }

  Object.extend(arrayProto, Enumerable);

  if (!arrayProto._reverse)
    arrayProto._reverse = arrayProto.reverse;

  Object.extend(arrayProto, {
    _each:     _each,

    map:       map,
    collect:   map,
    select:    filter,
    filter:    filter,
    findAll:   filter,
    some:      some,
    any:       some,
    every:     every,
    all:       every,
    inject:    inject,

    clear:     clear,
    first:     first,
    last:      last,
    compact:   compact,
    flatten:   flatten,
    without:   without,
    reverse:   reverse,
    uniq:      uniq,
    intersect: intersect,
    clone:     clone,
    toArray:   clone,
    size:      size,
    inspect:   inspect
  });

  var CONCAT_ARGUMENTS_BUGGY = (function() {
    return [].concat(arguments)[0][0] !== 1;
  })(1,2);

  if (CONCAT_ARGUMENTS_BUGGY) arrayProto.concat = concat;

  if (!arrayProto.indexOf) arrayProto.indexOf = indexOf;
  if (!arrayProto.lastIndexOf) arrayProto.lastIndexOf = lastIndexOf;
})();
function $H(object) {
  return new Hash(object);
};

var Hash = Class.create(Enumerable, (function() {
  function initialize(object) {
    this._object = Object.isHash(object) ? object.toObject() : Object.clone(object);
  }


  function _each(iterator, context) {
    var i = 0;
    for (var key in this._object) {
      var value = this._object[key], pair = [key, value];
      pair.key = key;
      pair.value = value;
      iterator.call(context, pair, i);
      i++;
    }
  }

  function set(key, value) {
    return this._object[key] = value;
  }

  function get(key) {
    if (this._object[key] !== Object.prototype[key])
      return this._object[key];
  }

  function unset(key) {
    var value = this._object[key];
    delete this._object[key];
    return value;
  }

  function toObject() {
    return Object.clone(this._object);
  }



  function keys() {
    return this.pluck('key');
  }

  function values() {
    return this.pluck('value');
  }

  function index(value) {
    var match = this.detect(function(pair) {
      return pair.value === value;
    });
    return match && match.key;
  }

  function merge(object) {
    return this.clone().update(object);
  }

  function update(object) {
    return new Hash(object).inject(this, function(result, pair) {
      result.set(pair.key, pair.value);
      return result;
    });
  }

  function toQueryPair(key, value) {
    if (Object.isUndefined(value)) return key;

    value = String.interpret(value);

    value = value.gsub(/(\r)?\n/, '\r\n');
    value = encodeURIComponent(value);
    value = value.gsub(/%20/, '+');
    return key + '=' + value;
  }

  function toQueryString() {
    return this.inject([], function(results, pair) {
      var key = encodeURIComponent(pair.key), values = pair.value;

      if (values && typeof values == 'object') {
        if (Object.isArray(values)) {
          var queryValues = [];
          for (var i = 0, len = values.length, value; i < len; i++) {
            value = values[i];
            queryValues.push(toQueryPair(key, value));
          }
          return results.concat(queryValues);
        }
      } else results.push(toQueryPair(key, values));
      return results;
    }).join('&');
  }

  function inspect() {
    return '#<Hash:{' + this.map(function(pair) {
      return pair.map(Object.inspect).join(': ');
    }).join(', ') + '}>';
  }

  function clone() {
    return new Hash(this);
  }

  return {
    initialize:             initialize,
    _each:                  _each,
    set:                    set,
    get:                    get,
    unset:                  unset,
    toObject:               toObject,
    toTemplateReplacements: toObject,
    keys:                   keys,
    values:                 values,
    index:                  index,
    merge:                  merge,
    update:                 update,
    toQueryString:          toQueryString,
    inspect:                inspect,
    toJSON:                 toObject,
    clone:                  clone
  };
})());

Hash.from = $H;
Object.extend(Number.prototype, (function() {
  function toColorPart() {
    return this.toPaddedString(2, 16);
  }

  function succ() {
    return this + 1;
  }

  function times(iterator, context) {
    $R(0, this, true).each(iterator, context);
    return this;
  }

  function toPaddedString(length, radix) {
    var string = this.toString(radix || 10);
    return '0'.times(length - string.length) + string;
  }

  function abs() {
    return Math.abs(this);
  }

  function round() {
    return Math.round(this);
  }

  function ceil() {
    return Math.ceil(this);
  }

  function floor() {
    return Math.floor(this);
  }

  return {
    toColorPart:    toColorPart,
    succ:           succ,
    times:          times,
    toPaddedString: toPaddedString,
    abs:            abs,
    round:          round,
    ceil:           ceil,
    floor:          floor
  };
})());

function $R(start, end, exclusive) {
  return new ObjectRange(start, end, exclusive);
}

var ObjectRange = Class.create(Enumerable, (function() {
  function initialize(start, end, exclusive) {
    this.start = start;
    this.end = end;
    this.exclusive = exclusive;
  }

  function _each(iterator, context) {
    var value = this.start, i;
    for (i = 0; this.include(value); i++) {
      iterator.call(context, value, i);
      value = value.succ();
    }
  }

  function include(value) {
    if (value < this.start)
      return false;
    if (this.exclusive)
      return value < this.end;
    return value <= this.end;
  }

  return {
    initialize: initialize,
    _each:      _each,
    include:    include
  };
})());



var Abstract = { };


var Try = {
  these: function() {
    var returnValue;

    for (var i = 0, length = arguments.length; i < length; i++) {
      var lambda = arguments[i];
      try {
        returnValue = lambda();
        break;
      } catch (e) { }
    }

    return returnValue;
  }
};

var Ajax = {
  getTransport: function() {
    return Try.these(
      function() {return new XMLHttpRequest()},
      function() {return new ActiveXObject('Msxml2.XMLHTTP')},
      function() {return new ActiveXObject('Microsoft.XMLHTTP')}
    ) || false;
  },

  activeRequestCount: 0
};

Ajax.Responders = {
  responders: [],

  _each: function(iterator, context) {
    this.responders._each(iterator, context);
  },

  register: function(responder) {
    if (!this.include(responder))
      this.responders.push(responder);
  },

  unregister: function(responder) {
    this.responders = this.responders.without(responder);
  },

  dispatch: function(callback, request, transport, json) {
    this.each(function(responder) {
      if (Object.isFunction(responder[callback])) {
        try {
          responder[callback].apply(responder, [request, transport, json]);
        } catch (e) { }
      }
    });
  }
};

Object.extend(Ajax.Responders, Enumerable);

Ajax.Responders.register({
  onCreate:   function() { Ajax.activeRequestCount++ },
  onComplete: function() { Ajax.activeRequestCount-- }
});
Ajax.Base = Class.create({
  initialize: function(options) {
    this.options = {
      method:       'post',
      asynchronous: true,
      contentType:  'application/x-www-form-urlencoded',
      encoding:     'UTF-8',
      parameters:   '',
      evalJSON:     true,
      evalJS:       true
    };
    Object.extend(this.options, options || { });

    this.options.method = this.options.method.toLowerCase();

    if (Object.isHash(this.options.parameters))
      this.options.parameters = this.options.parameters.toObject();
  }
});
Ajax.Request = Class.create(Ajax.Base, {
  _complete: false,

  initialize: function($super, url, options) {
    $super(options);
    this.transport = Ajax.getTransport();
    this.request(url);
  },

  request: function(url) {
    this.url = url;
    this.method = this.options.method;
    var params = Object.isString(this.options.parameters) ?
          this.options.parameters :
          Object.toQueryString(this.options.parameters);

    if (!['get', 'post'].include(this.method)) {
      params += (params ? '&' : '') + "_method=" + this.method;
      this.method = 'post';
    }

    if (params && this.method === 'get') {
      this.url += (this.url.include('?') ? '&' : '?') + params;
    }

    this.parameters = params.toQueryParams();

    try {
      var response = new Ajax.Response(this);
      if (this.options.onCreate) this.options.onCreate(response);
      Ajax.Responders.dispatch('onCreate', this, response);

      this.transport.open(this.method.toUpperCase(), this.url,
        this.options.asynchronous);

      if (this.options.asynchronous) this.respondToReadyState.bind(this).defer(1);

      this.transport.onreadystatechange = this.onStateChange.bind(this);
      this.setRequestHeaders();

      this.body = this.method == 'post' ? (this.options.postBody || params) : null;
      this.transport.send(this.body);

      /* Force Firefox to handle ready state 4 for synchronous requests */
      if (!this.options.asynchronous && this.transport.overrideMimeType)
        this.onStateChange();

    }
    catch (e) {
      this.dispatchException(e);
    }
  },

  onStateChange: function() {
    var readyState = this.transport.readyState;
    if (readyState > 1 && !((readyState == 4) && this._complete))
      this.respondToReadyState(this.transport.readyState);
  },

  setRequestHeaders: function() {
    var headers = {
      'X-Requested-With': 'XMLHttpRequest',
      'X-Prototype-Version': Prototype.Version,
      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
    };

    if (this.method == 'post') {
      headers['Content-type'] = this.options.contentType +
        (this.options.encoding ? '; charset=' + this.options.encoding : '');

      /* Force "Connection: close" for older Mozilla browsers to work
       * around a bug where XMLHttpRequest sends an incorrect
       * Content-length header. See Mozilla Bugzilla #246651.
       */
      if (this.transport.overrideMimeType &&
          (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0,2005])[1] < 2005)
            headers['Connection'] = 'close';
    }

    if (typeof this.options.requestHeaders == 'object') {
      var extras = this.options.requestHeaders;

      if (Object.isFunction(extras.push))
        for (var i = 0, length = extras.length; i < length; i += 2)
          headers[extras[i]] = extras[i+1];
      else
        $H(extras).each(function(pair) { headers[pair.key] = pair.value });
    }

    for (var name in headers)
      if (headers[name] != null)
        this.transport.setRequestHeader(name, headers[name]);
  },

  success: function() {
    var status = this.getStatus();
    return !status || (status >= 200 && status < 300) || status == 304;
  },

  getStatus: function() {
    try {
      if (this.transport.status === 1223) return 204;
      return this.transport.status || 0;
    } catch (e) { return 0 }
  },

  respondToReadyState: function(readyState) {
    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);

    if (state == 'Complete') {
      try {
        this._complete = true;
        (this.options['on' + response.status]
         || this.options['on' + (this.success() ? 'Success' : 'Failure')]
         || Prototype.emptyFunction)(response, response.headerJSON);
      } catch (e) {
        this.dispatchException(e);
      }

      var contentType = response.getHeader('Content-type');
      if (this.options.evalJS == 'force'
          || (this.options.evalJS && this.isSameOrigin() && contentType
          && contentType.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i)))
        this.evalResponse();
    }

    try {
      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);
      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);
    } catch (e) {
      this.dispatchException(e);
    }

    if (state == 'Complete') {
      this.transport.onreadystatechange = Prototype.emptyFunction;
    }
  },

  isSameOrigin: function() {
    var m = this.url.match(/^\s*https?:\/\/[^\/]*/);
    return !m || (m[0] == '#{protocol}//#{domain}#{port}'.interpolate({
      protocol: location.protocol,
      domain: document.domain,
      port: location.port ? ':' + location.port : ''
    }));
  },

  getHeader: function(name) {
    try {
      return this.transport.getResponseHeader(name) || null;
    } catch (e) { return null; }
  },

  evalResponse: function() {
    try {
      return eval((this.transport.responseText || '').unfilterJSON());
    } catch (e) {
      this.dispatchException(e);
    }
  },

  dispatchException: function(exception) {
    (this.options.onException || Prototype.emptyFunction)(this, exception);
    Ajax.Responders.dispatch('onException', this, exception);
  }
});

Ajax.Request.Events =
  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];








Ajax.Response = Class.create({
  initialize: function(request){
    this.request = request;
    var transport  = this.transport  = request.transport,
        readyState = this.readyState = transport.readyState;

    if ((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {
      this.status       = this.getStatus();
      this.statusText   = this.getStatusText();
      this.responseText = String.interpret(transport.responseText);
      this.headerJSON   = this._getHeaderJSON();
    }

    if (readyState == 4) {
      var xml = transport.responseXML;
      this.responseXML  = Object.isUndefined(xml) ? null : xml;
      this.responseJSON = this._getResponseJSON();
    }
  },

  status:      0,

  statusText: '',

  getStatus: Ajax.Request.prototype.getStatus,

  getStatusText: function() {
    try {
      return this.transport.statusText || '';
    } catch (e) { return '' }
  },

  getHeader: Ajax.Request.prototype.getHeader,

  getAllHeaders: function() {
    try {
      return this.getAllResponseHeaders();
    } catch (e) { return null }
  },

  getResponseHeader: function(name) {
    return this.transport.getResponseHeader(name);
  },

  getAllResponseHeaders: function() {
    return this.transport.getAllResponseHeaders();
  },

  _getHeaderJSON: function() {
    var json = this.getHeader('X-JSON');
    if (!json) return null;

    try {
      json = decodeURIComponent(escape(json));
    } catch(e) {
    }

    try {
      return json.evalJSON(this.request.options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  },

  _getResponseJSON: function() {
    var options = this.request.options;
    if (!options.evalJSON || (options.evalJSON != 'force' &&
      !(this.getHeader('Content-type') || '').include('application/json')) ||
        this.responseText.blank())
          return null;
    try {
      return this.responseText.evalJSON(options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  }
});

Ajax.Updater = Class.create(Ajax.Request, {
  initialize: function($super, container, url, options) {
    this.container = {
      success: (container.success || container),
      failure: (container.failure || (container.success ? null : container))
    };

    options = Object.clone(options);
    var onComplete = options.onComplete;
    options.onComplete = (function(response, json) {
      this.updateContent(response.responseText);
      if (Object.isFunction(onComplete)) onComplete(response, json);
    }).bind(this);

    $super(url, options);
  },

  updateContent: function(responseText) {
    var receiver = this.container[this.success() ? 'success' : 'failure'],
        options = this.options;

    if (!options.evalScripts) responseText = responseText.stripScripts();

    if (receiver = $(receiver)) {
      if (options.insertion) {
        if (Object.isString(options.insertion)) {
          var insertion = { }; insertion[options.insertion] = responseText;
          receiver.insert(insertion);
        }
        else options.insertion(receiver, responseText);
      }
      else receiver.update(responseText);
    }
  }
});

Ajax.PeriodicalUpdater = Class.create(Ajax.Base, {
  initialize: function($super, container, url, options) {
    $super(options);
    this.onComplete = this.options.onComplete;

    this.frequency = (this.options.frequency || 2);
    this.decay = (this.options.decay || 1);

    this.updater = { };
    this.container = container;
    this.url = url;

    this.start();
  },

  start: function() {
    this.options.onComplete = this.updateComplete.bind(this);
    this.onTimerEvent();
  },

  stop: function() {
    this.updater.options.onComplete = undefined;
    clearTimeout(this.timer);
    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
  },

  updateComplete: function(response) {
    if (this.options.decay) {
      this.decay = (response.responseText == this.lastText ?
        this.decay * this.options.decay : 1);

      this.lastText = response.responseText;
    }
    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);
  },

  onTimerEvent: function() {
    this.updater = new Ajax.Updater(this.container, this.url, this.options);
  }
});

(function(GLOBAL) {

  var UNDEFINED;
  var SLICE = Array.prototype.slice;

  var DIV = document.createElement('div');


  function $(element) {
    if (arguments.length > 1) {
      for (var i = 0, elements = [], length = arguments.length; i < length; i++)
        elements.push($(arguments[i]));
      return elements;
    }

    if (Object.isString(element))
      element = document.getElementById(element);
    return Element.extend(element);
  }

  GLOBAL.$ = $;


  if (!GLOBAL.Node) GLOBAL.Node = {};

  if (!GLOBAL.Node.ELEMENT_NODE) {
    Object.extend(GLOBAL.Node, {
      ELEMENT_NODE:                1,
      ATTRIBUTE_NODE:              2,
      TEXT_NODE:                   3,
      CDATA_SECTION_NODE:          4,
      ENTITY_REFERENCE_NODE:       5,
      ENTITY_NODE:                 6,
      PROCESSING_INSTRUCTION_NODE: 7,
      COMMENT_NODE:                8,
      DOCUMENT_NODE:               9,
      DOCUMENT_TYPE_NODE:         10,
      DOCUMENT_FRAGMENT_NODE:     11,
      NOTATION_NODE:              12
    });
  }

  var ELEMENT_CACHE = {};

  function shouldUseCreationCache(tagName, attributes) {
    if (tagName === 'select') return false;
    if ('type' in attributes) return false;
    return true;
  }

  var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX = (function(){
    try {
      var el = document.createElement('<input name="x">');
      return el.tagName.toLowerCase() === 'input' && el.name === 'x';
    }
    catch(err) {
      return false;
    }
  })();


  var oldElement = GLOBAL.Element;
  function Element(tagName, attributes) {
    attributes = attributes || {};
    tagName = tagName.toLowerCase();

    if (HAS_EXTENDED_CREATE_ELEMENT_SYNTAX && attributes.name) {
      tagName = '<' + tagName + ' name="' + attributes.name + '">';
      delete attributes.name;
      return Element.writeAttribute(document.createElement(tagName), attributes);
    }

    if (!ELEMENT_CACHE[tagName])
      ELEMENT_CACHE[tagName] = Element.extend(document.createElement(tagName));

    var node = shouldUseCreationCache(tagName, attributes) ?
     ELEMENT_CACHE[tagName].cloneNode(false) : document.createElement(tagName);

    return Element.writeAttribute(node, attributes);
  }

  GLOBAL.Element = Element;

  Object.extend(GLOBAL.Element, oldElement || {});
  if (oldElement) GLOBAL.Element.prototype = oldElement.prototype;

  Element.Methods = { ByTag: {}, Simulated: {} };

  var methods = {};

  var INSPECT_ATTRIBUTES = { id: 'id', className: 'class' };
  function inspect(element) {
    element = $(element);
    var result = '<' + element.tagName.toLowerCase();

    var attribute, value;
    for (var property in INSPECT_ATTRIBUTES) {
      attribute = INSPECT_ATTRIBUTES[property];
      value = (element[property] || '').toString();
      if (value) result += ' ' + attribute + '=' + value.inspect(true);
    }

    return result + '>';
  }

  methods.inspect = inspect;


  function visible(element) {
    return $(element).style.display !== 'none';
  }

  function toggle(element, bool) {
    element = $(element);
    if (Object.isUndefined(bool))
      bool = !Element.visible(element);
    Element[bool ? 'show' : 'hide'](element);

    return element;
  }

  function hide(element) {
    element = $(element);
    element.style.display = 'none';
    return element;
  }

  function show(element) {
    element = $(element);
    element.style.display = '';
    return element;
  }


  Object.extend(methods, {
    visible: visible,
    toggle:  toggle,
    hide:    hide,
    show:    show
  });


  function remove(element) {
    element = $(element);
    element.parentNode.removeChild(element);
    return element;
  }

  var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){
    var el = document.createElement("select"),
        isBuggy = true;
    el.innerHTML = "<option value=\"test\">test</option>";
    if (el.options && el.options[0]) {
      isBuggy = el.options[0].nodeName.toUpperCase() !== "OPTION";
    }
    el = null;
    return isBuggy;
  })();

  var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){
    try {
      var el = document.createElement("table");
      if (el && el.tBodies) {
        el.innerHTML = "<tbody><tr><td>test</td></tr></tbody>";
        var isBuggy = typeof el.tBodies[0] == "undefined";
        el = null;
        return isBuggy;
      }
    } catch (e) {
      return true;
    }
  })();

  var LINK_ELEMENT_INNERHTML_BUGGY = (function() {
    try {
      var el = document.createElement('div');
      el.innerHTML = "<link />";
      var isBuggy = (el.childNodes.length === 0);
      el = null;
      return isBuggy;
    } catch(e) {
      return true;
    }
  })();

  var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||
   TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;

  var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {
    var s = document.createElement("script"),
        isBuggy = false;
    try {
      s.appendChild(document.createTextNode(""));
      isBuggy = !s.firstChild ||
        s.firstChild && s.firstChild.nodeType !== 3;
    } catch (e) {
      isBuggy = true;
    }
    s = null;
    return isBuggy;
  })();

  function update(element, content) {
    element = $(element);

    var descendants = element.getElementsByTagName('*'),
     i = descendants.length;
    while (i--) purgeElement(descendants[i]);

    if (content && content.toElement)
      content = content.toElement();

    if (Object.isElement(content))
      return element.update().insert(content);


    content = Object.toHTML(content);
    var tagName = element.tagName.toUpperCase();

    if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {
      element.text = content;
      return element;
    }

    if (ANY_INNERHTML_BUGGY) {
      if (tagName in INSERTION_TRANSLATIONS.tags) {
        while (element.firstChild)
          element.removeChild(element.firstChild);

        var nodes = getContentFromAnonymousElement(tagName, content.stripScripts());
        for (var i = 0, node; node = nodes[i]; i++)
          element.appendChild(node);

      } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {
        while (element.firstChild)
          element.removeChild(element.firstChild);

        var nodes = getContentFromAnonymousElement(tagName,
         content.stripScripts(), true);

        for (var i = 0, node; node = nodes[i]; i++)
          element.appendChild(node);
      } else {
        element.innerHTML = content.stripScripts();
      }
    } else {
      element.innerHTML = content.stripScripts();
    }

    content.evalScripts.bind(content).defer();
    return element;
  }

  function replace(element, content) {
    element = $(element);

    if (content && content.toElement) {
      content = content.toElement();
    } else if (!Object.isElement(content)) {
      content = Object.toHTML(content);
      var range = element.ownerDocument.createRange();
      range.selectNode(element);
      content.evalScripts.bind(content).defer();
      content = range.createContextualFragment(content.stripScripts());
    }

    element.parentNode.replaceChild(content, element);
    return element;
  }

  var INSERTION_TRANSLATIONS = {
    before: function(element, node) {
      element.parentNode.insertBefore(node, element);
    },
    top: function(element, node) {
      element.insertBefore(node, element.firstChild);
    },
    bottom: function(element, node) {
      element.appendChild(node);
    },
    after: function(element, node) {
      element.parentNode.insertBefore(node, element.nextSibling);
    },

    tags: {
      TABLE:  ['<table>',                '</table>',                   1],
      TBODY:  ['<table><tbody>',         '</tbody></table>',           2],
      TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],
      TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],
      SELECT: ['<select>',               '</select>',                  1]
    }
  };

  var tags = INSERTION_TRANSLATIONS.tags;

  Object.extend(tags, {
    THEAD: tags.TBODY,
    TFOOT: tags.TBODY,
    TH:    tags.TD
  });

  function replace_IE(element, content) {
    element = $(element);
    if (content && content.toElement)
      content = content.toElement();
    if (Object.isElement(content)) {
      element.parentNode.replaceChild(content, element);
      return element;
    }

    content = Object.toHTML(content);
    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();

    if (tagName in INSERTION_TRANSLATIONS.tags) {
      var nextSibling = Element.next(element);
      var fragments = getContentFromAnonymousElement(
       tagName, content.stripScripts());

      parent.removeChild(element);

      var iterator;
      if (nextSibling)
        iterator = function(node) { parent.insertBefore(node, nextSibling) };
      else
        iterator = function(node) { parent.appendChild(node); }

      fragments.each(iterator);
    } else {
      element.outerHTML = content.stripScripts();
    }

    content.evalScripts.bind(content).defer();
    return element;
  }

  if ('outerHTML' in document.documentElement)
    replace = replace_IE;

  function isContent(content) {
    if (Object.isUndefined(content) || content === null) return false;

    if (Object.isString(content) || Object.isNumber(content)) return true;
    if (Object.isElement(content)) return true;
    if (content.toElement || content.toHTML) return true;

    return false;
  }

  function insertContentAt(element, content, position) {
    position   = position.toLowerCase();
    var method = INSERTION_TRANSLATIONS[position];

    if (content && content.toElement) content = content.toElement();
    if (Object.isElement(content)) {
      method(element, content);
      return element;
    }

    content = Object.toHTML(content);
    var tagName = ((position === 'before' || position === 'after') ?
     element.parentNode : element).tagName.toUpperCase();

    var childNodes = getContentFromAnonymousElement(tagName, content.stripScripts());

    if (position === 'top' || position === 'after') childNodes.reverse();

    for (var i = 0, node; node = childNodes[i]; i++)
      method(element, node);

    content.evalScripts.bind(content).defer();
  }

  function insert(element, insertions) {
    element = $(element);

    if (isContent(insertions))
      insertions = { bottom: insertions };

    for (var position in insertions)
      insertContentAt(element, insertions[position], position);

    return element;
  }

  function wrap(element, wrapper, attributes) {
    element = $(element);

    if (Object.isElement(wrapper)) {
      $(wrapper).writeAttribute(attributes || {});
    } else if (Object.isString(wrapper)) {
      wrapper = new Element(wrapper, attributes);
    } else {
      wrapper = new Element('div', wrapper);
    }

    if (element.parentNode)
      element.parentNode.replaceChild(wrapper, element);

    wrapper.appendChild(element);

    return wrapper;
  }

  function cleanWhitespace(element) {
    element = $(element);
    var node = element.firstChild;

    while (node) {
      var nextNode = node.nextSibling;
      if (node.nodeType === Node.TEXT_NODE && !/\S/.test(node.nodeValue))
        element.removeChild(node);
      node = nextNode;
    }
    return element;
  }

  function empty(element) {
    return $(element).innerHTML.blank();
  }

  function getContentFromAnonymousElement(tagName, html, force) {
    var t = INSERTION_TRANSLATIONS.tags[tagName], div = DIV;

    var workaround = !!t;
    if (!workaround && force) {
      workaround = true;
      t = ['', '', 0];
    }

    if (workaround) {
      div.innerHTML = '&#160;' + t[0] + html + t[1];
      div.removeChild(div.firstChild);
      for (var i = t[2]; i--; )
        div = div.firstChild;
    } else {
      div.innerHTML = html;
    }

    return $A(div.childNodes);
  }

  function clone(element, deep) {
    if (!(element = $(element))) return;
    var clone = element.cloneNode(deep);
    if (!HAS_UNIQUE_ID_PROPERTY) {
      clone._prototypeUID = UNDEFINED;
      if (deep) {
        var descendants = Element.select(clone, '*'),
         i = descendants.length;
        while (i--)
          descendants[i]._prototypeUID = UNDEFINED;
      }
    }
    return Element.extend(clone);
  }

  function purgeElement(element) {
    var uid = getUniqueElementID(element);
    if (uid) {
      Element.stopObserving(element);
      if (!HAS_UNIQUE_ID_PROPERTY)
        element._prototypeUID = UNDEFINED;
      delete Element.Storage[uid];
    }
  }

  function purgeCollection(elements) {
    var i = elements.length;
    while (i--)
      purgeElement(elements[i]);
  }

  function purgeCollection_IE(elements) {
    var i = elements.length, element, uid;
    while (i--) {
      element = elements[i];
      uid = getUniqueElementID(element);
      delete Element.Storage[uid];
      delete Event.cache[uid];
    }
  }

  if (HAS_UNIQUE_ID_PROPERTY) {
    purgeCollection = purgeCollection_IE;
  }


  function purge(element) {
    if (!(element = $(element))) return;
    purgeElement(element);

    var descendants = element.getElementsByTagName('*'),
     i = descendants.length;

    while (i--) purgeElement(descendants[i]);

    return null;
  }

  Object.extend(methods, {
    remove:  remove,
    update:  update,
    replace: replace,
    insert:  insert,
    wrap:    wrap,
    cleanWhitespace: cleanWhitespace,
    empty:   empty,
    clone:   clone,
    purge:   purge
  });



  function recursivelyCollect(element, property, maximumLength) {
    element = $(element);
    maximumLength = maximumLength || -1;
    var elements = [];

    while (element = element[property]) {
      if (element.nodeType === Node.ELEMENT_NODE)
        elements.push(Element.extend(element));

      if (elements.length === maximumLength) break;
    }

    return elements;
  }


  function ancestors(element) {
    return recursivelyCollect(element, 'parentNode');
  }

  function descendants(element) {
    return Element.select(element, '*');
  }

  function firstDescendant(element) {
    element = $(element).firstChild;
    while (element && element.nodeType !== Node.ELEMENT_NODE)
      element = element.nextSibling;

    return $(element);
  }

  function immediateDescendants(element) {
    var results = [], child = $(element).firstChild;

    while (child) {
      if (child.nodeType === Node.ELEMENT_NODE)
        results.push(Element.extend(child));

      child = child.nextSibling;
    }

    return results;
  }

  function previousSiblings(element) {
    return recursivelyCollect(element, 'previousSibling');
  }

  function nextSiblings(element) {
    return recursivelyCollect(element, 'nextSibling');
  }

  function siblings(element) {
    element = $(element);
    var previous = previousSiblings(element),
     next = nextSiblings(element);
    return previous.reverse().concat(next);
  }

  function match(element, selector) {
    element = $(element);

    if (Object.isString(selector))
      return Prototype.Selector.match(element, selector);

    return selector.match(element);
  }


  function _recursivelyFind(element, property, expression, index) {
    element = $(element), expression = expression || 0, index = index || 0;
    if (Object.isNumber(expression)) {
      index = expression, expression = null;
    }

    while (element = element[property]) {
      if (element.nodeType !== 1) continue;
      if (expression && !Prototype.Selector.match(element, expression))
        continue;
      if (--index >= 0) continue;

      return Element.extend(element);
    }
  }


  function up(element, expression, index) {
    element = $(element);

    if (arguments.length === 1) return $(element.parentNode);
    return _recursivelyFind(element, 'parentNode', expression, index);
  }

  function down(element, expression, index) {
    if (arguments.length === 1) return firstDescendant(element);
    element = $(element), expression = expression || 0, index = index || 0;

    if (Object.isNumber(expression))
      index = expression, expression = '*';

    var node = Prototype.Selector.select(expression, element)[index];
    return Element.extend(node);
  }

  function previous(element, expression, index) {
    return _recursivelyFind(element, 'previousSibling', expression, index);
  }

  function next(element, expression, index) {
    return _recursivelyFind(element, 'nextSibling', expression, index);
  }

  function select(element) {
    element = $(element);
    var expressions = SLICE.call(arguments, 1).join(', ');
    return Prototype.Selector.select(expressions, element);
  }

  function adjacent(element) {
    element = $(element);
    var expressions = SLICE.call(arguments, 1).join(', ');
    var siblings = Element.siblings(element), results = [];
    for (var i = 0, sibling; sibling = siblings[i]; i++) {
      if (Prototype.Selector.match(sibling, expressions))
        results.push(sibling);
    }

    return results;
  }

  function descendantOf_DOM(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    while (element = element.parentNode)
      if (element === ancestor) return true;
    return false;
  }

  function descendantOf_contains(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    if (!ancestor.contains) return descendantOf_DOM(element, ancestor);
    return ancestor.contains(element) && ancestor !== element;
  }

  function descendantOf_compareDocumentPosition(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    return (element.compareDocumentPosition(ancestor) & 8) === 8;
  }

  var descendantOf;
  if (DIV.compareDocumentPosition) {
    descendantOf = descendantOf_compareDocumentPosition;
  } else if (DIV.contains) {
    descendantOf = descendantOf_contains;
  } else {
    descendantOf = descendantOf_DOM;
  }


  Object.extend(methods, {
    recursivelyCollect:   recursivelyCollect,
    ancestors:            ancestors,
    descendants:          descendants,
    firstDescendant:      firstDescendant,
    immediateDescendants: immediateDescendants,
    previousSiblings:     previousSiblings,
    nextSiblings:         nextSiblings,
    siblings:             siblings,
    match:                match,
    up:                   up,
    down:                 down,
    previous:             previous,
    next:                 next,
    select:               select,
    adjacent:             adjacent,
    descendantOf:         descendantOf,

    getElementsBySelector: select,

    childElements:         immediateDescendants
  });


  var idCounter = 1;
  function identify(element) {
    element = $(element);
    var id = Element.readAttribute(element, 'id');
    if (id) return id;

    do { id = 'anonymous_element_' + idCounter++ } while ($(id));

    Element.writeAttribute(element, 'id', id);
    return id;
  }


  function readAttribute(element, name) {
    return $(element).getAttribute(name);
  }

  function readAttribute_IE(element, name) {
    element = $(element);

    var table = ATTRIBUTE_TRANSLATIONS.read;
    if (table.values[name])
      return table.values[name](element, name);

    if (table.names[name]) name = table.names[name];

    if (name.include(':')) {
      if (!element.attributes || !element.attributes[name]) return null;
      return element.attributes[name].value;
    }

    return element.getAttribute(name);
  }

  function readAttribute_Opera(element, name) {
    if (name === 'title') return element.title;
    return element.getAttribute(name);
  }

  var PROBLEMATIC_ATTRIBUTE_READING = (function() {
    DIV.setAttribute('onclick', []);
    var value = DIV.getAttribute('onclick');
    var isFunction = Object.isArray(value);
    DIV.removeAttribute('onclick');
    return isFunction;
  })();

  if (PROBLEMATIC_ATTRIBUTE_READING) {
    readAttribute = readAttribute_IE;
  } else if (Prototype.Browser.Opera) {
    readAttribute = readAttribute_Opera;
  }


  function writeAttribute(element, name, value) {
    element = $(element);
    var attributes = {}, table = ATTRIBUTE_TRANSLATIONS.write;

    if (typeof name === 'object') {
      attributes = name;
    } else {
      attributes[name] = Object.isUndefined(value) ? true : value;
    }

    for (var attr in attributes) {
      name = table.names[attr] || attr;
      value = attributes[attr];
      if (table.values[attr])
        name = table.values[attr](element, value) || name;
      if (value === false || value === null)
        element.removeAttribute(name);
      else if (value === true)
        element.setAttribute(name, name);
      else element.setAttribute(name, value);
    }

    return element;
  }

  var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES = (function () {
    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) {
      return false;
    }
    var checkbox = document.createElement('<input type="checkbox">');
    checkbox.checked = true;
    var node = checkbox.getAttributeNode('checked');
    return !node || !node.specified;
  })();

  function hasAttribute(element, attribute) {
    attribute = ATTRIBUTE_TRANSLATIONS.has[attribute] || attribute;
    var node = $(element).getAttributeNode(attribute);
    return !!(node && node.specified);
  }

  function hasAttribute_IE(element, attribute) {
    if (attribute === 'checked') {
      return element.checked;
    }
    return hasAttribute(element, attribute);
  }

  GLOBAL.Element.Methods.Simulated.hasAttribute =
   PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES ?
   hasAttribute_IE : hasAttribute;

  function classNames(element) {
    return new Element.ClassNames(element);
  }

  var regExpCache = {};
  function getRegExpForClassName(className) {
    if (regExpCache[className]) return regExpCache[className];

    var re = new RegExp("(^|\\s+)" + className + "(\\s+|$)");
    regExpCache[className] = re;
    return re;
  }

  function hasClassName(element, className) {
    if (!(element = $(element))) return;

    var elementClassName = element.className;

    if (elementClassName.length === 0) return false;
    if (elementClassName === className) return true;

    return getRegExpForClassName(className).test(elementClassName);
  }

  function addClassName(element, className) {
    if (!(element = $(element))) return;

    if (!hasClassName(element, className))
      element.className += (element.className ? ' ' : '') + className;

    return element;
  }

  function removeClassName(element, className) {
    if (!(element = $(element))) return;

    element.className = element.className.replace(
     getRegExpForClassName(className), ' ').strip();

    return element;
  }

  function toggleClassName(element, className, bool) {
    if (!(element = $(element))) return;

    if (Object.isUndefined(bool))
      bool = !hasClassName(element, className);

    var method = Element[bool ? 'addClassName' : 'removeClassName'];
    return method(element, className);
  }

  var ATTRIBUTE_TRANSLATIONS = {};

  var classProp = 'className', forProp = 'for';

  DIV.setAttribute(classProp, 'x');
  if (DIV.className !== 'x') {
    DIV.setAttribute('class', 'x');
    if (DIV.className === 'x')
      classProp = 'class';
  }

  var LABEL = document.createElement('label');
  LABEL.setAttribute(forProp, 'x');
  if (LABEL.htmlFor !== 'x') {
    LABEL.setAttribute('htmlFor', 'x');
    if (LABEL.htmlFor === 'x')
      forProp = 'htmlFor';
  }
  LABEL = null;

  function _getAttr(element, attribute) {
    return element.getAttribute(attribute);
  }

  function _getAttr2(element, attribute) {
    return element.getAttribute(attribute, 2);
  }

  function _getAttrNode(element, attribute) {
    var node = element.getAttributeNode(attribute);
    return node ? node.value : '';
  }

  function _getFlag(element, attribute) {
    return $(element).hasAttribute(attribute) ? attribute : null;
  }

  DIV.onclick = Prototype.emptyFunction;
  var onclickValue = DIV.getAttribute('onclick');

  var _getEv;

  if (String(onclickValue).indexOf('{') > -1) {
    _getEv = function(element, attribute) {
      var value = element.getAttribute(attribute);
      if (!value) return null;
      value = value.toString();
      value = value.split('{')[1];
      value = value.split('}')[0];
      return value.strip();
    };
  }
  else if (onclickValue === '') {
    _getEv = function(element, attribute) {
      var value = element.getAttribute(attribute);
      if (!value) return null;
      return value.strip();
    };
  }

  ATTRIBUTE_TRANSLATIONS.read = {
    names: {
      'class':     classProp,
      'className': classProp,
      'for':       forProp,
      'htmlFor':   forProp
    },

    values: {
      style: function(element) {
        return element.style.cssText.toLowerCase();
      },
      title: function(element) {
        return element.title;
      }
    }
  };

  ATTRIBUTE_TRANSLATIONS.write = {
    names: {
      className:   'class',
      htmlFor:     'for',
      cellpadding: 'cellPadding',
      cellspacing: 'cellSpacing'
    },

    values: {
      checked: function(element, value) {
        element.checked = !!value;
      },

      style: function(element, value) {
        element.style.cssText = value ? value : '';
      }
    }
  };

  ATTRIBUTE_TRANSLATIONS.has = { names: {} };

  Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,
   ATTRIBUTE_TRANSLATIONS.read.names);

  var CAMEL_CASED_ATTRIBUTE_NAMES = $w('colSpan rowSpan vAlign dateTime ' +
   'accessKey tabIndex encType maxLength readOnly longDesc frameBorder');

  for (var i = 0, attr; attr = CAMEL_CASED_ATTRIBUTE_NAMES[i]; i++) {
    ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()] = attr;
    ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]   = attr;
  }

  Object.extend(ATTRIBUTE_TRANSLATIONS.read.values, {
    href:        _getAttr2,
    src:         _getAttr2,
    type:        _getAttr,
    action:      _getAttrNode,
    disabled:    _getFlag,
    checked:     _getFlag,
    readonly:    _getFlag,
    multiple:    _getFlag,
    onload:      _getEv,
    onunload:    _getEv,
    onclick:     _getEv,
    ondblclick:  _getEv,
    onmousedown: _getEv,
    onmouseup:   _getEv,
    onmouseover: _getEv,
    onmousemove: _getEv,
    onmouseout:  _getEv,
    onfocus:     _getEv,
    onblur:      _getEv,
    onkeypress:  _getEv,
    onkeydown:   _getEv,
    onkeyup:     _getEv,
    onsubmit:    _getEv,
    onreset:     _getEv,
    onselect:    _getEv,
    onchange:    _getEv
  });


  Object.extend(methods, {
    identify:        identify,
    readAttribute:   readAttribute,
    writeAttribute:  writeAttribute,
    classNames:      classNames,
    hasClassName:    hasClassName,
    addClassName:    addClassName,
    removeClassName: removeClassName,
    toggleClassName: toggleClassName
  });


  function normalizeStyleName(style) {
    if (style === 'float' || style === 'styleFloat')
      return 'cssFloat';
    return style.camelize();
  }

  function normalizeStyleName_IE(style) {
    if (style === 'float' || style === 'cssFloat')
      return 'styleFloat';
    return style.camelize();
  }

  function setStyle(element, styles) {
    element = $(element);
    var elementStyle = element.style, match;

    if (Object.isString(styles)) {
      elementStyle.cssText += ';' + styles;
      if (styles.include('opacity')) {
        var opacity = styles.match(/opacity:\s*(\d?\.?\d*)/)[1];
        Element.setOpacity(element, opacity);
      }
      return element;
    }

    for (var property in styles) {
      if (property === 'opacity') {
        Element.setOpacity(element, styles[property]);
      } else {
        var value = styles[property];
        if (property === 'float' || property === 'cssFloat') {
          property = Object.isUndefined(elementStyle.styleFloat) ?
           'cssFloat' : 'styleFloat';
        }
        elementStyle[property] = value;
      }
    }

    return element;
  }


  function getStyle(element, style) {
    element = $(element);
    style = normalizeStyleName(style);

    var value = element.style[style];
    if (!value || value === 'auto') {
      var css = document.defaultView.getComputedStyle(element, null);
      value = css ? css[style] : null;
    }

    if (style === 'opacity') return value ? parseFloat(value) : 1.0;
    return value === 'auto' ? null : value;
  }

  function getStyle_Opera(element, style) {
    switch (style) {
      case 'height': case 'width':
        if (!Element.visible(element)) return null;

        var dim = parseInt(getStyle(element, style), 10);

        if (dim !== element['offset' + style.capitalize()])
          return dim + 'px';

        return Element.measure(element, style);

      default: return getStyle(element, style);
    }
  }

  function getStyle_IE(element, style) {
    element = $(element);
    style = normalizeStyleName_IE(style);

    var value = element.style[style];
    if (!value && element.currentStyle) {
      value = element.currentStyle[style];
    }

    if (style === 'opacity' && !STANDARD_CSS_OPACITY_SUPPORTED)
      return getOpacity_IE(element);

    if (value === 'auto') {
      if ((style === 'width' || style === 'height') && Element.visible(element))
        return Element.measure(element, style) + 'px';
      return null;
    }

    return value;
  }

  function stripAlphaFromFilter_IE(filter) {
    return (filter || '').replace(/alpha\([^\)]*\)/gi, '');
  }

  function hasLayout_IE(element) {
    if (!element.currentStyle || !element.currentStyle.hasLayout)
      element.style.zoom = 1;
    return element;
  }

  var STANDARD_CSS_OPACITY_SUPPORTED = (function() {
    DIV.style.cssText = "opacity:.55";
    return /^0.55/.test(DIV.style.opacity);
  })();

  function setOpacity(element, value) {
    element = $(element);
    if (value == 1 || value === '') value = '';
    else if (value < 0.00001) value = 0;
    element.style.opacity = value;
    return element;
  }

  function setOpacity_IE(element, value) {
    if (STANDARD_CSS_OPACITY_SUPPORTED)
      return setOpacity(element, value);

    element = hasLayout_IE($(element));
    var filter = Element.getStyle(element, 'filter'),
     style = element.style;

    if (value == 1 || value === '') {
      filter = stripAlphaFromFilter_IE(filter);
      if (filter) style.filter = filter;
      else style.removeAttribute('filter');
      return element;
    }

    if (value < 0.00001) value = 0;

    style.filter = stripAlphaFromFilter_IE(filter) +
     'alpha(opacity=' + (value * 100) + ')';

    return element;
  }


  function getOpacity(element) {
    return Element.getStyle(element, 'opacity');
  }

  function getOpacity_IE(element) {
    if (STANDARD_CSS_OPACITY_SUPPORTED)
      return getOpacity(element);

    var filter = Element.getStyle(element, 'filter');
    if (filter.length === 0) return 1.0;
    var match = (filter || '').match(/alpha\(opacity=(.*)\)/);
    if (match && match[1]) return parseFloat(match[1]) / 100;
    return 1.0;
  }


  Object.extend(methods, {
    setStyle:   setStyle,
    getStyle:   getStyle,
    setOpacity: setOpacity,
    getOpacity: getOpacity
  });

  if ('styleFloat' in DIV.style) {
    methods.getStyle = getStyle_IE;
    methods.setOpacity = setOpacity_IE;
    methods.getOpacity = getOpacity_IE;
  }

  var UID = 0;

  GLOBAL.Element.Storage = { UID: 1 };

  function getUniqueElementID(element) {
    if (element === window) return 0;

    if (typeof element._prototypeUID === 'undefined')
      element._prototypeUID = Element.Storage.UID++;
    return element._prototypeUID;
  }

  function getUniqueElementID_IE(element) {
    if (element === window) return 0;
    if (element == document) return 1;
    return element.uniqueID;
  }

  var HAS_UNIQUE_ID_PROPERTY = ('uniqueID' in DIV);
  if (HAS_UNIQUE_ID_PROPERTY)
    getUniqueElementID = getUniqueElementID_IE;

  function getStorage(element) {
    if (!(element = $(element))) return;

    var uid = getUniqueElementID(element);

    if (!Element.Storage[uid])
      Element.Storage[uid] = $H();

    return Element.Storage[uid];
  }

  function store(element, key, value) {
    if (!(element = $(element))) return;
    var storage = getStorage(element);
    if (arguments.length === 2) {
      storage.update(key);
    } else {
      storage.set(key, value);
    }
    return element;
  }

  function retrieve(element, key, defaultValue) {
    if (!(element = $(element))) return;
    var storage = getStorage(element), value = storage.get(key);

    if (Object.isUndefined(value)) {
      storage.set(key, defaultValue);
      value = defaultValue;
    }

    return value;
  }


  Object.extend(methods, {
    getStorage: getStorage,
    store:      store,
    retrieve:   retrieve
  });


  var Methods = {}, ByTag = Element.Methods.ByTag,
   F = Prototype.BrowserFeatures;

  if (!F.ElementExtensions && ('__proto__' in DIV)) {
    GLOBAL.HTMLElement = {};
    GLOBAL.HTMLElement.prototype = DIV['__proto__'];
    F.ElementExtensions = true;
  }

  function checkElementPrototypeDeficiency(tagName) {
    if (typeof window.Element === 'undefined') return false;
    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) return false;
    var proto = window.Element.prototype;
    if (proto) {
      var id = '_' + (Math.random() + '').slice(2),
       el = document.createElement(tagName);
      proto[id] = 'x';
      var isBuggy = (el[id] !== 'x');
      delete proto[id];
      el = null;
      return isBuggy;
    }

    return false;
  }

  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =
   checkElementPrototypeDeficiency('object');

  function extendElementWith(element, methods) {
    for (var property in methods) {
      var value = methods[property];
      if (Object.isFunction(value) && !(property in element))
        element[property] = value.methodize();
    }
  }

  var EXTENDED = {};
  function elementIsExtended(element) {
    var uid = getUniqueElementID(element);
    return (uid in EXTENDED);
  }

  function extend(element) {
    if (!element || elementIsExtended(element)) return element;
    if (element.nodeType !== Node.ELEMENT_NODE || element == window)
      return element;

    var methods = Object.clone(Methods),
     tagName = element.tagName.toUpperCase();

    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);

    extendElementWith(element, methods);
    EXTENDED[getUniqueElementID(element)] = true;
    return element;
  }

  function extend_IE8(element) {
    if (!element || elementIsExtended(element)) return element;

    var t = element.tagName;
    if (t && (/^(?:object|applet|embed)$/i.test(t))) {
      extendElementWith(element, Element.Methods);
      extendElementWith(element, Element.Methods.Simulated);
      extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);
    }

    return element;
  }

  if (F.SpecificElementExtensions) {
    extend = HTMLOBJECTELEMENT_PROTOTYPE_BUGGY ? extend_IE8 : Prototype.K;
  }

  function addMethodsToTagName(tagName, methods) {
    tagName = tagName.toUpperCase();
    if (!ByTag[tagName]) ByTag[tagName] = {};
    Object.extend(ByTag[tagName], methods);
  }

  function mergeMethods(destination, methods, onlyIfAbsent) {
    if (Object.isUndefined(onlyIfAbsent)) onlyIfAbsent = false;
    for (var property in methods) {
      var value = methods[property];
      if (!Object.isFunction(value)) continue;
      if (!onlyIfAbsent || !(property in destination))
        destination[property] = value.methodize();
    }
  }

  function findDOMClass(tagName) {
    var klass;
    var trans = {
      "OPTGROUP": "OptGroup", "TEXTAREA": "TextArea", "P": "Paragraph",
      "FIELDSET": "FieldSet", "UL": "UList", "OL": "OList", "DL": "DList",
      "DIR": "Directory", "H1": "Heading", "H2": "Heading", "H3": "Heading",
      "H4": "Heading", "H5": "Heading", "H6": "Heading", "Q": "Quote",
      "INS": "Mod", "DEL": "Mod", "A": "Anchor", "IMG": "Image", "CAPTION":
      "TableCaption", "COL": "TableCol", "COLGROUP": "TableCol", "THEAD":
      "TableSection", "TFOOT": "TableSection", "TBODY": "TableSection", "TR":
      "TableRow", "TH": "TableCell", "TD": "TableCell", "FRAMESET":
      "FrameSet", "IFRAME": "IFrame"
    };
    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';
    if (window[klass]) return window[klass];
    klass = 'HTML' + tagName + 'Element';
    if (window[klass]) return window[klass];
    klass = 'HTML' + tagName.capitalize() + 'Element';
    if (window[klass]) return window[klass];

    var element = document.createElement(tagName),
     proto = element['__proto__'] || element.constructor.prototype;

    element = null;
    return proto;
  }

  function addMethods(methods) {
    if (arguments.length === 0) addFormMethods();

    if (arguments.length === 2) {
      var tagName = methods;
      methods = arguments[1];
    }

    if (!tagName) {
      Object.extend(Element.Methods, methods || {});
    } else {
      if (Object.isArray(tagName)) {
        for (var i = 0, tag; tag = tagName[i]; i++)
          addMethodsToTagName(tag, methods);
      } else {
        addMethodsToTagName(tagName, methods);
      }
    }

    var ELEMENT_PROTOTYPE = window.HTMLElement ? HTMLElement.prototype :
     Element.prototype;

    if (F.ElementExtensions) {
      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods);
      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods.Simulated, true);
    }

    if (F.SpecificElementExtensions) {
      for (var tag in Element.Methods.ByTag) {
        var klass = findDOMClass(tag);
        if (Object.isUndefined(klass)) continue;
        mergeMethods(klass.prototype, ByTag[tag]);
      }
    }

    Object.extend(Element, Element.Methods);
    Object.extend(Element, Element.Methods.Simulated);
    delete Element.ByTag;
    delete Element.Simulated;

    Element.extend.refresh();

    ELEMENT_CACHE = {};
  }

  Object.extend(GLOBAL.Element, {
    extend:     extend,
    addMethods: addMethods
  });

  if (extend === Prototype.K) {
    GLOBAL.Element.extend.refresh = Prototype.emptyFunction;
  } else {
    GLOBAL.Element.extend.refresh = function() {
      if (Prototype.BrowserFeatures.ElementExtensions) return;
      Object.extend(Methods, Element.Methods);
      Object.extend(Methods, Element.Methods.Simulated);

      EXTENDED = {};
    };
  }

  function addFormMethods() {
    Object.extend(Form, Form.Methods);
    Object.extend(Form.Element, Form.Element.Methods);
    Object.extend(Element.Methods.ByTag, {
      "FORM":     Object.clone(Form.Methods),
      "INPUT":    Object.clone(Form.Element.Methods),
      "SELECT":   Object.clone(Form.Element.Methods),
      "TEXTAREA": Object.clone(Form.Element.Methods),
      "BUTTON":   Object.clone(Form.Element.Methods)
    });
  }

  Element.addMethods(methods);

  function destroyCache_IE() {
    DIV = null;
    ELEMENT_CACHE = null;
  }

  if (window.attachEvent)
    window.attachEvent('onunload', destroyCache_IE);

})(this);
(function() {

  function toDecimal(pctString) {
    var match = pctString.match(/^(\d+)%?$/i);
    if (!match) return null;
    return (Number(match[1]) / 100);
  }

  function getRawStyle(element, style) {
    element = $(element);

    var value = element.style[style];
    if (!value || value === 'auto') {
      var css = document.defaultView.getComputedStyle(element, null);
      value = css ? css[style] : null;
    }

    if (style === 'opacity') return value ? parseFloat(value) : 1.0;
    return value === 'auto' ? null : value;
  }

  function getRawStyle_IE(element, style) {
    var value = element.style[style];
    if (!value && element.currentStyle) {
      value = element.currentStyle[style];
    }
    return value;
  }

  function getContentWidth(element, context) {
    var boxWidth = element.offsetWidth;

    var bl = getPixelValue(element, 'borderLeftWidth',  context) || 0;
    var br = getPixelValue(element, 'borderRightWidth', context) || 0;
    var pl = getPixelValue(element, 'paddingLeft',      context) || 0;
    var pr = getPixelValue(element, 'paddingRight',     context) || 0;

    return boxWidth - bl - br - pl - pr;
  }

  if ('currentStyle' in document.documentElement) {
    getRawStyle = getRawStyle_IE;
  }


  function getPixelValue(value, property, context) {
    var element = null;
    if (Object.isElement(value)) {
      element = value;
      value = getRawStyle(element, property);
    }

    if (value === null || Object.isUndefined(value)) {
      return null;
    }

    if ((/^(?:-)?\d+(\.\d+)?(px)?$/i).test(value)) {
      return window.parseFloat(value);
    }

    var isPercentage = value.include('%'), isViewport = (context === document.viewport);

    if (/\d/.test(value) && element && element.runtimeStyle && !(isPercentage && isViewport)) {
      var style = element.style.left, rStyle = element.runtimeStyle.left;
      element.runtimeStyle.left = element.currentStyle.left;
      element.style.left = value || 0;
      value = element.style.pixelLeft;
      element.style.left = style;
      element.runtimeStyle.left = rStyle;

      return value;
    }

    if (element && isPercentage) {
      context = context || element.parentNode;
      var decimal = toDecimal(value), whole = null;

      var isHorizontal = property.include('left') || property.include('right') ||
       property.include('width');

      var isVertical   = property.include('top') || property.include('bottom') ||
        property.include('height');

      if (context === document.viewport) {
        if (isHorizontal) {
          whole = document.viewport.getWidth();
        } else if (isVertical) {
          whole = document.viewport.getHeight();
        }
      } else {
        if (isHorizontal) {
          whole = $(context).measure('width');
        } else if (isVertical) {
          whole = $(context).measure('height');
        }
      }

      return (whole === null) ? 0 : whole * decimal;
    }

    return 0;
  }

  function toCSSPixels(number) {
    if (Object.isString(number) && number.endsWith('px'))
      return number;
    return number + 'px';
  }

  function isDisplayed(element) {
    while (element && element.parentNode) {
      var display = element.getStyle('display');
      if (display === 'none') {
        return false;
      }
      element = $(element.parentNode);
    }
    return true;
  }

  var hasLayout = Prototype.K;
  if ('currentStyle' in document.documentElement) {
    hasLayout = function(element) {
      if (!element.currentStyle.hasLayout) {
        element.style.zoom = 1;
      }
      return element;
    };
  }

  function cssNameFor(key) {
    if (key.include('border')) key = key + '-width';
    return key.camelize();
  }

  Element.Layout = Class.create(Hash, {
    initialize: function($super, element, preCompute) {
      $super();
      this.element = $(element);

      Element.Layout.PROPERTIES.each( function(property) {
        this._set(property, null);
      }, this);

      if (preCompute) {
        this._preComputing = true;
        this._begin();
        Element.Layout.PROPERTIES.each( this._compute, this );
        this._end();
        this._preComputing = false;
      }
    },

    _set: function(property, value) {
      return Hash.prototype.set.call(this, property, value);
    },

    set: function(property, value) {
      throw "Properties of Element.Layout are read-only.";
    },

    get: function($super, property) {
      var value = $super(property);
      return value === null ? this._compute(property) : value;
    },

    _begin: function() {
      if (this._isPrepared()) return;

      var element = this.element;
      if (isDisplayed(element)) {
        this._setPrepared(true);
        return;
      }


      var originalStyles = {
        position:   element.style.position   || '',
        width:      element.style.width      || '',
        visibility: element.style.visibility || '',
        display:    element.style.display    || ''
      };

      element.store('prototype_original_styles', originalStyles);

      var position = getRawStyle(element, 'position'), width = element.offsetWidth;

      if (width === 0 || width === null) {
        element.style.display = 'block';
        width = element.offsetWidth;
      }

      var context = (position === 'fixed') ? document.viewport :
       element.parentNode;

      var tempStyles = {
        visibility: 'hidden',
        display:    'block'
      };

      if (position !== 'fixed') tempStyles.position = 'absolute';

      element.setStyle(tempStyles);

      var positionedWidth = element.offsetWidth, newWidth;
      if (width && (positionedWidth === width)) {
        newWidth = getContentWidth(element, context);
      } else if (position === 'absolute' || position === 'fixed') {
        newWidth = getContentWidth(element, context);
      } else {
        var parent = element.parentNode, pLayout = $(parent).getLayout();

        newWidth = pLayout.get('width') -
         this.get('margin-left') -
         this.get('border-left') -
         this.get('padding-left') -
         this.get('padding-right') -
         this.get('border-right') -
         this.get('margin-right');
      }

      element.setStyle({ width: newWidth + 'px' });

      this._setPrepared(true);
    },

    _end: function() {
      var element = this.element;
      var originalStyles = element.retrieve('prototype_original_styles');
      element.store('prototype_original_styles', null);
      element.setStyle(originalStyles);
      this._setPrepared(false);
    },

    _compute: function(property) {
      var COMPUTATIONS = Element.Layout.COMPUTATIONS;
      if (!(property in COMPUTATIONS)) {
        throw "Property not found.";
      }

      return this._set(property, COMPUTATIONS[property].call(this, this.element));
    },

    _isPrepared: function() {
      return this.element.retrieve('prototype_element_layout_prepared', false);
    },

    _setPrepared: function(bool) {
      return this.element.store('prototype_element_layout_prepared', bool);
    },

    toObject: function() {
      var args = $A(arguments);
      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :
       args.join(' ').split(' ');
      var obj = {};
      keys.each( function(key) {
        if (!Element.Layout.PROPERTIES.include(key)) return;
        var value = this.get(key);
        if (value != null) obj[key] = value;
      }, this);
      return obj;
    },

    toHash: function() {
      var obj = this.toObject.apply(this, arguments);
      return new Hash(obj);
    },

    toCSS: function() {
      var args = $A(arguments);
      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :
       args.join(' ').split(' ');
      var css = {};

      keys.each( function(key) {
        if (!Element.Layout.PROPERTIES.include(key)) return;
        if (Element.Layout.COMPOSITE_PROPERTIES.include(key)) return;

        var value = this.get(key);
        if (value != null) css[cssNameFor(key)] = value + 'px';
      }, this);
      return css;
    },

    inspect: function() {
      return "#<Element.Layout>";
    }
  });

  Object.extend(Element.Layout, {
    PROPERTIES: $w('height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height'),

    COMPOSITE_PROPERTIES: $w('padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height'),

    COMPUTATIONS: {
      'height': function(element) {
        if (!this._preComputing) this._begin();

        var bHeight = this.get('border-box-height');
        if (bHeight <= 0) {
          if (!this._preComputing) this._end();
          return 0;
        }

        var bTop = this.get('border-top'),
         bBottom = this.get('border-bottom');

        var pTop = this.get('padding-top'),
         pBottom = this.get('padding-bottom');

        if (!this._preComputing) this._end();

        return bHeight - bTop - bBottom - pTop - pBottom;
      },

      'width': function(element) {
        if (!this._preComputing) this._begin();

        var bWidth = this.get('border-box-width');
        if (bWidth <= 0) {
          if (!this._preComputing) this._end();
          return 0;
        }

        var bLeft = this.get('border-left'),
         bRight = this.get('border-right');

        var pLeft = this.get('padding-left'),
         pRight = this.get('padding-right');

        if (!this._preComputing) this._end();
        return bWidth - bLeft - bRight - pLeft - pRight;
      },

      'padding-box-height': function(element) {
        var height = this.get('height'),
         pTop = this.get('padding-top'),
         pBottom = this.get('padding-bottom');

        return height + pTop + pBottom;
      },

      'padding-box-width': function(element) {
        var width = this.get('width'),
         pLeft = this.get('padding-left'),
         pRight = this.get('padding-right');

        return width + pLeft + pRight;
      },

      'border-box-height': function(element) {
        if (!this._preComputing) this._begin();
        var height = element.offsetHeight;
        if (!this._preComputing) this._end();
        return height;
      },

      'border-box-width': function(element) {
        if (!this._preComputing) this._begin();
        var width = element.offsetWidth;
        if (!this._preComputing) this._end();
        return width;
      },

      'margin-box-height': function(element) {
        var bHeight = this.get('border-box-height'),
         mTop = this.get('margin-top'),
         mBottom = this.get('margin-bottom');

        if (bHeight <= 0) return 0;

        return bHeight + mTop + mBottom;
      },

      'margin-box-width': function(element) {
        var bWidth = this.get('border-box-width'),
         mLeft = this.get('margin-left'),
         mRight = this.get('margin-right');

        if (bWidth <= 0) return 0;

        return bWidth + mLeft + mRight;
      },

      'top': function(element) {
        var offset = element.positionedOffset();
        return offset.top;
      },

      'bottom': function(element) {
        var offset = element.positionedOffset(),
         parent = element.getOffsetParent(),
         pHeight = parent.measure('height');

        var mHeight = this.get('border-box-height');

        return pHeight - mHeight - offset.top;
      },

      'left': function(element) {
        var offset = element.positionedOffset();
        return offset.left;
      },

      'right': function(element) {
        var offset = element.positionedOffset(),
         parent = element.getOffsetParent(),
         pWidth = parent.measure('width');

        var mWidth = this.get('border-box-width');

        return pWidth - mWidth - offset.left;
      },

      'padding-top': function(element) {
        return getPixelValue(element, 'paddingTop');
      },

      'padding-bottom': function(element) {
        return getPixelValue(element, 'paddingBottom');
      },

      'padding-left': function(element) {
        return getPixelValue(element, 'paddingLeft');
      },

      'padding-right': function(element) {
        return getPixelValue(element, 'paddingRight');
      },

      'border-top': function(element) {
        return getPixelValue(element, 'borderTopWidth');
      },

      'border-bottom': function(element) {
        return getPixelValue(element, 'borderBottomWidth');
      },

      'border-left': function(element) {
        return getPixelValue(element, 'borderLeftWidth');
      },

      'border-right': function(element) {
        return getPixelValue(element, 'borderRightWidth');
      },

      'margin-top': function(element) {
        return getPixelValue(element, 'marginTop');
      },

      'margin-bottom': function(element) {
        return getPixelValue(element, 'marginBottom');
      },

      'margin-left': function(element) {
        return getPixelValue(element, 'marginLeft');
      },

      'margin-right': function(element) {
        return getPixelValue(element, 'marginRight');
      }
    }
  });

  if ('getBoundingClientRect' in document.documentElement) {
    Object.extend(Element.Layout.COMPUTATIONS, {
      'right': function(element) {
        var parent = hasLayout(element.getOffsetParent());
        var rect = element.getBoundingClientRect(),
         pRect = parent.getBoundingClientRect();

        return (pRect.right - rect.right).round();
      },

      'bottom': function(element) {
        var parent = hasLayout(element.getOffsetParent());
        var rect = element.getBoundingClientRect(),
         pRect = parent.getBoundingClientRect();

        return (pRect.bottom - rect.bottom).round();
      }
    });
  }

  Element.Offset = Class.create({
    initialize: function(left, top) {
      this.left = left.round();
      this.top  = top.round();

      this[0] = this.left;
      this[1] = this.top;
    },

    relativeTo: function(offset) {
      return new Element.Offset(
        this.left - offset.left,
        this.top  - offset.top
      );
    },

    inspect: function() {
      return "#<Element.Offset left: #{left} top: #{top}>".interpolate(this);
    },

    toString: function() {
      return "[#{left}, #{top}]".interpolate(this);
    },

    toArray: function() {
      return [this.left, this.top];
    }
  });

  function getLayout(element, preCompute) {
    return new Element.Layout(element, preCompute);
  }

  function measure(element, property) {
    return $(element).getLayout().get(property);
  }

  function getHeight(element) {
    return Element.getDimensions(element).height;
  }

  function getWidth(element) {
    return Element.getDimensions(element).width;
  }

  function getDimensions(element) {
    element = $(element);
    var display = Element.getStyle(element, 'display');

    if (display && display !== 'none') {
      return { width: element.offsetWidth, height: element.offsetHeight };
    }

    var style = element.style;
    var originalStyles = {
      visibility: style.visibility,
      position:   style.position,
      display:    style.display
    };

    var newStyles = {
      visibility: 'hidden',
      display:    'block'
    };

    if (originalStyles.position !== 'fixed')
      newStyles.position = 'absolute';

    Element.setStyle(element, newStyles);

    var dimensions = {
      width:  element.offsetWidth,
      height: element.offsetHeight
    };

    Element.setStyle(element, originalStyles);

    return dimensions;
  }

  function getOffsetParent(element) {
    element = $(element);

    if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))
      return $(document.body);

    var isInline = (Element.getStyle(element, 'display') === 'inline');
    if (!isInline && element.offsetParent) return $(element.offsetParent);

    while ((element = element.parentNode) && element !== document.body) {
      if (Element.getStyle(element, 'position') !== 'static') {
        return isHtml(element) ? $(document.body) : $(element);
      }
    }

    return $(document.body);
  }


  function cumulativeOffset(element) {
    element = $(element);
    var valueT = 0, valueL = 0;
    if (element.parentNode) {
      do {
        valueT += element.offsetTop  || 0;
        valueL += element.offsetLeft || 0;
        element = element.offsetParent;
      } while (element);
    }
    return new Element.Offset(valueL, valueT);
  }

  function positionedOffset(element) {
    element = $(element);

    var layout = element.getLayout();

    var valueT = 0, valueL = 0;
    do {
      valueT += element.offsetTop  || 0;
      valueL += element.offsetLeft || 0;
      element = element.offsetParent;
      if (element) {
        if (isBody(element)) break;
        var p = Element.getStyle(element, 'position');
        if (p !== 'static') break;
      }
    } while (element);

    valueL -= layout.get('margin-top');
    valueT -= layout.get('margin-left');

    return new Element.Offset(valueL, valueT);
  }

  function cumulativeScrollOffset(element) {
    var valueT = 0, valueL = 0;
    do {
      if (element === document.body) {
        var bodyScrollNode = document.documentElement || document.body.parentNode || document.body;
        valueT += !Object.isUndefined(window.pageYOffset) ? window.pageYOffset : bodyScrollNode.scrollTop || 0;
        valueL += !Object.isUndefined(window.pageXOffset) ? window.pageXOffset : bodyScrollNode.scrollLeft || 0;
        break;
      } else {
        valueT += element.scrollTop  || 0;
        valueL += element.scrollLeft || 0;
        element = element.parentNode;
      }
    } while (element);
    return new Element.Offset(valueL, valueT);
  }

  function viewportOffset(forElement) {
    var valueT = 0, valueL = 0, docBody = document.body;

    forElement = $(forElement);
    var element = forElement;
    do {
      valueT += element.offsetTop  || 0;
      valueL += element.offsetLeft || 0;
      if (element.offsetParent == docBody &&
        Element.getStyle(element, 'position') == 'absolute') break;
    } while (element = element.offsetParent);

    element = forElement;
    do {
      if (element != docBody) {
        valueT -= element.scrollTop  || 0;
        valueL -= element.scrollLeft || 0;
      }
    } while (element = element.parentNode);
    return new Element.Offset(valueL, valueT);
  }

  function absolutize(element) {
    element = $(element);

    if (Element.getStyle(element, 'position') === 'absolute') {
      return element;
    }

    var offsetParent = getOffsetParent(element);
    var eOffset = element.viewportOffset(),
     pOffset = offsetParent.viewportOffset();

    var offset = eOffset.relativeTo(pOffset);
    var layout = element.getLayout();

    element.store('prototype_absolutize_original_styles', {
      position: element.getStyle('position'),
      left:     element.getStyle('left'),
      top:      element.getStyle('top'),
      width:    element.getStyle('width'),
      height:   element.getStyle('height')
    });

    element.setStyle({
      position: 'absolute',
      top:    offset.top + 'px',
      left:   offset.left + 'px',
      width:  layout.get('width') + 'px',
      height: layout.get('height') + 'px'
    });

    return element;
  }

  function relativize(element) {
    element = $(element);
    if (Element.getStyle(element, 'position') === 'relative') {
      return element;
    }

    var originalStyles =
     element.retrieve('prototype_absolutize_original_styles');

    if (originalStyles) element.setStyle(originalStyles);
    return element;
  }


  function scrollTo(element) {
    element = $(element);
    var pos = Element.cumulativeOffset(element);
    window.scrollTo(pos.left, pos.top);
    return element;
  }


  function makePositioned(element) {
    element = $(element);
    var position = Element.getStyle(element, 'position'), styles = {};
    if (position === 'static' || !position) {
      styles.position = 'relative';
      if (Prototype.Browser.Opera) {
        styles.top  = 0;
        styles.left = 0;
      }
      Element.setStyle(element, styles);
      Element.store(element, 'prototype_made_positioned', true);
    }
    return element;
  }

  function undoPositioned(element) {
    element = $(element);
    var storage = Element.getStorage(element),
     madePositioned = storage.get('prototype_made_positioned');

    if (madePositioned) {
      storage.unset('prototype_made_positioned');
      Element.setStyle(element, {
        position: '',
        top:      '',
        bottom:   '',
        left:     '',
        right:    ''
      });
    }
    return element;
  }

  function makeClipping(element) {
    element = $(element);

    var storage = Element.getStorage(element),
     madeClipping = storage.get('prototype_made_clipping');

    if (Object.isUndefined(madeClipping)) {
      var overflow = Element.getStyle(element, 'overflow');
      storage.set('prototype_made_clipping', overflow);
      if (overflow !== 'hidden')
        element.style.overflow = 'hidden';
    }

    return element;
  }

  function undoClipping(element) {
    element = $(element);
    var storage = Element.getStorage(element),
     overflow = storage.get('prototype_made_clipping');

    if (!Object.isUndefined(overflow)) {
      storage.unset('prototype_made_clipping');
      element.style.overflow = overflow || '';
    }

    return element;
  }

  function clonePosition(element, source, options) {
    options = Object.extend({
      setLeft:    true,
      setTop:     true,
      setWidth:   true,
      setHeight:  true,
      offsetTop:  0,
      offsetLeft: 0
    }, options || {});

    source  = $(source);
    element = $(element);
    var p, delta, layout, styles = {};

    if (options.setLeft || options.setTop) {
      p = Element.viewportOffset(source);
      delta = [0, 0];
      if (Element.getStyle(element, 'position') === 'absolute') {
        var parent = Element.getOffsetParent(element);
        if (parent !== document.body) delta = Element.viewportOffset(parent);
      }
    }

    if (options.setWidth || options.setHeight) {
      layout = Element.getLayout(source);
    }

    if (options.setLeft)
      styles.left = (p[0] - delta[0] + options.offsetLeft) + 'px';
    if (options.setTop)
      styles.top  = (p[1] - delta[1] + options.offsetTop)  + 'px';

    if (options.setWidth)
      styles.width  = layout.get('border-box-width')  + 'px';
    if (options.setHeight)
      styles.height = layout.get('border-box-height') + 'px';

    return Element.setStyle(element, styles);
  }


  if (Prototype.Browser.IE) {
    getOffsetParent = getOffsetParent.wrap(
      function(proceed, element) {
        element = $(element);

        if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))
          return $(document.body);

        var position = element.getStyle('position');
        if (position !== 'static') return proceed(element);

        element.setStyle({ position: 'relative' });
        var value = proceed(element);
        element.setStyle({ position: position });
        return value;
      }
    );

    positionedOffset = positionedOffset.wrap(function(proceed, element) {
      element = $(element);
      if (!element.parentNode) return new Element.Offset(0, 0);
      var position = element.getStyle('position');
      if (position !== 'static') return proceed(element);

      var offsetParent = element.getOffsetParent();
      if (offsetParent && offsetParent.getStyle('position') === 'fixed')
        hasLayout(offsetParent);

      element.setStyle({ position: 'relative' });
      var value = proceed(element);
      element.setStyle({ position: position });
      return value;
    });
  } else if (Prototype.Browser.Webkit) {
    cumulativeOffset = function(element) {
      element = $(element);
      var valueT = 0, valueL = 0;
      do {
        valueT += element.offsetTop  || 0;
        valueL += element.offsetLeft || 0;
        if (element.offsetParent == document.body) {
          if (Element.getStyle(element, 'position') == 'absolute') break;
        }

        element = element.offsetParent;
      } while (element);

      return new Element.Offset(valueL, valueT);
    };
  }


  Element.addMethods({
    getLayout:              getLayout,
    measure:                measure,
    getWidth:               getWidth,
    getHeight:              getHeight,
    getDimensions:          getDimensions,
    getOffsetParent:        getOffsetParent,
    cumulativeOffset:       cumulativeOffset,
    positionedOffset:       positionedOffset,
    cumulativeScrollOffset: cumulativeScrollOffset,
    viewportOffset:         viewportOffset,
    absolutize:             absolutize,
    relativize:             relativize,
    scrollTo:               scrollTo,
    makePositioned:         makePositioned,
    undoPositioned:         undoPositioned,
    makeClipping:           makeClipping,
    undoClipping:           undoClipping,
    clonePosition:          clonePosition
  });

  function isBody(element) {
    return element.nodeName.toUpperCase() === 'BODY';
  }

  function isHtml(element) {
    return element.nodeName.toUpperCase() === 'HTML';
  }

  function isDocument(element) {
    return element.nodeType === Node.DOCUMENT_NODE;
  }

  function isDetached(element) {
    return element !== document.body &&
     !Element.descendantOf(element, document.body);
  }

  if ('getBoundingClientRect' in document.documentElement) {
    Element.addMethods({
      viewportOffset: function(element) {
        element = $(element);
        if (isDetached(element)) return new Element.Offset(0, 0);

        var rect = element.getBoundingClientRect(),
         docEl = document.documentElement;
        return new Element.Offset(rect.left - docEl.clientLeft,
         rect.top - docEl.clientTop);
      }
    });
  }


})();

(function() {

  var IS_OLD_OPERA = Prototype.Browser.Opera &&
   (window.parseFloat(window.opera.version()) < 9.5);
  var ROOT = null;
  function getRootElement() {
    if (ROOT) return ROOT;
    ROOT = IS_OLD_OPERA ? document.body : document.documentElement;
    return ROOT;
  }

  function getDimensions() {
    return { width: this.getWidth(), height: this.getHeight() };
  }

  function getWidth() {
    return getRootElement().clientWidth;
  }

  function getHeight() {
    return getRootElement().clientHeight;
  }

  function getScrollOffsets() {
    var x = window.pageXOffset || document.documentElement.scrollLeft ||
     document.body.scrollLeft;
    var y = window.pageYOffset || document.documentElement.scrollTop ||
     document.body.scrollTop;

    return new Element.Offset(x, y);
  }

  document.viewport = {
    getDimensions:    getDimensions,
    getWidth:         getWidth,
    getHeight:        getHeight,
    getScrollOffsets: getScrollOffsets
  };

})();
window.$$ = function() {
  var expression = $A(arguments).join(', ');
  return Prototype.Selector.select(expression, document);
};

Prototype.Selector = (function() {

  function select() {
    throw new Error('Method "Prototype.Selector.select" must be defined.');
  }

  function match() {
    throw new Error('Method "Prototype.Selector.match" must be defined.');
  }

  function find(elements, expression, index) {
    index = index || 0;
    var match = Prototype.Selector.match, length = elements.length, matchIndex = 0, i;

    for (i = 0; i < length; i++) {
      if (match(elements[i], expression) && index == matchIndex++) {
        return Element.extend(elements[i]);
      }
    }
  }

  function extendElements(elements) {
    for (var i = 0, length = elements.length; i < length; i++) {
      Element.extend(elements[i]);
    }
    return elements;
  }


  var K = Prototype.K;

  return {
    select: select,
    match: match,
    find: find,
    extendElements: (Element.extend === K) ? K : extendElements,
    extendElement: Element.extend
  };
})();
Prototype._original_property = window.Sizzle;
/*!
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	expando = "sizzle" + -(new Date()),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	strundefined = typeof undefined,
	MAX_NEGATIVE = 1 << 31,

	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	indexOf = arr.indexOf || function( elem ) {
		var i = 0,
			len = this.length;
		for ( ; i < len; i++ ) {
			if ( this[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",


	whitespace = "[\\x20\\t\\r\\n\\f]",
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	identifier = characterEncoding.replace( "w", "w#" ),

	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
		"*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",

	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				String.fromCharCode( high + 0x10000 ) :
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	};

try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		function( target, els ) {
			var j = target.length,
				i = 0;
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];

	if ( !selector || typeof selector !== "string" ) {
		return results;
	}

	if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
		return [];
	}

	if ( documentIsHTML && !seed ) {

		if ( (match = rquickExpr.exec( selector )) ) {
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					if ( elem && elem.parentNode ) {
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType === 9 && selector;

			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	if ( diff ) {
		return diff;
	}

	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== strundefined && context;
}

support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare,
		doc = node ? node.ownerDocument || node : preferredDoc,
		parent = doc.defaultView;

	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	document = doc;
	docElem = doc.documentElement;

	documentIsHTML = !isXML( doc );

	if ( parent && parent !== parent.top ) {
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", function() {
				setDocument();
			}, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", function() {
				setDocument();
			});
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	support.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {
		div.innerHTML = "<div class='a'></div><div class='a i'></div>";

		div.firstChild.className = "i";
		return div.getElementsByClassName("i").length === 2;
	});

	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
				var m = context.getElementById( id );
				return m && m.parentNode ? [m] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== strundefined ) {
				return context.getElementsByTagName( tag );
			}
		} :
		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				results = context.getElementsByTagName( tag );

			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */


	rbuggyMatches = [];

	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		assert(function( div ) {
			div.innerHTML = "<select t=''><option selected=''></option></select>";

			if ( div.querySelectorAll("[t^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}
		});

		assert(function( div ) {
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			support.disconnectedMatch = matches.call( div, "div" );

			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	sortOrder = hasCompare ?
	function( a, b ) {

		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			1;

		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			return sortInput ?
				( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
				0;

		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			siblingCheck( ap[i], bp[i] ) :

			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			if ( ret || support.disconnectedMatch ||
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch(e) {}
	}

	return Sizzle( expr, document, null, [elem] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		while ( (node = elem[i++]) ) {
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}

	return ret;
};

Expr = Sizzle.selectors = {

	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[5] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			if ( match[3] && match[4] !== undefined ) {
				match[2] = match[4];

			} else if ( unquoted && rpseudo.test( unquoted ) &&
				(excess = tokenize( unquoted, true )) &&
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						if ( forward && useCache ) {
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						} else {
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			if ( fn[ expando ] ) {
				return fn( argument );
			}

			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf.call( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		"not": markFunction(function( selector ) {
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		"lang": markFunction( function( lang ) {
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		"empty": function( elem ) {
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

function tokenize( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			tokenCache( selector, groups ).slice( 0 );
}

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							outerCache[ dir ] = newCache;

							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					[] :

					results :
				matcherIn;

		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf.call( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			if ( matcher[ expando ] ) {
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				if ( bySet ) {
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					setMatched = condense( setMatched );
				}

				push.apply( results, setMatched );

				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	if ( match.length === 1 ) {

		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};


support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

support.detectDuplicates = !!hasDuplicate;

setDocument();

support.sortDetached = assert(function( div1 ) {
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

if ( typeof define === "function" && define.amd ) {
	define(function() { return Sizzle; });
} else if ( typeof module !== "undefined" && module.exports ) {
	module.exports = Sizzle;
} else {
	window.Sizzle = Sizzle;
}

})( window );

;(function(engine) {
  var extendElements = Prototype.Selector.extendElements;

  function select(selector, scope) {
    return extendElements(engine(selector, scope || document));
  }

  function match(element, selector) {
    return engine.matches(selector, [element]).length == 1;
  }

  Prototype.Selector.engine = engine;
  Prototype.Selector.select = select;
  Prototype.Selector.match = match;
})(Sizzle);

window.Sizzle = Prototype._original_property;
delete Prototype._original_property;

var Form = {
  reset: function(form) {
    form = $(form);
    form.reset();
    return form;
  },

  serializeElements: function(elements, options) {
    if (typeof options != 'object') options = { hash: !!options };
    else if (Object.isUndefined(options.hash)) options.hash = true;
    var key, value, submitted = false, submit = options.submit, accumulator, initial;

    if (options.hash) {
      initial = {};
      accumulator = function(result, key, value) {
        if (key in result) {
          if (!Object.isArray(result[key])) result[key] = [result[key]];
          result[key] = result[key].concat(value);
        } else result[key] = value;
        return result;
      };
    } else {
      initial = '';
      accumulator = function(result, key, values) {
        if (!Object.isArray(values)) {values = [values];}
        if (!values.length) {return result;}
        var encodedKey = encodeURIComponent(key).gsub(/%20/, '+');
        return result + (result ? "&" : "") + values.map(function (value) {
          value = value.gsub(/(\r)?\n/, '\r\n');
          value = encodeURIComponent(value);
          value = value.gsub(/%20/, '+');
          return encodedKey + "=" + value;
        }).join("&");
      };
    }

    return elements.inject(initial, function(result, element) {
      if (!element.disabled && element.name) {
        key = element.name; value = $(element).getValue();
        if (value != null && element.type != 'file' && (element.type != 'submit' || (!submitted &&
            submit !== false && (!submit || key == submit) && (submitted = true)))) {
          result = accumulator(result, key, value);
        }
      }
      return result;
    });
  }
};

Form.Methods = {
  serialize: function(form, options) {
    return Form.serializeElements(Form.getElements(form), options);
  },


  getElements: function(form) {
    var elements = $(form).getElementsByTagName('*');
    var element, results = [], serializers = Form.Element.Serializers;

    for (var i = 0; element = elements[i]; i++) {
      if (serializers[element.tagName.toLowerCase()])
        results.push(Element.extend(element));
    }
    return results;
  },

  getInputs: function(form, typeName, name) {
    form = $(form);
    var inputs = form.getElementsByTagName('input');

    if (!typeName && !name) return $A(inputs).map(Element.extend);

    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {
      var input = inputs[i];
      if ((typeName && input.type != typeName) || (name && input.name != name))
        continue;
      matchingInputs.push(Element.extend(input));
    }

    return matchingInputs;
  },

  disable: function(form) {
    form = $(form);
    Form.getElements(form).invoke('disable');
    return form;
  },

  enable: function(form) {
    form = $(form);
    Form.getElements(form).invoke('enable');
    return form;
  },

  findFirstElement: function(form) {
    var elements = $(form).getElements().findAll(function(element) {
      return 'hidden' != element.type && !element.disabled;
    });
    var firstByIndex = elements.findAll(function(element) {
      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;
    }).sortBy(function(element) { return element.tabIndex }).first();

    return firstByIndex ? firstByIndex : elements.find(function(element) {
      return /^(?:input|select|textarea)$/i.test(element.tagName);
    });
  },

  focusFirstElement: function(form) {
    form = $(form);
    var element = form.findFirstElement();
    if (element) element.activate();
    return form;
  },

  request: function(form, options) {
    form = $(form), options = Object.clone(options || { });

    var params = options.parameters, action = form.readAttribute('action') || '';
    if (action.blank()) action = window.location.href;
    options.parameters = form.serialize(true);

    if (params) {
      if (Object.isString(params)) params = params.toQueryParams();
      Object.extend(options.parameters, params);
    }

    if (form.hasAttribute('method') && !options.method)
      options.method = form.method;

    return new Ajax.Request(action, options);
  }
};

/*--------------------------------------------------------------------------*/


Form.Element = {
  focus: function(element) {
    $(element).focus();
    return element;
  },

  select: function(element) {
    $(element).select();
    return element;
  }
};

Form.Element.Methods = {

  serialize: function(element) {
    element = $(element);
    if (!element.disabled && element.name) {
      var value = element.getValue();
      if (value != undefined) {
        var pair = { };
        pair[element.name] = value;
        return Object.toQueryString(pair);
      }
    }
    return '';
  },

  getValue: function(element) {
    element = $(element);
    var method = element.tagName.toLowerCase();
    return Form.Element.Serializers[method](element);
  },

  setValue: function(element, value) {
    element = $(element);
    var method = element.tagName.toLowerCase();
    Form.Element.Serializers[method](element, value);
    return element;
  },

  clear: function(element) {
    $(element).value = '';
    return element;
  },

  present: function(element) {
    return $(element).value != '';
  },

  activate: function(element) {
    element = $(element);
    try {
      element.focus();
      if (element.select && (element.tagName.toLowerCase() != 'input' ||
          !(/^(?:button|reset|submit)$/i.test(element.type))))
        element.select();
    } catch (e) { }
    return element;
  },

  disable: function(element) {
    element = $(element);
    element.disabled = true;
    return element;
  },

  enable: function(element) {
    element = $(element);
    element.disabled = false;
    return element;
  }
};

/*--------------------------------------------------------------------------*/

var Field = Form.Element;

var $F = Form.Element.Methods.getValue;

/*--------------------------------------------------------------------------*/

Form.Element.Serializers = (function() {
  function input(element, value) {
    switch (element.type.toLowerCase()) {
      case 'checkbox':
      case 'radio':
        return inputSelector(element, value);
      default:
        return valueSelector(element, value);
    }
  }

  function inputSelector(element, value) {
    if (Object.isUndefined(value))
      return element.checked ? element.value : null;
    else element.checked = !!value;
  }

  function valueSelector(element, value) {
    if (Object.isUndefined(value)) return element.value;
    else element.value = value;
  }

  function select(element, value) {
    if (Object.isUndefined(value))
      return (element.type === 'select-one' ? selectOne : selectMany)(element);

    var opt, currentValue, single = !Object.isArray(value);
    for (var i = 0, length = element.length; i < length; i++) {
      opt = element.options[i];
      currentValue = this.optionValue(opt);
      if (single) {
        if (currentValue == value) {
          opt.selected = true;
          return;
        }
      }
      else opt.selected = value.include(currentValue);
    }
  }

  function selectOne(element) {
    var index = element.selectedIndex;
    return index >= 0 ? optionValue(element.options[index]) : null;
  }

  function selectMany(element) {
    var values, length = element.length;
    if (!length) return null;

    for (var i = 0, values = []; i < length; i++) {
      var opt = element.options[i];
      if (opt.selected) values.push(optionValue(opt));
    }
    return values;
  }

  function optionValue(opt) {
    return Element.hasAttribute(opt, 'value') ? opt.value : opt.text;
  }

  return {
    input:         input,
    inputSelector: inputSelector,
    textarea:      valueSelector,
    select:        select,
    selectOne:     selectOne,
    selectMany:    selectMany,
    optionValue:   optionValue,
    button:        valueSelector
  };
})();

/*--------------------------------------------------------------------------*/


Abstract.TimedObserver = Class.create(PeriodicalExecuter, {
  initialize: function($super, element, frequency, callback) {
    $super(callback, frequency);
    this.element   = $(element);
    this.lastValue = this.getValue();
  },

  execute: function() {
    var value = this.getValue();
    if (Object.isString(this.lastValue) && Object.isString(value) ?
        this.lastValue != value : String(this.lastValue) != String(value)) {
      this.callback(this.element, value);
      this.lastValue = value;
    }
  }
});

Form.Element.Observer = Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.Observer = Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});

/*--------------------------------------------------------------------------*/

Abstract.EventObserver = Class.create({
  initialize: function(element, callback) {
    this.element  = $(element);
    this.callback = callback;

    this.lastValue = this.getValue();
    if (this.element.tagName.toLowerCase() == 'form')
      this.registerFormCallbacks();
    else
      this.registerCallback(this.element);
  },

  onElementEvent: function() {
    var value = this.getValue();
    if (this.lastValue != value) {
      this.callback(this.element, value);
      this.lastValue = value;
    }
  },

  registerFormCallbacks: function() {
    Form.getElements(this.element).each(this.registerCallback, this);
  },

  registerCallback: function(element) {
    if (element.type) {
      switch (element.type.toLowerCase()) {
        case 'checkbox':
        case 'radio':
          Event.observe(element, 'click', this.onElementEvent.bind(this));
          break;
        default:
          Event.observe(element, 'change', this.onElementEvent.bind(this));
          break;
      }
    }
  }
});

Form.Element.EventObserver = Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.EventObserver = Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});
(function(GLOBAL) {
  var DIV = document.createElement('div');
  var docEl = document.documentElement;
  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl
   && 'onmouseleave' in docEl;

  var Event = {
    KEY_BACKSPACE: 8,
    KEY_TAB:       9,
    KEY_RETURN:   13,
    KEY_ESC:      27,
    KEY_LEFT:     37,
    KEY_UP:       38,
    KEY_RIGHT:    39,
    KEY_DOWN:     40,
    KEY_DELETE:   46,
    KEY_HOME:     36,
    KEY_END:      35,
    KEY_PAGEUP:   33,
    KEY_PAGEDOWN: 34,
    KEY_INSERT:   45
  };


  var isIELegacyEvent = function(event) { return false; };

  if (window.attachEvent) {
    if (window.addEventListener) {
      isIELegacyEvent = function(event) {
        return !(event instanceof window.Event);
      };
    } else {
      isIELegacyEvent = function(event) { return true; };
    }
  }

  var _isButton;

  function _isButtonForDOMEvents(event, code) {
    return event.which ? (event.which === code + 1) : (event.button === code);
  }

  var legacyButtonMap = { 0: 1, 1: 4, 2: 2 };
  function _isButtonForLegacyEvents(event, code) {
    return event.button === legacyButtonMap[code];
  }

  function _isButtonForWebKit(event, code) {
    switch (code) {
      case 0: return event.which == 1 && !event.metaKey;
      case 1: return event.which == 2 || (event.which == 1 && event.metaKey);
      case 2: return event.which == 3;
      default: return false;
    }
  }

  if (window.attachEvent) {
    if (!window.addEventListener) {
      _isButton = _isButtonForLegacyEvents;
    } else {
      _isButton = function(event, code) {
        return isIELegacyEvent(event) ? _isButtonForLegacyEvents(event, code) :
         _isButtonForDOMEvents(event, code);
      }
    }
  } else if (Prototype.Browser.WebKit) {
    _isButton = _isButtonForWebKit;
  } else {
    _isButton = _isButtonForDOMEvents;
  }

  function isLeftClick(event)   { return _isButton(event, 0) }

  function isMiddleClick(event) { return _isButton(event, 1) }

  function isRightClick(event)  { return _isButton(event, 2) }

  function element(event) {
    return Element.extend(_element(event));
  }

  function _element(event) {
    event = Event.extend(event);

    var node = event.target, type = event.type,
     currentTarget = event.currentTarget;

    if (currentTarget && currentTarget.tagName) {
      if (type === 'load' || type === 'error' ||
        (type === 'click' && currentTarget.tagName.toLowerCase() === 'input'
          && currentTarget.type === 'radio'))
            node = currentTarget;
    }

    return node.nodeType == Node.TEXT_NODE ? node.parentNode : node;
  }

  function findElement(event, expression) {
    var element = _element(event), selector = Prototype.Selector;
    if (!expression) return Element.extend(element);
    while (element) {
      if (Object.isElement(element) && selector.match(element, expression))
        return Element.extend(element);
      element = element.parentNode;
    }
  }

  function pointer(event) {
    return { x: pointerX(event), y: pointerY(event) };
  }

  function pointerX(event) {
    var docElement = document.documentElement,
     body = document.body || { scrollLeft: 0 };

    return event.pageX || (event.clientX +
      (docElement.scrollLeft || body.scrollLeft) -
      (docElement.clientLeft || 0));
  }

  function pointerY(event) {
    var docElement = document.documentElement,
     body = document.body || { scrollTop: 0 };

    return  event.pageY || (event.clientY +
       (docElement.scrollTop || body.scrollTop) -
       (docElement.clientTop || 0));
  }


  function stop(event) {
    Event.extend(event);
    event.preventDefault();
    event.stopPropagation();

    event.stopped = true;
  }


  Event.Methods = {
    isLeftClick:   isLeftClick,
    isMiddleClick: isMiddleClick,
    isRightClick:  isRightClick,

    element:     element,
    findElement: findElement,

    pointer:  pointer,
    pointerX: pointerX,
    pointerY: pointerY,

    stop: stop
  };

  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {
    m[name] = Event.Methods[name].methodize();
    return m;
  });

  if (window.attachEvent) {
    function _relatedTarget(event) {
      var element;
      switch (event.type) {
        case 'mouseover':
        case 'mouseenter':
          element = event.fromElement;
          break;
        case 'mouseout':
        case 'mouseleave':
          element = event.toElement;
          break;
        default:
          return null;
      }
      return Element.extend(element);
    }

    var additionalMethods = {
      stopPropagation: function() { this.cancelBubble = true },
      preventDefault:  function() { this.returnValue = false },
      inspect: function() { return '[object Event]' }
    };

    Event.extend = function(event, element) {
      if (!event) return false;

      if (!isIELegacyEvent(event)) return event;

      if (event._extendedByPrototype) return event;
      event._extendedByPrototype = Prototype.emptyFunction;

      var pointer = Event.pointer(event);

      Object.extend(event, {
        target: event.srcElement || element,
        relatedTarget: _relatedTarget(event),
        pageX:  pointer.x,
        pageY:  pointer.y
      });

      Object.extend(event, methods);
      Object.extend(event, additionalMethods);

      return event;
    };
  } else {
    Event.extend = Prototype.K;
  }

  if (window.addEventListener) {
    Event.prototype = window.Event.prototype || document.createEvent('HTMLEvents').__proto__;
    Object.extend(Event.prototype, methods);
  }

  var EVENT_TRANSLATIONS = {
    mouseenter: 'mouseover',
    mouseleave: 'mouseout'
  };

  function getDOMEventName(eventName) {
    return EVENT_TRANSLATIONS[eventName] || eventName;
  }

  if (MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)
    getDOMEventName = Prototype.K;

  function getUniqueElementID(element) {
    if (element === window) return 0;

    if (typeof element._prototypeUID === 'undefined')
      element._prototypeUID = Element.Storage.UID++;
    return element._prototypeUID;
  }

  function getUniqueElementID_IE(element) {
    if (element === window) return 0;
    if (element == document) return 1;
    return element.uniqueID;
  }

  if ('uniqueID' in DIV)
    getUniqueElementID = getUniqueElementID_IE;

  function isCustomEvent(eventName) {
    return eventName.include(':');
  }

  Event._isCustomEvent = isCustomEvent;

  function getRegistryForElement(element, uid) {
    var CACHE = GLOBAL.Event.cache;
    if (Object.isUndefined(uid))
      uid = getUniqueElementID(element);
    if (!CACHE[uid]) CACHE[uid] = { element: element };
    return CACHE[uid];
  }

  function destroyRegistryForElement(element, uid) {
    if (Object.isUndefined(uid))
      uid = getUniqueElementID(element);
    delete GLOBAL.Event.cache[uid];
  }


  function register(element, eventName, handler) {
    var registry = getRegistryForElement(element);
    if (!registry[eventName]) registry[eventName] = [];
    var entries = registry[eventName];

    var i = entries.length;
    while (i--)
      if (entries[i].handler === handler) return null;

    var uid = getUniqueElementID(element);
    var responder = GLOBAL.Event._createResponder(uid, eventName, handler);
    var entry = {
      responder: responder,
      handler:   handler
    };

    entries.push(entry);
    return entry;
  }

  function unregister(element, eventName, handler) {
    var registry = getRegistryForElement(element);
    var entries = registry[eventName];
    if (!entries) return;

    var i = entries.length, entry;
    while (i--) {
      if (entries[i].handler === handler) {
        entry = entries[i];
        break;
      }
    }

    if (!entry) return;

    var index = entries.indexOf(entry);
    entries.splice(index, 1);

    return entry;
  }


  function observe(element, eventName, handler) {
    element = $(element);
    var entry = register(element, eventName, handler);

    if (entry === null) return element;

    var responder = entry.responder;
    if (isCustomEvent(eventName))
      observeCustomEvent(element, eventName, responder);
    else
      observeStandardEvent(element, eventName, responder);

    return element;
  }

  function observeStandardEvent(element, eventName, responder) {
    var actualEventName = getDOMEventName(eventName);
    if (element.addEventListener) {
      element.addEventListener(actualEventName, responder, false);
    } else {
      element.attachEvent('on' + actualEventName, responder);
    }
  }

  function observeCustomEvent(element, eventName, responder) {
    if (element.addEventListener) {
      element.addEventListener('dataavailable', responder, false);
    } else {
      element.attachEvent('ondataavailable', responder);
      element.attachEvent('onlosecapture',   responder);
    }
  }

  function stopObserving(element, eventName, handler) {
    element = $(element);
    var handlerGiven = !Object.isUndefined(handler),
     eventNameGiven = !Object.isUndefined(eventName);

    if (!eventNameGiven && !handlerGiven) {
      stopObservingElement(element);
      return element;
    }

    if (!handlerGiven) {
      stopObservingEventName(element, eventName);
      return element;
    }

    var entry = unregister(element, eventName, handler);

    if (!entry) return element;
    removeEvent(element, eventName, entry.responder);
    return element;
  }

  function stopObservingStandardEvent(element, eventName, responder) {
    var actualEventName = getDOMEventName(eventName);
    if (element.removeEventListener) {
      element.removeEventListener(actualEventName, responder, false);
    } else {
      element.detachEvent('on' + actualEventName, responder);
    }
  }

  function stopObservingCustomEvent(element, eventName, responder) {
    if (element.removeEventListener) {
      element.removeEventListener('dataavailable', responder, false);
    } else {
      element.detachEvent('ondataavailable', responder);
      element.detachEvent('onlosecapture',   responder);
    }
  }



  function stopObservingElement(element) {
    var uid = getUniqueElementID(element), registry = GLOBAL.Event.cache[uid];
    if (!registry) return;

    destroyRegistryForElement(element, uid);

    var entries, i;
    for (var eventName in registry) {
      if (eventName === 'element') continue;

      entries = registry[eventName];
      i = entries.length;
      while (i--)
        removeEvent(element, eventName, entries[i].responder);
    }
  }

  function stopObservingEventName(element, eventName) {
    var registry = getRegistryForElement(element);
    var entries = registry[eventName];
    if (!entries) return;
    delete registry[eventName];

    var i = entries.length;
    while (i--)
      removeEvent(element, eventName, entries[i].responder);
  }


  function removeEvent(element, eventName, handler) {
    if (isCustomEvent(eventName))
      stopObservingCustomEvent(element, eventName, handler);
    else
      stopObservingStandardEvent(element, eventName, handler);
  }



  function getFireTarget(element) {
    if (element !== document) return element;
    if (document.createEvent && !element.dispatchEvent)
      return document.documentElement;
    return element;
  }

  function fire(element, eventName, memo, bubble) {
    element = getFireTarget($(element));
    if (Object.isUndefined(bubble)) bubble = true;
    memo = memo || {};

    var event = fireEvent(element, eventName, memo, bubble);
    return Event.extend(event);
  }

  function fireEvent_DOM(element, eventName, memo, bubble) {
    var event = document.createEvent('HTMLEvents');
    event.initEvent('dataavailable', bubble, true);

    event.eventName = eventName;
    event.memo = memo;

    element.dispatchEvent(event);
    return event;
  }

  function fireEvent_IE(element, eventName, memo, bubble) {
    var event = document.createEventObject();
    event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';

    event.eventName = eventName;
    event.memo = memo;

    element.fireEvent(event.eventType, event);
    return event;
  }

  var fireEvent = document.createEvent ? fireEvent_DOM : fireEvent_IE;



  Event.Handler = Class.create({
    initialize: function(element, eventName, selector, callback) {
      this.element   = $(element);
      this.eventName = eventName;
      this.selector  = selector;
      this.callback  = callback;
      this.handler   = this.handleEvent.bind(this);
    },


    start: function() {
      Event.observe(this.element, this.eventName, this.handler);
      return this;
    },

    stop: function() {
      Event.stopObserving(this.element, this.eventName, this.handler);
      return this;
    },

    handleEvent: function(event) {
      var element = Event.findElement(event, this.selector);
      if (element) this.callback.call(this.element, event, element);
    }
  });

  function on(element, eventName, selector, callback) {
    element = $(element);
    if (Object.isFunction(selector) && Object.isUndefined(callback)) {
      callback = selector, selector = null;
    }

    return new Event.Handler(element, eventName, selector, callback).start();
  }

  Object.extend(Event, Event.Methods);

  Object.extend(Event, {
    fire:          fire,
    observe:       observe,
    stopObserving: stopObserving,
    on:            on
  });

  Element.addMethods({
    fire:          fire,

    observe:       observe,

    stopObserving: stopObserving,

    on:            on
  });

  Object.extend(document, {
    fire:          fire.methodize(),

    observe:       observe.methodize(),

    stopObserving: stopObserving.methodize(),

    on:            on.methodize(),

    loaded:        false
  });

  if (GLOBAL.Event) Object.extend(window.Event, Event);
  else GLOBAL.Event = Event;

  GLOBAL.Event.cache = {};

  function destroyCache_IE() {
    GLOBAL.Event.cache = null;
  }

  if (window.attachEvent)
    window.attachEvent('onunload', destroyCache_IE);

  DIV = null;
  docEl = null;
})(this);

(function(GLOBAL) {
  /* Code for creating leak-free event responders is based on work by
   John-David Dalton. */

  var docEl = document.documentElement;
  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl
    && 'onmouseleave' in docEl;

  function isSimulatedMouseEnterLeaveEvent(eventName) {
    return !MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&
     (eventName === 'mouseenter' || eventName === 'mouseleave');
  }

  function createResponder(uid, eventName, handler) {
    if (Event._isCustomEvent(eventName))
      return createResponderForCustomEvent(uid, eventName, handler);
    if (isSimulatedMouseEnterLeaveEvent(eventName))
      return createMouseEnterLeaveResponder(uid, eventName, handler);

    return function(event) {
      if (!Event.cache) return;

      var element = Event.cache[uid].element;
      Event.extend(event, element);
      handler.call(element, event);
    };
  }

  function createResponderForCustomEvent(uid, eventName, handler) {
    return function(event) {
      var element = Event.cache[uid].element;

      if (Object.isUndefined(event.eventName))
        return false;

      if (event.eventName !== eventName)
        return false;

      Event.extend(event, element);
      handler.call(element, event);
    };
  }

  function createMouseEnterLeaveResponder(uid, eventName, handler) {
    return function(event) {
      var element = Event.cache[uid].element;

      Event.extend(event, element);
      var parent = event.relatedTarget;

      while (parent && parent !== element) {
        try { parent = parent.parentNode; }
        catch(e) { parent = element; }
      }

      if (parent === element) return;
      handler.call(element, event);
    }
  }

  GLOBAL.Event._createResponder = createResponder;
  docEl = null;
})(this);

(function(GLOBAL) {
  /* Support for the DOMContentLoaded event is based on work by Dan Webb,
     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */

  var TIMER;

  function fireContentLoadedEvent() {
    if (document.loaded) return;
    if (TIMER) window.clearTimeout(TIMER);
    document.loaded = true;
    document.fire('dom:loaded');
  }

  function checkReadyState() {
    if (document.readyState === 'complete') {
      document.detachEvent('onreadystatechange', checkReadyState);
      fireContentLoadedEvent();
    }
  }

  function pollDoScroll() {
    try {
      document.documentElement.doScroll('left');
    } catch (e) {
      TIMER = pollDoScroll.defer();
      return;
    }

    fireContentLoadedEvent();
  }


  if (document.readyState === 'complete') {
    fireContentLoadedEvent();
    return;
  }

  if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent, false);
  } else {
    document.attachEvent('onreadystatechange', checkReadyState);
    if (window == top) TIMER = pollDoScroll.defer();
  }

  Event.observe(window, 'load', fireContentLoadedEvent);
})(this);


Element.addMethods();
/*------------------------------- DEPRECATED -------------------------------*/

Hash.toQueryString = Object.toQueryString;

var Toggle = { display: Element.toggle };

Element.Methods.childOf = Element.Methods.descendantOf;

var Insertion = {
  Before: function(element, content) {
    return Element.insert(element, {before:content});
  },

  Top: function(element, content) {
    return Element.insert(element, {top:content});
  },

  Bottom: function(element, content) {
    return Element.insert(element, {bottom:content});
  },

  After: function(element, content) {
    return Element.insert(element, {after:content});
  }
};

var $continue = new Error('"throw $continue" is deprecated, use "return" instead');

var Position = {
  includeScrollOffsets: false,

  prepare: function() {
    this.deltaX =  window.pageXOffset
                || document.documentElement.scrollLeft
                || document.body.scrollLeft
                || 0;
    this.deltaY =  window.pageYOffset
                || document.documentElement.scrollTop
                || document.body.scrollTop
                || 0;
  },

  within: function(element, x, y) {
    if (this.includeScrollOffsets)
      return this.withinIncludingScrolloffsets(element, x, y);
    this.xcomp = x;
    this.ycomp = y;
    this.offset = Element.cumulativeOffset(element);

    return (y >= this.offset[1] &&
            y <  this.offset[1] + element.offsetHeight &&
            x >= this.offset[0] &&
            x <  this.offset[0] + element.offsetWidth);
  },

  withinIncludingScrolloffsets: function(element, x, y) {
    var offsetcache = Element.cumulativeScrollOffset(element);

    this.xcomp = x + offsetcache[0] - this.deltaX;
    this.ycomp = y + offsetcache[1] - this.deltaY;
    this.offset = Element.cumulativeOffset(element);

    return (this.ycomp >= this.offset[1] &&
            this.ycomp <  this.offset[1] + element.offsetHeight &&
            this.xcomp >= this.offset[0] &&
            this.xcomp <  this.offset[0] + element.offsetWidth);
  },

  overlap: function(mode, element) {
    if (!mode) return 0;
    if (mode == 'vertical')
      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
        element.offsetHeight;
    if (mode == 'horizontal')
      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
        element.offsetWidth;
  },


  cumulativeOffset: Element.Methods.cumulativeOffset,

  positionedOffset: Element.Methods.positionedOffset,

  absolutize: function(element) {
    Position.prepare();
    return Element.absolutize(element);
  },

  relativize: function(element) {
    Position.prepare();
    return Element.relativize(element);
  },

  realOffset: Element.Methods.cumulativeScrollOffset,

  offsetParent: Element.Methods.getOffsetParent,

  page: Element.Methods.viewportOffset,

  clone: function(source, target, options) {
    options = options || { };
    return Element.clonePosition(target, source, options);
  }
};

/*--------------------------------------------------------------------------*/

if (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){
  function iter(name) {
    return name.blank() ? null : "[contains(concat(' ', @class, ' '), ' " + name + " ')]";
  }

  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?
  function(element, className) {
    className = className.toString().strip();
    var cond = /\s/.test(className) ? $w(className).map(iter).join('') : iter(className);
    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];
  } : function(element, className) {
    className = className.toString().strip();
    var elements = [], classNames = (/\s/.test(className) ? $w(className) : null);
    if (!classNames && !className) return elements;

    var nodes = $(element).getElementsByTagName('*');
    className = ' ' + className + ' ';

    for (var i = 0, child, cn; child = nodes[i]; i++) {
      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||
          (classNames && classNames.all(function(name) {
            return !name.toString().blank() && cn.include(' ' + name + ' ');
          }))))
        elements.push(Element.extend(child));
    }
    return elements;
  };

  return function(className, parentElement) {
    return $(parentElement || document.body).getElementsByClassName(className);
  };
}(Element.Methods);

/*--------------------------------------------------------------------------*/

Element.ClassNames = Class.create();
Element.ClassNames.prototype = {
  initialize: function(element) {
    this.element = $(element);
  },

  _each: function(iterator, context) {
    this.element.className.split(/\s+/).select(function(name) {
      return name.length > 0;
    })._each(iterator, context);
  },

  set: function(className) {
    this.element.className = className;
  },

  add: function(classNameToAdd) {
    if (this.include(classNameToAdd)) return;
    this.set($A(this).concat(classNameToAdd).join(' '));
  },

  remove: function(classNameToRemove) {
    if (!this.include(classNameToRemove)) return;
    this.set($A(this).without(classNameToRemove).join(' '));
  },

  toString: function() {
    return $A(this).join(' ');
  }
};

Object.extend(Element.ClassNames.prototype, Enumerable);

/*--------------------------------------------------------------------------*/

(function() {
  window.Selector = Class.create({
    initialize: function(expression) {
      this.expression = expression.strip();
    },

    findElements: function(rootElement) {
      return Prototype.Selector.select(this.expression, rootElement);
    },

    match: function(element) {
      return Prototype.Selector.match(element, this.expression);
    },

    toString: function() {
      return this.expression;
    },

    inspect: function() {
      return "#<Selector: " + this.expression + ">";
    }
  });

  Object.extend(Selector, {
    matchElements: function(elements, expression) {
      var match = Prototype.Selector.match,
          results = [];

      for (var i = 0, length = elements.length; i < length; i++) {
        var element = elements[i];
        if (match(element, expression)) {
          results.push(Element.extend(element));
        }
      }
      return results;
    },

    findElement: function(elements, expression, index) {
      index = index || 0;
      var matchIndex = 0, element;
      for (var i = 0, length = elements.length; i < length; i++) {
        element = elements[i];
        if (Prototype.Selector.match(element, expression) && index === matchIndex++) {
          return Element.extend(element);
        }
      }
    },

    findChildElements: function(element, expressions) {
      var selector = expressions.toArray().join(', ');
      return Prototype.Selector.select(selector, element || document);
    }
  });
})();
</script><script>var Grafico={Version:"0.9.1",Base:{},BaseGraph:{},Normaliser:{},LineGraph:{},AreaGraph:{},StackGraph:{},StreamGraph:{},BarGraph:{},StackedBarGraph:{},HorizontalBarGraph:{},SparkLine:{},SparkBar:{}};
Grafico.Base=Class.create({normaliseData:function(a){return $A(a).collect(function(a){return this.normalise(a)}.bind(this))},deepCopy:function(a){var b,c,d;if(Object.prototype.toString.call(a)==="[object Array]"){b=[];d=a.length;for(c=0;c<d;c++)b[c]=arguments.callee(a[c]);return b}if(typeof a==="object"){b={};for(c in a)b[c]=arguments.callee(a[c]);return b}return a}});
Grafico.Normaliser=Class.create({initialize:function(a,b){this.options={start_value:void 0,number_of_tickmarks:10};Object.extend(this.options,b||{});this.min=a.min();this.max=a.max();this.step=this.range=this.zero_value=this.start_value=void 0;if(this.options.start_value!==void 0)this.zero_value=this.start_value=this.options.start_value;this.min==0&&this.min==this.max?(this.zero_value=this.start_value=0,this.step=this.range=1):this.looseLabels(this.start_value!==void 0&&this.min>=0?this.start_value:
this.min,this.max)},looseLabels:function(a,b){var c=this.niceNumber((a==b?this.niceNumber(Math.abs(b),!1):this.niceNumber(b-a,!1))/(this.options.number_of_tickmarks-1),!0),d=[-Math.floor(Math.LOG10E*Math.log(c)),0].max(),e=this.floorToPrecision(a/c,d)*c,f=this.ceilToPrecision(b/c,d)*c,g=this.roundToPrecision(this.niceNumber(0.5*c,!0),d);this.step=this.roundToPrecision(c,d);this.max<=0?f=[f+g,0].min():f+=g;this.min<0?e-=g:e=[e-g,0].max();a!==b&&(e=this.roundToOrigin(e,1));this.range=this.roundToPrecision(Math.abs(this.ceilToPrecision(f,
d)-this.floorToPrecision(e,d)),d);this.start_value=this.floorToPrecision(e,d);this.zero_value=this.roundToPrecision(Math.abs(e)/this.step,d)},roundToPrecision:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},floorToPrecision:function(a,b){var c=Math.pow(10,b);return Math.floor(a*c)/c},ceilToPrecision:function(a,b){var c=Math.pow(10,b);return Math.ceil(a*c)/c},niceNumber:function(a,b){var c=Math.floor(Math.LOG10E*Math.log(a)),d;c=c<0?parseFloat(Math.pow(10,c).toFixed(Math.abs(c))):Math.pow(10,
c);d=a/c;return(b?d<1.5?1:d<3?2:d<7?5:10:d<=1?1:d<=2?2:d<=5?5:10)*c},roundToOrigin:function(a,b){var c=a;c=Math.pow(10,-(b||1));c=Math.round(a*c)/c;return c>this.min?this.roundToOrigin(a-this.step):c}});
Grafico.BaseGraph=Class.create(Grafico.Base,{initialize:function(a,b,c){this.options={width:parseInt(a.getStyle("width"),10),height:parseInt(a.getStyle("height"),10),grid:!0,show_vertical_grid:!0,show_horizontal_grid:!0,plot_padding:10,font_size:10,show_horizontal_labels:!0,show_vertical_labels:!0,show_ticks:!0,vertical_label_unit:"",background_color:"#fff",label_color:"#000",grid_color:"#ccc",hover_text_color:"#fff",markers:!1,marker_size:5,meanline:!1,padding_top:20,draw_axis:!0,datalabels:"",hover_color:"",
hover_radius:15,watermark:!1,watermark_location:!1,hide_empty_label_grid:!1,left_padding:!1,right_padding:!1,label_rotation:0,label_max_size:!1,focus_hint:!0,min:0,max:null,normaliser:Grafico.Normaliser};Object.extend(this.options,this.chartDefaults()||{});Object.extend(this.options,c||{});this.element=a;this.data_sets=Object.isArray(b)?new Hash({one:b}):$H(b);if(this.chartDefaults().stacked===!0)this.real_data=this.deepCopy(this.data_sets),this.data_sets=this.stackData(this.data_sets);this.flat_data=
this.data_sets.collect(function(a){return a[1]}).flatten();if(this.hasBaseLine())this.flat_data.push(this.base_line),this.flat_data=this.flat_data.flatten();this.normaliser=new this.options.normaliser(this.flat_data,this.normaliserOptions());this.label_step=this.normaliser.step;this.range=this.normaliser.range;this.start_value=this.normaliser.start_value;this.zero_value=this.normaliser.zero_value;this.data_size=this.longestDataSetLength();if(c&&c.color)c.colors={},this.data_sets.keys().each(function(a){c.colors[a]=
c.color});this.options.colors=this.makeRandomColors();this.options.labels=$A($R(1,this.data_size));Object.extend(this.options,this.chartDefaults()||{});Object.extend(this.options,c||{});this.x_padding_left=10+this.paddingLeftOffset();this.x_padding_left+=this.options.vertical_label_unit?6:0;this.x_padding_left=this.options.left_padding?this.options.left_padding:this.x_padding_left;this.x_padding_right=this.options.right_padding||this.paddingRightOffset();this.x_padding=this.x_padding_left+this.x_padding_right;
this.y_padding_top=this.options.padding_top;this.y_padding_bottom=20+this.paddingBottomOffset();this.y_padding=this.y_padding_top+this.y_padding_bottom;this.graph_width=this.options.width-this.x_padding;this.graph_height=this.options.height-this.y_padding;this.step=this.calculateStep();this.y_label_count=(this.range/this.label_step).round();if(isNaN(this.y_label_count))this.y_label_count=1,this.options.show_vertical_labels=!1;this.normaliser.min+this.y_label_count*this.normaliser.step<this.normaliser.max&&
(this.y_label_count+=1);this.value_labels=this.makeValueLabels(this.y_label_count);this.top_value=this.value_labels.last();this.grid_start_offset=-1;this.paper=new Raphael(this.element,this.options.width,this.options.height);this.background=this.paper.rect(this.x_padding_left,this.y_padding_top,this.graph_width,this.graph_height);this.background.attr({fill:this.options.background_color,stroke:"none"});this.options.meanline=this.options.meanline===!0?{"stroke-width":"2px",stroke:"#BBBBBB"}:this.options.meanline;
this.globalMarkerSet=this.paper.set();this.globalHoverSet=this.paper.set();this.globalBlockSet=this.paper.set();this.globalAreaLineSet=this.paper.set();this.setChartSpecificOptions();this.draw();this.globalAreaLineSet.toFront();this.globalMarkerSet.toFront();this.globalHoverSet.toFront();this.globalBlockSet.toFront()},normaliserOptions:function(){return{graph_height:parseInt(this.element.getStyle("height"),10)}},hasBaseLine:function(){return!1},getNormalizedBaseLine:function(){if(this.normalized_base_line==
void 0)this.normalized_base_line=this.normaliseData(this.base_line);return this.normalized_base_line},getNormalizedRealData:function(){if(this.normalized_real_data==void 0)this.normalized_real_data=this.real_data.collect(function(a){return this.normaliseData(a[1])}.bind(this));return this.normalized_real_data},chartDefaults:function(){},drawPlot:function(){},calculateStep:function(){},getMousePos:function(a){var b=0,c=0;if(!a)a=window.event;if(a.pageX||a.pageY)b=a.pageX,c=a.pageY;else if(a.clientX||
a.clientY)b=a.clientX+document.body.scrollLeft-document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop-document.documentElement.scrollTop;return{x:b,y:c}},makeRandomColors:function(){var a={},b=1/this.data_sets.size(),c=Math.random();this.data_sets.each(function(d){a[d[0]]=Raphael.hsb2rgb(c,0.85,0.75).hex;c=(c+b)%1});return a},longestDataSetLength:function(){var a=0;this.data_sets.each(function(b){a=b[1].length>a?b[1].length:a});return a},roundValue:function(a,b){var c=Math.pow(10,
b);a*=c;return a=Math.round(a)/c},roundValues:function(a,b){return $A(a).collect(function(a){return this.roundValue(a,b)}.bind(this))},paddingLeftOffset:function(){var a=0;if(this.options.show_vertical_labels)a=this.flat_data,a=this.roundValues(a,2),a=$A(a).max(function(a){return a.toString().length}),a=(a>2?a-1:a)*this.options.font_size;return a},paddingRightOffset:function(){return 20},paddingBottomOffset:function(){return this.options.font_size},normalise:function(a){var b=this.start_value===0?
this.top_value:this.range;b===0&&(b=1);return a/b*this.graph_height},draw:function(){this.options.grid&&this.drawGrid();this.options.watermark&&this.drawWatermark();this.options.show_vertical_labels&&this.drawVerticalLabels();this.options.show_horizontal_labels&&this.drawHorizontalLabels();this.options.watermark||this.drawLinesInit(this);this.options.draw_axis&&this.drawAxis();this.start_value!==0&&this.options.focus_hint&&this.drawFocusHint();this.options.meanline&&this.drawMeanLine(this.normaliseData(this.flat_data))},
drawLinesInit:function(a){a.data_sets.each(function(b,c){a.drawLines(b[0],a.options.colors[b[0]],a.normaliseData(b[1]),a.options.datalabels[b[0]],a.element,c)}.bind(a))},drawWatermark:function(){var a=this.options.watermark,b=new Image,c=this;b.onload=function(){var a,e;c.options.watermark_location==="middle"?(a=(c.graph_width-b.width)/2+c.x_padding_left,e=(c.graph_height-b.height)/2+c.y_padding_top):(a=c.graph_width-b.width+c.x_padding_left-2,e=c.graph_height-b.height+c.y_padding_top-2);a=c.paper.image(b.src,
a,e,b.width,b.height).attr({opacity:"0.4"});c.drawLinesInit(c,c.data);(c.options.stacked_fill||c.options.area)&&a.toFront()};b.src=a.src||a},drawGrid:function(){var a=this.paper.path().attr({stroke:this.options.grid_color}),b,c,d;if(this.options.show_horizontal_grid){b=this.graph_height+this.y_padding_top;for(d=0;d<this.y_label_count+1;d++)a.moveTo(this.x_padding_left-0.5,parseInt(b,10)+0.5),a.lineTo(this.x_padding_left+this.graph_width-0.5,parseInt(b,10)+0.5),b-=this.graph_height/this.y_label_count}if(this.options.show_vertical_grid){b=
this.x_padding_left+this.options.plot_padding+this.grid_start_offset;c=this.options.labels.length;for(d=0;d<c;d++){if(this.options.hide_empty_label_grid===!0&&this.options.labels[d]!==""||this.options.hide_empty_label_grid===!1)a.moveTo(parseInt(b,10),this.y_padding_top),a.lineTo(parseInt(b,10),this.y_padding_top+this.graph_height);b+=this.step}}},drawLines:function(a,b,c,d,e,f){var g=this.calculateCoords(c),h=this.graph_height+this.y_padding_top,i,j,k;if(this.options.start_at_zero===!1)k=0,$A(g).each(function(a){if(a[1]===
h)k++;else throw $break;}),this.options.odd_horizontal_offset=k,this.options.odd_horizontal_offset>1&&g.splice(0,this.options.odd_horizontal_offset);this.options.stacked_fill||this.options.area?(this.options.area?(a=this.options.area_opacity?this.options.area_opacity:1.5/this.data_sets.collect(function(a){return a.length}).length,i=this.paper.path().attr({stroke:b,fill:b,"stroke-width":"0",opacity:a,"stroke-opacity":0})):i=this.paper.path().attr({stroke:b,fill:b,"stroke-width":"0"}),this.hasBaseLine()||
(g.unshift([g[0][0],h]),g.push([g[g.length-1][0],h]))):i=this.paper.path().attr({stroke:b,"stroke-width":this.options.stroke_width+"px"});$A(g).each(function(a,c){var h=a[0],j=a[1];b instanceof Array?this.drawPlot(c,i,h,j,b[c%b.length],g,d,e,f):this.drawPlot(c,i,h,j,b,g,d,e,f)}.bind(this));this.options.area&&this.options.stroke_width>0&&(j=this.paper.path().attr({stroke:b,"stroke-width":this.options.stroke_width+"px"}),g.remove(0),g.remove(-1),$A(g).each(function(a,c){this.drawPlot(c,j,a[0],a[1],
b,g,d,e,f,!0)}.bind(this)),this.globalAreaLineSet.push(j));this.options.datalabels&&this.options.draw_hovers&&(this.drawHover(i,d,e,b),this.globalHoverSet.toFront())},calculateCoords:function(a){var b=this.x_padding_left+this.options.plot_padding-this.step,c=this.graph_height+this.y_padding_top+this.normalise(this.start_value);a=$A(a).collect(function(a){b+=this.step;return[b,c-a]}.bind(this));if(!this.hasBaseLine())return a;b+=this.step;for(var d=this.getNormalizedBaseLine(),e=d.length-1;e>=0;e--)b-=
this.step,a.push([b,c-d[e]]);return a},drawFocusHint:function(){var a=this.x_padding_left+2.5-1,b=this.options.height-this.y_padding_bottom,c=this.paper.path().attr({stroke:this.options.label_color,"stroke-width":2});c.moveTo(a,b);c.lineTo(a-5,b-5);c.moveTo(a,b-5);c.lineTo(a-5,b-10)},drawMeanLine:function(a){var b=this.paper.path().attr(this.options.meanline);a=$A(a).inject(0,function(a,b){return b+a})/a.length-0.5;a=this.options.bar?a+this.zero_value*(this.graph_height/this.y_label_count):a;b.moveTo(this.x_padding_left-
1,this.options.height-this.y_padding_bottom-a).lineTo(this.graph_width+this.x_padding_left,this.options.height-this.y_padding_bottom-a)},drawAxis:function(){var a=this.paper.path().attr({stroke:this.options.label_color});a.moveTo(parseInt(this.x_padding_left,10)-0.5,this.options.height-parseInt(this.y_padding_bottom,10)+0.5);a.lineTo(parseInt(this.graph_width+this.x_padding_left,10)-0.5,this.options.height-parseInt(this.y_padding_bottom,10)+0.5);a.moveTo(parseInt(this.x_padding_left,10)-0.5,parseInt(this.options.height-
this.y_padding_bottom,10)+0.5);a.lineTo(parseInt(this.x_padding_left,10)-0.5,parseInt(this.y_padding_top,10))},makeValueLabels:function(a){for(var b=this.label_step,c=this.start_value,d=[],e=0;e<a;e++)c=this.roundValue(c+b,3),d.push(c);return d},drawMarkers:function(a,b,c,d,e,f){var g=parseInt(this.x_padding_left,10)-0.5+d*b[0],h=this.options.height-this.y_padding_bottom+d*b[1],i=this.paper.path().attr({stroke:this.options.label_color}),j={font:this.options.font_size+'px "Arial"',stroke:"none",fill:this.options.label_color};
Object.extend(j,f||{});a.each(function(a){if(this.options.draw_axis&&(this.options.hide_empty_label_grid===!0&&a!==""||this.options.hide_empty_label_grid===!1)&&this.options.show_ticks)i.moveTo(parseInt(g,10),parseInt(h,10)+0.5),i.lineTo(parseInt(g,10)+5*b[1],parseInt(h,10)+0.5+5*b[0]);a!==""&&this.paper.text(g+e[0],h-2-e[1],a.toString()).attr(j);g+=c*b[0];h+=c*b[1]}.bind(this))},drawVerticalLabels:function(){for(var a=this.graph_height/this.y_label_count,b=this.options.vertical_label_unit?" "+this.options.vertical_label_unit:
"",c=0;c<this.value_labels.length;c++)this.value_labels[c]+=b;this.drawMarkers(this.value_labels,[0,-1],a,a,[-8,-2],{"text-anchor":"end"})},drawHorizontalLabels:function(){var a=this.options.label_rotation?{rotation:this.options.label_rotation,translation:-this.options.font_size+" 0"}:{},b=this.options.labels;if(this.options.label_max_size)for(var c=0;c<b.length;c++)b[c]=b[c].truncate(this.options.label_max_size+1,"\u2026");this.drawMarkers(b,[1,0],this.step,this.options.plot_padding,[0,(this.options.font_size+
7)*-1],a)},drawHover:function(a,b,c,d){var e=this,f=this.options.stacked_fill||this.options.area?"fill":"stroke",g=this.options.hover_color||d,h=this.paper.set();b=this.paper.text(a.attrs.x,a.attrs.y-this.options.font_size*1.5-4,b).attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,opacity:1});var i=b.getBBox(),j=this.drawRoundRect(b,i,4);h.push(j,b).attr({opacity:0});this.checkHoverPos({rect:j,set:h});this.globalHoverSet.push(h);a.hover(function(b){f==="fill"?a.animate({fill:g,
stroke:g},200):a.animate({stroke:g},200);b=e.getMousePos(b);h[0].attr({x:b.x-i.width/2-4-c.offsetLeft,y:b.y-i.height/2-e.options.font_size*1.5-4-c.offsetTop,opacity:1});h[1].attr({x:b.x-c.offsetLeft,y:b.y-e.options.font_size*1.5-c.offsetTop,opacity:1});a.mousemove(function(a){a=e.getMousePos(a);h[0].attr({x:a.x-i.width/2-4-c.offsetLeft,y:a.y-i.height/2-e.options.font_size*1.5-4-c.offsetTop,opacity:1});h[1].attr({x:a.x-c.offsetLeft,y:a.y-e.options.font_size*1.5-c.offsetTop,opacity:1});e.checkHoverPos(j,
h)})},function(){f==="fill"?a.animate({fill:d,stroke:d},200):a.animate({stroke:d},200);h.attr({opacity:0})})},checkHoverPos:function(a){var b,c,d,e,f,g;if(a.rect)c=a.rect,d=c.getBBox();if(a.set)e=a.set;if(a.marker)f=a.marker;if(a.nib)g=a.nib;if(a.textpadding)b=a.textpadding;if(c&&e){if(c.attrs.y<0)g&&f?(a=e.getBBox(),e.translate(0,a.height+b*2),f.translate(0,-a.height-b*2),g.translate(0,-d.height-b+1.5).scale(1,-1)):(b=c.attrs.y,e.translate(0,1-b));c.attrs.y+d.height>this.options.height&&(b=c.attrs.y+
d.height-this.options.height,e.translate(0,-b-1),f&&f.translate(0,b+1));if(c.attrs.x<0)b=c.attrs.x,e.translate(-b+1,0),g&&g.translate(b-1,0),f&&f.translate(b-1,0);c.attrs.x+d.width>this.options.width&&(b=c.attrs.x+d.width-this.options.width,e.translate(-b-1,0),g&&g.translate(b+1,0),f&&f.translate(b+1,0))}},drawNib:function(a,b,c){return this.paper.path().attr({fill:this.options.label_color,opacity:1,stroke:this.options.label_color,"stroke-width":"0px"}).moveTo(a.attrs.x-c,a.attrs.y+b.height/2+c-1).lineTo(a.attrs.x,
a.attrs.y+b.height/2+c*2).lineTo(a.attrs.x+c,a.attrs.y+b.height/2+c-1).andClose()},drawRoundRect:function(a,b,c){return this.paper.rect(a.attrs.x-b.width/2-c,a.attrs.y-b.height/2-c,b.width+c*2,b.height+c*2,c*1.5).attr({fill:this.options.label_color,opacity:1,stroke:this.options.label_color,"stroke-width":"0px"})}});Array.prototype.sum=function(){for(var a=0,b=0;a<this.length;b+=this[a++]);return b};
if(typeof Array.prototype.max==="undefined")Array.prototype.max=function(){return Math.max.apply({},this)};if(typeof Array.prototype.min==="undefined")Array.prototype.min=function(){return Math.min.apply({},this)};Array.prototype.mean=function(){return this.sum()/this.length};Array.prototype.variance=function(){for(var a=this.mean(),b=0,c=0;c<this.length;c++)b+=Math.pow(this[c]-a,2);return b/(this.length-1)};Array.prototype.standard_deviation=function(){return Math.sqrt(this.variance())};
Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=a<0?this.length+a:a;return this.push.apply(this,c)};Raphael.el.isAbsolute=!0;Raphael.el.absolutely=function(){this.isAbsolute=1;return this};Raphael.el.relatively=function(){this.isAbsolute=0;return this};Raphael.el.moveTo=function(a,b){this._last={x:a,y:b};return this.attr({path:this.attrs.path+["m","M"][+this.isAbsolute]+parseFloat(a)+" "+parseFloat(b)})};
Raphael.el.lineTo=function(a,b){this._last={x:a,y:b};return this.attr({path:this.attrs.path+["l","L"][+this.isAbsolute]+parseFloat(a)+" "+parseFloat(b)})};Raphael.el.cplineTo=function(a,b,c){a>this._last.x?this.attr({path:this.attrs.path+["C",this._last.x+c,this._last.y,a-c,b,a,b]}):a==this._last.x?this.lineTo(a,b):this.attr({path:this.attrs.path+["C",this._last.x-c,this._last.y,a+c,b,a,b]});this._last={x:a,y:b};return this};Raphael.el.andClose=function(){return this.attr({path:this.attrs.path+"z"})};
Grafico.LineGraph=Class.create(Grafico.BaseGraph,{chartDefaults:function(){return{line:!0,start_at_zero:!0,stroke_width:5,curve_amount:10}},setChartSpecificOptions:function(){},calculateStep:function(){return(this.graph_width-this.options.plot_padding*2)/(this.data_size-1)},startPlot:function(a,b,c){a.moveTo(b,c)},drawPlot:function(a,b,c,d,e,f,g,h,i){if(a===0)return this.startPlot(b,c-0.5,d,e);this.options.curve_amount?b.cplineTo(c,d,this.options.curve_amount):b.lineTo(c,d);this.options.markers===
"circle"?this.drawGraphMarkers(a,c,d,e,g,h):this.options.markers==="value"&&this.drawGraphValueMarkers(a,c,d,e,g,h,i)},drawGraphMarkers:function(a,b,c,d){var e=this.paper.circle(b,c,this.options.marker_size),f=this.options.marker_size,g=this.options.hover_color||d,h=parseInt(1.7*f,10);e.attr({"stroke-width":"1px",stroke:this.options.background_color,fill:d});this.globalMarkerSet.push(e);e.hover(function(){e.animate({r:h,fill:g},200)},function(){e.animate({r:f,fill:d},200)})},drawGraphValueMarkers:function(a,
b,c,d,e,f,g){a+=this.options.odd_horizontal_offset>1?this.options.odd_horizontal_offset:0;a-=this.options.stacked_fill||this.options.area?1:0;if(f=(this.options.stacked?this.real_data:this.data_sets).collect(function(b){return b[1][a]})[g])f=""+f.toString().split("."),f[1]&&(f[1]=f[1].truncate(3,""));if(this.options.line||this.options.stacked||(this.options.stacked_fill||this.options.area)&&a!=-1&&typeof f!="undefined"){g=b-this.step/2;var h=c-[this.options.stroke_width/2,this.options.hover_radius].max(),
i=this.step,j=[this.options.stroke_width,this.options.hover_radius*2].max();b=this.paper.circle(b,c,this.options.marker_size==0?[this.options.stroke_width*1.5,this.step].min():this.options.marker_size).attr({"stroke-width":"1px",stroke:this.options.background_color,fill:d,opacity:0});d=this.paper.rect(g,h,i,j).attr({fill:d,"stroke-width":0,stroke:d,opacity:0});e=this.options.datalabels?typeof e=="function"?e.call(this,a,f):e+": "+f:""+f;e+=this.options.vertical_label_unit?" "+this.options.vertical_label_unit:
"";var k=this.paper.set();e=this.paper.text(b.attrs.cx,b.attrs.cy-this.options.font_size*1.5-8,e).attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,opacity:1});f=e.getBBox();c=this.drawRoundRect(e,f,4);f=this.drawNib(e,f,4);k.push(b,c,f,e).attr({opacity:0});this.checkHoverPos({rect:c,set:k,marker:b,nib:f,textpadding:4});this.globalHoverSet.push(k);this.globalBlockSet.push(d);d.hover(function(){k.animate({opacity:1},200)},function(){k.animate({opacity:0},200)})}}});
Grafico.AreaGraph=Class.create(Grafico.LineGraph,{chartDefaults:function(){return{area:!0,area_opacity:!1,stroke_width:0,curve_amount:10}},drawPlot:function(a,b,c,d,e,f,g,h,i,j){var k=this.options.area||this.options.stacked_fill;j||(k===!0?a!==0&&a!==f.length-1&&(this.options.markers==="circle"?this.drawGraphMarkers(a,c,d,e,g,h):this.options.markers==="value"&&this.drawGraphValueMarkers(a,c,d,e,g,h,i)):this.options.markers==="circle"?this.drawGraphMarkers(a,c,d,e,g,h):this.options.markers==="value"&&
this.drawGraphValueMarkers(a,c,d,e,g,h,i));c-=0.5;if(a===0)return this.startPlot(b,c,d,e);this.options.curve_amount&&a>1&&a<f.length-1?b.cplineTo(c,d,this.options.curve_amount):this.options.curve_amount&&!k?b.cplineTo(c,d,this.options.curve_amount):b.lineTo(c,d)}});
Grafico.StackGraph=Class.create(Grafico.AreaGraph,{chartDefaults:function(){return{stacked:!0,stacked_fill:!0,stroke_width:0,curve_amount:10}},setChartSpecificOptions:function(){if(!this.options.stacked_fill)this.options.stroke_width=5},stackData:function(a){for(var b=a.collect(function(a){return a[1]}),c=b.length-2;c>=0;c--)for(var d=0;d<b[0].length;d++)b[c][d]+=b[c+1][d];return a}});
Grafico.StreamGraph=Class.create(Grafico.StackGraph,{chartDefaults:function(){return{stacked:!0,stacked_fill:!0,stroke_width:5,grid:!1,draw_axis:!1,show_horizontal_labels:!1,show_vertical_labels:!1,stream:!0,stream_line_smoothing:!1,stream_smart_insertion:!1,curve_amount:4,stream_label_threshold:0}},hasBaseLine:function(){return!0},calcBaseLine:function(a){var b=a.collect(function(a){return a[1]});a=[];var c,d;for(d=0;d<b[0].length;d++){for(c=sum=0;c<b.length;c++)sum+=this.options.stream_line_smoothing==
!1?b[c][d]:(c+1)*b[c][d];a[d]=this.options.stream_line_smoothing==!1?-sum/2:-sum/(b.length+1)}b=a.min();for(c=0;c<a.length;c++)a[c]-=b;this.base_line=a},stackData:function(a){var b,c;if(this.options.stream_smart_insertion){a=$A(a);a.each(function(a){for(b=0;b<a[1].length&&a[1][b]<=1.0E-7;)b++;a[2]=b});var d=[],e=!1;a.sortBy(function(a){return a[2]}).each(function(a){e?d.push(a):d.unshift(a);e=!e});a=$H();d.each(function(b){a.set(b[0],b[1])})}this.real_data=this.deepCopy(a);this.calcBaseLine(a);var f=
a.collect(function(a){return a[1]});for(c=0;c<f[0].length;c++)f[f.length-1][c]+=this.base_line[c];for(b=f.length-2;b>=0;b--)for(c=0;c<f[0].length;c++)f[b][c]+=f[b+1][c];return a},drawPlot:function(a,b,c,d,e,f,g,h,i,j){if(this.options.datalabels&&!j){j=this.getNormalizedRealData();var k=this.bestMarkerPositions();a<f.length/2&&k[i]>=a&&k[i]<a+1&&this.drawStreamMarker(a+1,c+(k[i]-a)*this.step,d+j[i][a]/2,e,g,h)}c-=0.5;if(a===0)return this.startPlot(b,c,d,e);b.cplineTo(c,d,this.options.curve_amount)},
bestMarkerPositions:function(){if(this.best_marker_positions==void 0)this.best_marker_positions=this.real_data.collect(function(a){for(var b=-1,c=0,d=0,e=0;e<a[1].length;e++){var f=a[1][e];f>c&&f>=this.options.stream_label_threshold?(c=f,b=e,d=0):f==c&&c>0&&d++}return b+d/2}.bind(this));return this.best_marker_positions},drawStreamMarker:function(a,b,c,d,e){this.options.datalabels&&(a=this.paper.set(),b=this.paper.text(b,c-8+this.options.font_size/2,e).attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,
opacity:1}),c=b.getBBox(),c=this.drawRoundRect(b,c,4),a.push(c,b),this.checkHoverPos({rect:c,set:a,textpadding:4}),this.globalHoverSet.push(a))}});
Grafico.BarGraph=Class.create(Grafico.BaseGraph,{chartDefaults:function(){return{bar:!0,plot_padding:0,bargraph_lastcolor:!1,bargraph_negativecolor:!1}},normaliserOptions:function(){return{start_value:0,bar:!0}},setChartSpecificOptions:function(){this.bar_padding=5;this.bar_width=this.calculateBarWidth();this.options.plot_padding=this.bar_width/2;this.step=this.calculateStep();this.grid_start_offset=this.bar_padding-1},calculateBarWidth:function(){return this.graph_width/this.data_size-this.bar_padding},
calculateStep:function(){this.data_size=this.data_size==1?2:this.data_size;return(this.graph_width-this.options.plot_padding*2-this.bar_padding*2)/(this.data_size-1)},longestDataSetLength:function(){var a=0;this.data_sets.each(function(b){a=b[1].length>a?b[1].length:a});return a},drawPlot:function(a,b,c,d,e,f,g){b=this.options.height-this.y_padding_bottom-this.zero_value*(this.graph_height/this.y_label_count);var h=this.options.bargraph_lastcolor,i=this.options.bargraph_negativecolor||e;c+=this.bar_padding;
d=b-d;e=h&&a===f.length-1?h:d<0?i:e;f=this.paper.rect(c-this.bar_width/2,b,this.bar_width,d).attr({fill:e,"stroke-width":this.options.stroke_width,stroke:e,"stroke-opacity":0});d<0?f.attr({height:-f.attrs.height}):f.translate(0,-d);this.options.datalabels&&this.drawGraphValueMarkers(c,a,f,g,e);this.options.count++},drawHorizontalLabels:function(){var a=this.bar_padding+this.options.plot_padding,b=this.options.label_rotation?{rotation:this.options.label_rotation,translation:-this.options.font_size+
" 0"}:{},c=this.options.labels;if(this.options.label_max_size)for(var d=0;d<c.length;d++)c[d]=c[d].truncate(this.options.label_max_size+1,"\u2026");this.drawMarkers(this.options.labels,[1,0],this.step,a,[0,(this.options.font_size+7)*-1],b)},drawGrid:function(){var a=this.paper.path().attr({stroke:this.options.grid_color,"stroke-width":1}),b=this.graph_height+this.y_padding_top,c,d;if(this.options.horizontalbar)a.moveTo(this.x_padding_left-0.5,parseInt(b,10)+0.5),a.lineTo(this.x_padding_left+this.graph_width-
0.5,parseInt(b,10)+0.5),b-=this.graph_height,a.moveTo(this.x_padding_left-0.5,parseInt(b,10)+0.5),a.lineTo(this.x_padding_left+this.graph_width-0.5,parseInt(b,10)+0.5);else if(this.options.show_horizontal_grid)for(var e=0;e<this.y_label_count+1;e++)a.moveTo(this.x_padding_left-0.5,parseInt(b,10)+0.5),a.lineTo(this.x_padding_left+this.graph_width-0.5,parseInt(b,10)+0.5),b-=this.graph_height/this.y_label_count;if(this.options.horizontalbar){b=this.x_padding_left+this.options.plot_padding+this.grid_start_offset;
c=this.y_label_count;d=this.options.horizontalbar?this.graph_width/this.y_label_count:this.step;for(e=0;e<c;e++){if(this.options.hide_empty_label_grid===!0&&this.options.labels[e]!==""||this.options.hide_empty_label_grid===!1)a.moveTo(parseInt(b,10)+0.5,this.y_padding_top),a.lineTo(parseInt(b,10)+0.5,this.y_padding_top+this.graph_height);b+=d}}a.moveTo(parseInt(this.x_padding_left,10)-0.5,this.y_padding_top);a.lineTo(parseInt(this.x_padding_left,10)-0.5,this.y_padding_top+this.graph_height);a.moveTo(parseInt(this.x_padding_left+
this.graph_width,10)-0.5,this.y_padding_top);a.lineTo(parseInt(this.x_padding_left+this.graph_width,10)-0.5,this.y_padding_top+this.graph_height)},drawGraphValueMarkers:function(a,b,c,d,e){var f=this.options.hover_color||e,g=this.paper.set();a=this.paper.rect(a-this.bar_width/2,this.y_padding_top,this.bar_width,this.options.height).attr({fill:e,"stroke-width":0,stroke:e,opacity:0});if(d=d&&d[b]?d[b].toString():""){b=this.paper.text(c.attrs.x+this.bar_width/2,c.attrs.y-this.options.font_size*1.5,d);
b.attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,opacity:1});var h=b.getBBox();d=this.drawRoundRect(b,h,4);h=this.drawNib(b,h,4);g.push(d,h,b).attr({opacity:0});this.checkHoverPos({rect:d,set:g,nib:h});this.globalHoverSet.push(g);this.globalBlockSet.push(a);d.attrs.y<0&&g.translate(0,1+d.attrs.y*-1);a.hover(function(){c.animate({fill:f,stroke:f},200);g.animate({opacity:1},200)},function(){c.animate({fill:e,stroke:e},200);g.animate({opacity:0},200)})}}});
Grafico.StackedBarGraph=Class.create(Grafico.BarGraph,{chartDefaults:function(){return{opacity:100,bar:!0,plot_padding:0,stacked:!0,stacked_fill:!0}},setChartSpecificOptions:function(){this.bar_padding=5;this.bar_width=this.calculateBarWidth();this.options.plot_padding=this.bar_width/2;this.step=this.calculateStep();this.grid_start_offset=this.bar_padding-1;this.options.stroke_width=1},stackData:function(a){for(var b=a.collect(function(a){return a[1]}),c=b.length-2;c>=0;c--)for(var d=0;d<b[0].length;d++)b[c][d]+=
b[c+1][d];return a},calculateCoords:function(a){var b=this.x_padding_left+this.options.plot_padding-this.step,c=this.graph_height+this.y_padding_top+this.normalise(this.start_value);a=$A(a).collect(function(a){b+=this.step;return[b,c-a]}.bind(this));b+=this.step;for(var d=this.getNormalizedBaseLine(),e=d.length-1;e>=0;e--)b-=this.step,a.push([b,c-d[e]]);return a},drawLines:function(a,b,c,d,e,f){var g=this.calculateCoords(c),h;h=this.paper.path().attr({stroke:b,"stroke-width":0});$A(g).each(function(a,
c){this.drawPlot(c,h,a[0],a[1],b,g,d,e,f)}.bind(this));this.options.datalabels&&this.options.draw_hovers&&(this.drawHover(h,d,e,b),this.globalHoverSet.toFront())},drawPlot:function(a,b,c,d,e,f,g){b=this.options.height-this.y_padding_bottom-this.zero_value*(this.graph_height/this.y_label_count);c+=this.bar_padding;d=this.options.height-this.y_padding_bottom-d-this.zero_value*(this.graph_height/this.y_label_count);f={fill:e,"stroke-width":0,stroke:this.options.color2,opacity:this.options.opacity};b=
this.paper.rect(c-this.bar_width/2,b,this.bar_width,d).attr(f);d<0?b.attr({height:-b.attrs.height}):b.translate(0,-d);this.options.datalabels&&this.drawGraphValueMarkers(c,a,b,g,e);this.options.count++},drawGraphValueMarkers:function(a,b,c,d,e){a-=this.bar_width/2;var f=c.attrs.y,g=this.bar_width,h=c.attrs.height,i=this.options.hover_color||e,j=this.paper.set();a=this.paper.rect(a,f,g,h);d=d&&d.length>b?d[b].toString():"";b=this.paper.text(c.attrs.x+this.bar_width/2,c.attrs.y-this.options.font_size*
1.5,d);a.attr({fill:e,"stroke-width":0,stroke:e,opacity:0});b.attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,opacity:1});f=b.getBBox();d=this.drawRoundRect(b,f,4);f=this.drawNib(b,f,4);j.push(d,f,b).attr({opacity:0});this.checkHoverPos({rect:d,set:j,nib:f});this.globalHoverSet.push(j);this.globalBlockSet.push(a);d.attrs.y<0&&j.translate(0,1+d.attrs.y*-1);a.hover(function(){c.animate({fill:i},200);j.animate({opacity:1},200)},function(){c.animate({fill:e},200);j.animate({opacity:0},
200)})}});
Grafico.HorizontalBarGraph=Class.create(Grafico.BarGraph,{chartDefaults:function(){return{bar:!0,horizontalbar:!0,plot_padding:0,horizontal_rounded:!1,bargraph_lastcolor:!1}},setChartSpecificOptions:function(){this.x_padding_left=20+this.longestLabel()*(this.options.font_size/2);this.bar_padding=5;this.bar_width=this.calculateBarHeight();this.step=this.calculateStep();this.graph_width=this.options.width-this.x_padding_right-this.x_padding_left},normalise:function(a){var b=this.makeValueLabels(this.y_label_count);b=
b[b.length-1];return a/b*this.graph_width},longestLabel:function(){return $A(this.options.labels).sort(function(a,b){return a.toString().length<b.toString().length}).first().toString().length},calculateBarHeight:function(){return this.graph_height/this.data_size-this.bar_padding},calculateStep:function(){return(this.graph_height-this.options.plot_padding*2)/this.data_size},drawLines:function(a,b,c,d){var e=this.y_padding_top+this.bar_padding/2-0.5,f=this.zero_value*(this.graph_width/this.y_label_count),
g=this.x_padding_left+f-0.5,h=this.options.bargraph_lastcolor,i=this.options.bargraph_negativecolor||b;this.datalabel=d;$A(c).each(function(a,d){var l,q=this.options.horizontal_rounded?this.bar_width/2:0,n;l=h&&d===c.length-1?h:a<0?i:b;a=a/this.graph_width*(this.graph_width-f);n=this.paper.rect(g,e,a,this.bar_width,q).attr({fill:l,"stroke-width":0,stroke:l,"stroke-opacity":0});a<0&&n.attr({width:-n.attrs.width}).translate(a,0);if(q){var t=this.paper.set(),m=this.paper.rect(g,e,a-this.bar_width/2,
this.bar_width).attr({fill:l,"stroke-width":0,stroke:l,"stroke-opacity":0});t.push(m,n);a<0&&m.attr({width:-m.attrs.width-this.bar_width}).translate(a+this.bar_width/2,0)}if(this.options.datalabels){var r=this.options.hover_color||l,o=this.paper.set();m=this.paper.text(f+a+this.x_padding_left/2,n.attrs.y-this.options.font_size*1.5,this.datalabel[d].toString()).attr({"font-size":this.options.font_size,fill:this.options.hover_text_color,opacity:1});var u=this.paper.rect(this.x_padding_left,e,this.graph_width,
this.bar_width).attr({fill:l,"stroke-width":0,stroke:l,opacity:0}),p=m.getBBox();a<0&&m.translate(p.width,0);var s=this.drawRoundRect(m,p,4);p=this.drawNib(m,p,4);o.push(s,p,m).attr({opacity:0});this.checkHoverPos({rect:s,set:o,nib:p});this.globalHoverSet.push(o);this.globalBlockSet.push(u);s.attrs.y<0&&o.translate(0,1-s.attrs.y);u.hover(function(){q?t.animate({fill:r,stroke:r},200):n.animate({fill:r,stroke:r},200);o.animate({opacity:1},200)},function(){q?t.animate({fill:l,stroke:l},200):n.animate({fill:l,
stroke:l},200);o.animate({opacity:0},200)})}e+=this.step}.bind(this))},drawFocusHint:function(){var a=this.x_padding_left+10,b=this.options.height-this.y_padding_bottom-2.5;this.paper.path().attr({stroke:this.options.label_color,"stroke-width":2}).moveTo(a,b).lineTo(a-5,b+5).moveTo(a-5,b).lineTo(a-10,b+5)},drawVerticalLabels:function(){var a=this.step/2,b=this.options.label_rotation?{"text-anchor":"end",rotation:this.options.label_rotation,translation:"0 "+this.options.font_size/2}:{"text-anchor":"end"},
c=this.options.labels;if(this.options.label_max_size)for(var d=0;d<c.length;d++)c[d]=c[d].truncate(this.options.label_max_size+1,"\u2026");this.drawMarkers(this.options.labels.reverse(),[0,-1],this.step,a,[-8,-(this.options.font_size/5)],b)},drawHorizontalLabels:function(){var a=this.graph_width/this.y_label_count,b=this.makeValueLabels(this.y_label_count);if(this.options.vertical_label_unit)for(var c=0;c<b.length;c++)b[c]+=this.options.vertical_label_unit;this.drawMarkers(b,[1,0],a,a,[0,(this.options.font_size+
7)*-1])},drawMeanLine:function(a){a=$A(a).inject(0,function(a,c){return c+a})/a.length;a=this.options.bar?a+this.zero_value*(this.graph_height/this.y_label_count):a;this.paper.path().attr(this.options.meanline).moveTo(this.x_padding_left-1+a,this.y_padding_top).lineTo(this.x_padding_left-1+a,this.y_padding_top+this.graph_height)}});
Grafico.SparkLine=Class.create(Grafico.Base,{initialize:function(a,b,c){this.element=a;this.data=b;this.options={highlight:!1,stroke_width:1,color:this.makeRandomcolor(),width:parseInt(a.getStyle("width"),10),height:parseInt(a.getStyle("height"),10),acceptable_range:!1,zeroline:!1};Object.extend(this.options,c||{});this.step=this.calculateStep();this.paper=new Raphael(this.element,this.options.width,this.options.height);this.drawBackground();this.draw()},drawBackground:function(){this.background=
this.options.acceptable_range?this.paper.rect(0,this.options.height-this.normalise(this.options.acceptable_range[1]),this.options.width,this.normalise(this.options.acceptable_range[1])-this.normalise(this.options.acceptable_range[0])):this.paper.rect(0,0,this.options.width,this.options.height);this.background.attr({fill:this.options.background_color,stroke:"none"})},calculateStep:function(){return this.options.width/(this.data.length-1)},makeRandomcolor:function(){return Raphael.hsb2rgb(Math.random(),
1,0.75).hex},normalise:function(a){var b=this.data.min()<0?this.data.max()-this.data.min():this.data.max();a-=this.data.min()<0?this.data.min():0;return a/b*this.options.height},draw:function(){var a=this.normaliseData(this.data),b;if(this.options.zeroline&&this.data.min()<0)this.options.zeroline=this.options.zeroline===!0?{"stroke-width":"1px",stroke:"#BBBBBB"}:this.options.zeroline,b=parseInt(this.options.height-this.normalise(0),10),this.paper.path().attr(this.options.zeroline).moveTo(0,b).lineTo(this.options.width,
b);this.drawLines(this.options.color,a);this.options.highlight&&this.showHighlight(a)},drawLines:function(a,b){var c=this.paper.path().attr({stroke:a,"stroke-width":this.options.stroke_width}).moveTo(0,this.options.height-b.first()),d=0,e=this.data.min()<0?this.options.stroke_width:0;b.slice(1).each(function(a){d+=this.step;c.lineTo(d,this.options.height-a-e)}.bind(this))},showHighlight:function(a){var b=1+this.options.stroke_width/2,c=this.options.width-b;a=a[this.options.highlight.index||a.length-
1]+(b/2).round();var d=this.options.highlight.color||"#f00";typeof this.options.highlight.index!=="undefined"&&(c=this.step*this.options.highlight.index);this.paper.circle(c,this.options.height-a+b/2,b).attr({stroke:!1,fill:d})}});
Grafico.SparkBar=Class.create(Grafico.SparkLine,{calculateStep:function(){return this.options.width/this.data.length},drawLines:function(a,b){var c=this.options.bargraph_lastcolor,d=this.step>2?this.step-1:this.step,e=d/2,f=this.normalise(0);b.each(function(g,h){var i,j;i=c&&h===b.length-1?c:a;j=this.paper.path().attr({stroke:i,"stroke-width":d});j.moveTo(e,this.options.height-g);j.lineTo(e,this.options.height-f);g<f&&j.attr({stroke:this.options.bargraph_negativecolor||i});e+=this.step}.bind(this))},
showHighlight:function(){}});
Grafico.SparkArea=Class.create(Grafico.SparkLine,{drawLines:function(a,b){var c=a,d=a,e=0.2,f=this.normalise(0);typeof a=="object"&&(c=a[1],d=a[0],e=1);var g=this.paper.path().attr({fill:c,stroke:c,"stroke-width":0,"stroke-opacity":0,opacity:e}).moveTo(0,this.options.height-f).lineTo(0,this.options.height-b.first()),h=this.paper.path().attr({stroke:d,"stroke-width":this.options.stroke_width}).moveTo(0,this.options.height-b.first()),i=0;b.slice(1).each(function(a){i+=this.step;g.lineTo(i,this.options.height-
a);h.lineTo(i,this.options.height-a)}.bind(this));g.lineTo(i,this.options.height-f)}});
</script><script>Event.observe(window, 'load', function() {var summary_bar = new Grafico.StackedBarGraph($('overallChart1'),{ passed: [ 31, 10, 4 ],failed: [0, 3, 1 ], skipped: [45, 12, 6 ]},{ labels: [ "MUST", "SHOULD", "MAY" ],colors: { passed: '#a2bf2f', failed: '#a80000', skipped: '#606060' },hover_color: "#ccccff",datalabels: { passed: [ "31 Passed", "10 Passed", "4 Passed"],failed: [ "0 Failed" , "3 Failed" , "1 Failed" ],skipped: [ "45 Skipped", "12 Skipped", "6 Skipped" ]},}); });</script><script>Event.observe(window, 'load', function() {var resource_bar = new Grafico.StackedBarGraph($('resourcesChart'),{BasicContainerTest: [31, 4, 23 ],MemberResourceTest: [14, null, 18 ] },{ labels: [ "Passed", "Failed", "Skipped" ],hover_color: "#ccccff",colors: {BasicContainerTest: '#42d992', MemberResourceTest: '#1cbfbb' },datalabels: {BasicContainerTest: [ "31 BasicContainerTest", "4 BasicContainerTest", "23 BasicContainerTest" ],MemberResourceTest: [ "14 MemberResourceTest", "null MemberResourceTest", "18 MemberResourceTest" ]},}); });</script></body></html>